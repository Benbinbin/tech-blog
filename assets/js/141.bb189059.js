(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1290:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"express-ç®€ä»‹"}},[t._v("Express ç®€ä»‹")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š"),n("a",{attrs:{href:"http://expressjs.com/zh-cn/starter/installing.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Express å…¥é—¨"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Express æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„ Web Server å¼€å‘æ¡†æ¶ï¼Œè®¸å¤š "),n("a",{attrs:{href:"https://www.expressjs.com.cn/resources/frameworks.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æµè¡Œçš„å¼€å‘æ¡†æ¶"),n("OutboundLink")],1),t._v(" éƒ½åŸºäº Express æ„å»ºã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(809),alt:"Express"}})]),t._v(" "),n("h2",{attrs:{id:"å®‰è£…"}},[t._v("å®‰è£…")]),t._v(" "),n("ol",[n("li",[t._v("é¦–å…ˆå‡å®šä½ å·²ç»å®‰è£…äº† "),n("a",{attrs:{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),n("OutboundLink")],1),t._v("ï¼Œæ¥ä¸‹æ¥ä¸ºä½ çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶åè¿›å…¥æ­¤ç›®å½•å¹¶å°†å…¶ä½œä¸ºå½“å‰å·¥ä½œç›®å½•")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" myapp\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myapp\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("é€šè¿‡ "),n("code",[t._v("npm init")]),t._v(" å‘½ä»¤ä¸ºä½ çš„åº”ç”¨åˆ›å»ºä¸€ä¸ª "),n("code",[t._v("package.json")]),t._v(" æ–‡ä»¶")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ­¤å‘½ä»¤å°†è¦æ±‚ä½ è¾“å…¥å‡ ä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æ¥æŒ‰å›è½¦ Enter é”®æ¥å—å¤§éƒ¨åˆ†é»˜è®¤è®¾ç½®å³å¯ï¼Œé™¤äº†åº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼Œåº”è¯¥æ˜ç¡®è®¾ç½®")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯ä»¥é‡‡ç”¨é»˜è®¤çš„ index.js æ–‡ä»¶åï¼Œæˆ–é”®å…¥æ‰€å¸Œæœ›çš„åç§°ï¼Œå¦‚ app.js")]),t._v("\nentry point: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("å°†ç»ˆç«¯è·¯å¾„åˆ‡æ¢è¿› "),n("code",[t._v("myapp")]),t._v(" ç›®å½•ä¸‹ï¼Œå®‰è£… Express å¹¶å°†å…¶ä¿å­˜åˆ°ä¾èµ–åˆ—è¡¨ä¸­")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" express --save\n")])])]),n("p",[t._v("ğŸ’¡ å¦‚æœåªæ˜¯ä¸´æ—¶å®‰è£… Expressï¼Œä¸æƒ³å°†å®ƒæ·»åŠ åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" express --no-save\n")])])]),n("p",[t._v("ğŸ’¡ npm 5.0+ ç‰ˆæœ¬åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå°†å®‰è£…çš„æ¨¡å—æ·»åŠ åˆ° "),n("code",[t._v("package.json")]),t._v(" æ–‡ä»¶ä¸­çš„ "),n("code",[t._v("dependencies")]),t._v(" åˆ—è¡¨ä¸­ã€‚å¯¹äºè¾ƒè€çš„ npm ç‰ˆæœ¬ï¼Œä½ å°±å¿…é¡»æŒ‡å®š "),n("code",[t._v("--save")]),t._v(" å‚æ•°")]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("æ‰§è¡Œç¨‹åº")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ node app.js\n")])])]),n("h2",{attrs:{id:"å¼€å¯æœåŠ¡å™¨"}},[t._v("å¼€å¯æœåŠ¡å™¨")]),t._v(" "),n("p",[t._v("ä½¿ç”¨ Express æ„å»ºä¸€ä¸ªæç®€çš„çš„ Web åº”ç”¨ç¨‹å¼")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼•å…¥ express æ¨¡å—")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹åŒ–")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®ç›‘å¬çš„ç«¯å£")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// å¯¹äºæŒ‡å‘æ ¹ç›®å½• URLï¼ˆ/ï¼‰æˆ–è·¯ç”±çš„è¦æ±‚ï¼Œä»¥ "Hello World!" å›åº”ï¼›å¯¹äºå…¶ä»–è·¯å¾„çš„è®¿é—®å°±ï¼ˆé»˜è®¤ï¼‰å›åº” 404 æ‰¾ä¸åˆ°')]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬ç«¯å£ 3000")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Example app listening at http://localhost:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"express-åº”ç”¨ç¨‹åºç”Ÿæˆå™¨"}},[t._v("Express åº”ç”¨ç¨‹åºç”Ÿæˆå™¨")]),t._v(" "),n("p",[t._v("å¦ä¸€ä¸ªåˆ›å»ºåº”ç”¨ç¨‹åºçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç¨‹åºç”Ÿæˆå™¨å·¥å…·ï¼ˆCLI å·¥å…·ï¼‰express-generatorï¼Œå®ƒå¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ª Web ç¨‹åºæ¡†æ¶ã€‚")]),t._v(" "),n("ol",{attrs:{start:"0"}},[n("li",[t._v("å…¨å±€å®‰è£… Express ç”Ÿæˆå™¨")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" express-generator -g\n")])])]),n("ol",[n("li",[t._v("å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºåä¸º "),n("code",[t._v("myapp")]),t._v(" çš„ Express åº”ç”¨ç¨‹åº")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ express --view"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pug myapp\n")])])]),n("p",[t._v("ğŸ’¡ Express ç”Ÿæˆå™¨æ”¯æŒå¤šç§æ¨¡æ¿å¼•æ“ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ EJS å¯ä»¥å°†å‚æ•°è®¾ç½®ä¸º "),n("code",[t._v("--view=ejs")]),t._v(" æˆ–ç”¨ç®€å†™å½¢å¼ "),n("code",[t._v("-e")])]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("å°†ç»ˆç«¯è·¯å¾„åˆ‡æ¢è¿› "),n("code",[t._v("myapp")]),t._v(" ç›®å½•ä¸‹ï¼Œå®‰è£…ä¾èµ–é¡¹")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myapp\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("è¿è¡Œæ­¤åº”ç”¨ç¨‹åº")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ "),n("code",[t._v("http://localhost:3000/")]),t._v(" ä»¥è®¿é—®æ­¤åº”ç”¨ç¨‹åº")])]),t._v(" "),n("p",[t._v("ç”Ÿæˆçš„åº”ç”¨ç¨‹åºå…·æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(".\nâ”œâ”€â”€ app.js\nâ”œâ”€â”€ bin\nâ”‚   â””â”€â”€ www\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ public\nâ”‚   â”œâ”€â”€ images\nâ”‚   â”œâ”€â”€ javascripts\nâ”‚   â””â”€â”€ stylesheets\nâ”‚       â””â”€â”€ style.css\nâ”œâ”€â”€ routes\nâ”‚   â”œâ”€â”€ index.js\nâ”‚   â””â”€â”€ users.js\nâ””â”€â”€ views\n    â”œâ”€â”€ error.pug\n    â”œâ”€â”€ index.pug\n    â””â”€â”€ layout.pug\n\n7 directories, 9 files\n")])])]),n("p",[t._v("ç›¸å…³æ–‡ä»¶åŠŸèƒ½ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("./bin/www")]),t._v(" åˆ›å»º HTTP æœåŠ¡")]),t._v(" "),n("li",[n("code",[t._v("./public")]),t._v(" å­˜æ”¾é™æ€æ–‡ä»¶çš„ç›®å½•ï¼ˆå‰åç«¯åˆ†ç¦»ä¸€èˆ¬ä¸ä½¿ç”¨è¯¥ç›®å½•ï¼‰")]),t._v(" "),n("li",[n("code",[t._v("./routes")]),t._v(" è·¯ç”±ç›¸å…³çš„é…ç½®")]),t._v(" "),n("li",[n("code",[t._v("./views")]),t._v(" HTML æ¨¡æ¿æ–‡ä»¶ï¼ˆå‰åç«¯åˆ†ç¦»ä¸€èˆ¬ä¸ä½¿ç”¨è¯¥ç›®å½•ï¼‰")]),t._v(" "),n("li",[n("code",[t._v("./app.js")]),t._v(" Express å…¥å£æ–‡ä»¶")])]),t._v(" "),n("p",[t._v("å…¶ä¸­ "),n("code",[t._v("app.js")]),t._v(" æ˜¯ Express å…¥å£æ–‡ä»¶ï¼Œåˆå§‹åŒ–ååˆ›å»ºçš„å†…å®¹å¦‚ä¸‹")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ“ app.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" createError "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http-errors'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»º http error å¯¹è±¡ï¼Œé’ˆå¯¹ 404 çŠ¶æ€")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cookieParser "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie-parser'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æ cookie æ¨¡å—")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" logger "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'morgan'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆæ—¥å¿—æ¨¡å—")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼•å…¥è·¯ç”±å¤„ç†ç¨‹åº")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" indexRouter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./routes/index'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" usersRouter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./routes/users'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–ä¸€ä¸ª express å®ä¾‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–ä¸€ä¸ªè§†å›¾å¼•æ“å®ä¾‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// view engine setup")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'views'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'views'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'view engine'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jade'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * è£…å…¥å„ç§ä¸­é—´ä»¶å‡½æ•°\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ------ è§£æå„ç§æ•°æ® ------")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("logger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dev'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”Ÿæˆæ—¥å¿—")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ¯æ¬¡ POST è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œä¾¿äºåé¢é€šè¿‡ req.body è®¿é—®è¿™äº›å†…å®¹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// JSON æ ¼å¼çš„æ•°æ®")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é JSON æ ¼å¼çš„æ•°æ®ï¼Œå¦‚è¡¨å•æ ¼å¼ï¼Œå³ content-type ä¸º x-www-form-urlencoded æ ¼å¼")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("urlencoded")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" extended"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ¯æ¬¡è¯·æ±‚çš„ cookieï¼Œä¾¿äºåé¢é€šè¿‡ req.cookie è®¿é—®è¿™äº›å†…å®¹")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookieParser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¼æ¥é™æ€æ–‡ä»¶çš„è·¯å¾„ï¼Œå½“è®¿é—®é™æ€æ–‡ä»¶æ—¶å¯ä»¥æ­£ç¡®è¿”å›")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ------ æ³¨å†Œè·¯ç”± ------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çˆ¶è·¯ç”±ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆæ–‡ä»¶ï¼‰ä¸­çš„ä¼šé…ç½®å­è·¯ç”±")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" indexRouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/users'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usersRouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†æœªåŒ¹é…è·¯ç”±çš„æƒ…å†µ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// catch 404 and forward to error handler")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createError")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ------ å¤„ç†é”™è¯¯ ------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// error handler")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set locals, only providing error in development")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯åªåœ¨å¼€å‘ç¯å¢ƒï¼Œå³ NODE_ENV=dev æ—¶ï¼Œæ‰è®¾ç½®åˆ°å“åº”ä¸­")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locals"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locals"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'env'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dev'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// render the error page")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports},809:function(t,s,a){t.exports=a.p+"assets/img/20201001155442817_6568.d50e460e.png"}}]);