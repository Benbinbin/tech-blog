(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{1300:function(n,t,e){"use strict";e.r(t);var s=e(18),o=Object(s.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"nginx"}},[n._v("Nginx")]),n._v(" "),s("p",[n._v("Nginx 是高性能的 web server，开源免费，一般用作静态服务（服务端不需要解析，直接返回请求文件）、负载均衡；"),s("strong",[n._v("反向代理")]),n._v("（对客户端不可逆，客户端无法控制）实现前后端同域联调，解决 cookie 跨域不共享（一般在（本地）开发时前端开启的 server 和后端开启的 server 端口不一致）。")]),n._v(" "),s("p",[s("img",{attrs:{src:e(817),alt:"Nginx 反向代理模型"}})]),n._v(" "),s("h2",{attrs:{id:"安装启动"}},[n._v("安装启动")]),n._v(" "),s("ol",[s("li",[n._v("在 "),s("a",{attrs:{href:"https://nginx.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nginx 官网"),s("OutboundLink")],1),n._v("下载适合系统的软件包并解压 💡 Windows 系统安装方法参考"),s("a",{attrs:{href:"http://nginx.org/en/docs/windows.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("官方文档"),s("OutboundLink")],1)]),n._v(" "),s("li",[n._v("打开软件安装目录下的 "),s("code",[n._v(".\\conf\\nginx.conf")]),n._v(" 文件，修改其中的 Nginx 配置")])]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("#user  nobody;\nworker_processes  2;   # 基于系统的 CPU 核心配置服务器的进程\n\n# ...\nserver {\n    listen       8080;   # 修改服务器监听的端口\n    # ...\n    # 注释以下部分\n    #location / {\n    #    root   html;\n    #    index  index.html index.htm;\n    #}\n    # 添加代理设置\n    location / {\n        # 如果请求访问的是 nginx 服务器的根目录（静态文件）就代理到域名和端口为 http://localhost:8001; 服务器\n        proxy_pass: http://localhost: 8001;\n    }\n    location /api/ {\n        # 如果请求访问的是 nginx 服务器的 /api/ 就代理到域名和端口为 http://localhost:8000; 服务器，并设置 header 为原来的 host（同源传递 cookie）\n        proxy_pass http://localhost:8000;\n        proxy_set_header Host $host;\n    }\n}\n")])])]),s("p",[n._v("💡 如果出现错误 "),s("code",[n._v("nginx: [emerg] bind() to 0.0.0.0:8080 failed (10013: An attempt was made to access a socket in a way forbidden by its access permissions)")]),n._v(" 表示已有相关的进程占用了相关的端口，可以更改配置中的 "),s("code",[n._v("listen")]),n._v(" 监听的端口。")]),n._v(" "),s("p",[n._v("💡 可以运行 "),s("code",[n._v("nginx -t")]),n._v(" 来查看配置语法是否正确，配置测试是否成功。")]),n._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("nginx -t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 测试成功输出")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# nginx: the configuration file E:\\nginx/conf/nginx.conf syntax is ok")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# nginx: configuration file E:\\nginx/conf/nginx.conf test is successful")]),n._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[n._v("将终端路径切换到软件安装的目录（应用 "),s("code",[n._v("nginx.exe")]),n._v(" 所在的目录），输入以下命令运行 Nginx 服务器")])]),n._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("start nginx\n")])])]),s("h2",{attrs:{id:"常用命令"}},[n._v("常用命令")]),n._v(" "),s("p",[n._v("参考："),s("a",{attrs:{href:"http://nginx.org/en/docs/windows.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("nginx for Windows"),s("OutboundLink")],1)]),n._v(" "),s("ul",[s("li",[n._v("测试配置文件格式是否正确 "),s("code",[n._v("nginx -t")])]),n._v(" "),s("li",[n._v("重启 Nginx 并重新载入配置文件 "),s("code",[n._v("nginx -s reload")])]),n._v(" "),s("li",[n._v("重启 Nginx 服务 "),s("code",[n._v("nginx -s reopen")])]),n._v(" "),s("li",[n._v("停止 Nginx 服务 "),s("code",[n._v("nginx -s stop")])])])])}),[],!1,null,null,null);t.default=o.exports},817:function(n,t,e){n.exports=e.p+"assets/img/20201104133834330_8911.7f83949e.png"}}]);