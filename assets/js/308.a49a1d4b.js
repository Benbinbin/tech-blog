(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{1401:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"promise"}},[t._v("promise")]),t._v(" "),a("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zh.javascript.info/promise-basics",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise - JavaScript | MDN"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä½¿ç”¨ Promise - JavaScript | MDN"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.google.cn/web/fundamentals/primers/promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript Promiseï¼šç®€ä»‹  |  Web Fundamentals  |  Google Developers"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("code",[t._v("promise")]),t._v(" å¯¹è±¡ä»£è¡¨å¼‚æ­¥æ‰§è¡Œç»“æœï¼Œé€šå¸¸ç”¨äºç½‘ç»œè¯·æ±‚ï¼Œé€šè¿‡æ„é€ å‡½æ•° "),a("code",[t._v("new Promise")]),t._v(" åˆ›å»ºï¼Œè€Œä¸”åœ¨æ‰§è¡Œæ—¶ç«‹å³è¿”å› "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œâš ï¸ ä½†è¯¥è¿”å›å€¼å¹¶ä¸æ˜¯æœ€ç»ˆçš„æ‰§è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ä»£è¡¨æœªæ¥å‡ºç°çš„ç»“æœçš„å¯¹è±¡ï¼Œå³  "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡æ˜¯ä¸€ä¸ª"),a("strong",[t._v("ä»£ç†å¯¹è±¡")]),t._v("ï¼ˆä»£ç†ä¸€ä¸ªåˆ›å»ºæ—¶ä»æœªçŸ¥çš„å€¼ï¼Œéœ€è¦ç­‰å¾…å¼‚æ­¥è¡Œä¸ºæ‰§è¡Œå®Œæˆåæ‰å¯ä»¥ç¡®å®šï¼‰,"),a("strong",[t._v("è¿™å¯è®©ä¸»çº¿ç¨‹ä¸­çš„å¼‚æ­¥è¡Œä¸ºåƒåŒæ­¥è¡Œä¸ºé‚£æ ·ç«‹å³æ‹¥æœ‰è¿”å›å€¼ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…è€Œå¼•èµ·å¡é¡¿")]),t._v("ã€‚")]),t._v(" "),a("h2",{attrs:{id:"promise-åŸç†"}},[t._v("promise åŸç†")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("é€šè¿‡æ„é€ å‡½æ•°åˆ›å»º "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°æ˜¯"),a("strong",[t._v("å¤„ç†å™¨å‡½æ•° executor function")]),t._v(" ï¼Œå®ƒä¼šåœ¨æ„é€ å‡½æ•°æ‰§è¡Œæ—¶è¢«ç«‹å³è°ƒç”¨ï¼Œå¼‚æ­¥æ“ä½œï¼ˆå¦‚åŒ…å« "),a("code",[t._v("setTimeout()")]),t._v(" çš„ä»£ç ï¼‰å°±æ˜¯åœ¨å…¶ä¸­è¿›è¡Œã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“ promise è¢«æ„é€ å®Œæˆæ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œæ­¤å‡½æ•°")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// executor")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡æœ‰ä¸åŒçŠ¶æ€ï¼Œä¸€å¼€å§‹åˆ›å»ºçš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€æ˜¯ "),a("code",[t._v("pending")]),t._v("ï¼ˆè¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼‰ï¼Œç„¶ååœ¨ executor ä¸­ä¼šåŸºäºå¼‚æ­¥è¡Œä¸ºçš„ç»“æœæ‰§è¡Œ "),a("code",[t._v("resolve")]),t._v(" æˆ– "),a("code",[t._v("reject")]),t._v(" ä¹‹ä¸€ï¼Œè¿™æ ·å°±ä¼šæ”¹å˜ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€ä¸º "),a("code",[t._v("settled")]),t._v("ï¼ˆè¡¨ç¤ºçŠ¶æ€ç¡®å®šï¼Œæ›´å‡†ç¡®çš„æ˜¯ "),a("code",[t._v("resolved")]),t._v(" æˆ– "),a("code",[t._v("rejected")]),t._v(" çŠ¶æ€ä¹‹ä¸€ï¼‰")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("pending")]),t._v(" è¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼Œæ—¢å¼‚æ­¥è¡Œä¸ºä¸æ˜¯æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å¤±è´¥çš„çŠ¶æ€")]),t._v(" "),a("li",[a("code",[t._v("settled")]),t._v(" è¡¨ç¤ºç¡®å®šçŠ¶æ€ï¼Œæ„å‘³ç€å·²ç»æˆåŠŸæˆ–å¤±è´¥")]),t._v(" "),a("li",[a("code",[t._v("fulfilled")]),t._v(" æˆ– "),a("code",[t._v("resolved")]),t._v(" æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆ")]),t._v(" "),a("li",[a("code",[t._v("rejected")]),t._v(" æ„å‘³ç€æ“ä½œå¤±è´¥")])]),t._v(" "),a("p",[t._v("ğŸ’¡ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡æœ‰ä¸¤ä¸ªå†…éƒ¨çš„çš„å±æ€§çŠ¶æ€ "),a("code",[t._v("state")]),t._v("ï¼ˆé»˜è®¤ä¸º "),a("code",[t._v("pending")]),t._v("ï¼‰å’Œç»“æœ "),a("code",[t._v("result")]),t._v("ï¼ˆé»˜è®¤ä¸º "),a("code",[t._v("undefined")]),t._v("ï¼‰ï¼Œå®ƒä»¬æ— æ³•ç›´æ¥è®¿é—®ä½†å¯ä»¥åœ¨ executor function ä¸­è°ƒç”¨ "),a("code",[t._v("resolve")]),t._v(" æˆ– "),a("code",[t._v("reject")]),t._v(" æ›´æ”¹å…¶çŠ¶æ€å’Œè®¾ç½®ç»“æœã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åŸºäºå¼‚æ­¥è¡Œä¸ºå½¢æˆçš„ç‰¹å®šæ¡ä»¶ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° "),a("code",[t._v("resolve")]),t._v(" æˆ– "),a("code",[t._v("reject")]),t._v(" ä¹‹ä¸€ï¼Œç¡®å®š "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€ï¼Œè¿˜å¯èƒ½ä¿®æ”¹å¯¹è±¡çš„ç»“æœå±æ€§ "),a("code",[t._v("result")]),t._v("ï¼ˆç»“æœçš„å€¼å°±æ˜¯å›è°ƒå‡½æ•° "),a("code",[t._v("resolve(value)")]),t._v(" æˆ– "),a("code",[t._v("reject(error)")]),t._v(" çš„å‚æ•° "),a("code",[t._v("value")]),t._v(" æˆ– "),a("code",[t._v("error")]),t._v("ï¼‰")]),t._v(" "),a("p",[t._v("executor å‚æ•° "),a("code",[t._v("resolve")]),t._v(" å’Œ "),a("code",[t._v("reject")]),t._v(" æ˜¯ç”± JavaScript è‡ªèº«æä¾›çš„é»˜è®¤å‚æ•°ï¼ˆå®ƒä»¬æ˜¯å‡½æ•°ï¼Œæ¥å—çš„å®å‚è®¾ç½®ä¸º "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„ç»“æœå±æ€§ï¼‰ï¼Œåº”è¯¥éµå¾ªè§„åˆ™åŸºäºå¼‚æ­¥ä»£ç æ‰§è¡Œçš„ç»“æœè°ƒç”¨å®ƒä»¬å…¶ä¸€ï¼Œä»¥ä¿®æ”¹ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€å’Œç»“æœ")]),t._v(" "),a("ul",[a("li",[t._v("è°ƒç”¨ "),a("code",[t._v("resolve(value)")]),t._v(" è¡¨ç¤ºä»»åŠ¡æˆåŠŸå®Œæˆï¼Œè€Œä¸”å°† "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„ç»“æœå±æ€§è®¾ç½®ä¸º "),a("code",[t._v("value")])]),t._v(" "),a("li",[t._v("è°ƒç”¨ "),a("code",[t._v("reject(error)")]),t._v(" è¡¨ç¤ºå‡ºç°äº† exector function ä¸­å‡ºç° "),a("code",[t._v("error")]),t._v("ï¼Œè€Œä¸”å°† "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„ç»“æœå±æ€§è®¾ç½®ä¸ºä¸º "),a("code",[t._v("error")]),t._v(" å¯¹è±¡ï¼ˆå…¶å®å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ä½œä¸ºå‚æ•°ï¼Œä½†æ˜¯ä¸ºäº†å¯ä»¥è·å–é”™è¯¯ä¿¡æ¯ï¼Œæ¨èä½¿ç”¨ "),a("code",[t._v("error")]),t._v(" å¯¹è±¡æˆ–ç»§æ‰¿è‡ª "),a("code",[t._v("error")]),t._v(" çš„å¯¹è±¡ï¼‰")])]),t._v(" "),a("p",[a("img",{attrs:{src:"_v_images/20200501171746434_26167.png",alt:"settled promise"}})]),t._v(" "),a("p",[t._v("âš ï¸ executor åªèƒ½è°ƒç”¨ä¸€ä¸ª "),a("code",[t._v("resolve")]),t._v(" æˆ–ä¸€ä¸ª "),a("code",[t._v("reject")]),t._v("ï¼Œä»»ä½•çŠ¶æ€çš„æ›´æ”¹éƒ½æ˜¯æœ€ç»ˆçš„ï¼Œæ­¤åæ‰€æœ‰å…¶ä»–çš„å†å¯¹ "),a("code",[t._v("resolve")]),t._v(" å’Œ "),a("code",[t._v("reject")]),t._v(" çš„è°ƒç”¨éƒ½ä¼šè¢«å¿½ç•¥ï¼Œå¹¶ä¸”ï¼Œ"),a("code",[t._v("resolve/reject")]),t._v(" åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼ˆæˆ–ä¸åŒ…å«ä»»ä½•å‚æ•°ï¼‰ï¼Œå¹¶ä¸”å°†å¿½ç•¥é¢å¤–çš„å‚æ•°ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"â€¦"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¢«å¿½ç•¥")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"â€¦"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¢«å¿½ç•¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„åŸå‹æœ‰æ–¹æ³• "),a("code",[t._v(".then(handler)")]),t._v("ã€"),a("code",[t._v(".catch(handler)")]),t._v("ã€"),a("code",[t._v(".finally(handler)")]),t._v("ï¼Œå®ƒä»¬ä¹‹ä¸€ä¼šåœ¨ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€ç¡®å®šåè¢«è°ƒç”¨ï¼Œä»¥æ‰§è¡Œç›¸åº”çš„è¡Œä¸ºã€‚")]),t._v(" "),a("p",[t._v("è¿™äº›æ–¹æ³•å’Œå›è°ƒç»“æ„ä¸­çš„å›è°ƒå‡½æ•°ä½œç”¨ç±»ä¼¼ï¼Œä½†å­˜åœ¨åŒºåˆ«ï¼Œåœ¨å›è°ƒç»“æ„ä¸­"),a("RouterLink",{attrs:{to:"/web/Frontend/JavaScript/è¯­æ³•åŸºç¡€/å›è°ƒ.html"}},[t._v("å›è°ƒå‡½æ•°éœ€è¦åœ¨å£°æ˜ä¸»ä½“å‡½æ•°æ—¶å°±ç»™å‡º")]),t._v("ï¼›Promise åˆ™æ›´åŠ çµæ´»ï¼Œè¿™äº›æ–¹æ³•å¹¶ä¸ä¸€å®šéœ€è¦åœ¨åˆ›å»ºå¯¹è±¡æ—¶å°±è®¾å®šï¼Œå¯ä»¥éšæ—¶ä¸ºå¯¹è±¡è®¾ç½®æ–¹æ³•ä»¥æ·»åŠ å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ï¼Œå¦‚æœç»“æœå·²ç»åœ¨ï¼ˆå³ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€å·²ç» "),a("code",[t._v("settled")]),t._v("ï¼‰è¿™äº›åæ¥æ·»åŠ çš„å¤„ç†ç¨‹åºä¾¿ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œä¸”å¯ä»¥æ·»åŠ å¤šæ¬¡ã€‚")],1),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨åŒä¸€ä¸ª promise å¯¹è±¡ä¸Šå¤šæ¬¡æ·»åŠ æ–¹æ³• thenï¼Œåˆ›å»ºå‡ºå¤šä¸ªç‹¬ç«‹çš„å¤„ç†ç¨‹åº")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"_v_images/20200501201018739_24298.png",alt:"multiple then"}})]),t._v(" "),a("p",[t._v("ğŸ’¡ å®é™…ä¸Šå®Œæ•´æ–¹æ³• "),a("code",[t._v("then(resolveFunc, rejectFunc)")]),t._v(" å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆè€Œä¸”æ¯æ¬¡åªèƒ½è°ƒç”¨å…¶ä¸€ï¼‰ï¼Œå½“ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ä¸­çš„å¼‚æ­¥ä»£ç æ‰§è¡ŒæˆåŠŸï¼ˆå³ "),a("code",[t._v("promise")]),t._v(" çŠ¶æ€ä¸º"),a("code",[t._v("fulfilled")]),t._v(" æˆ– "),a("code",[t._v("resolved")]),t._v(" æ—¶ï¼‰ï¼Œæ–¹æ³• "),a("code",[t._v("then()")]),t._v(" ä¼šæ‰§è¡Œå›è°ƒå‡½æ•° "),a("code",[t._v("resolvFunc")]),t._v("ï¼Œå¼‚æ­¥ä»£ç æ‰§è¡Œå¤±è´¥å°±ä¼šæ‰§è¡Œå›è°ƒå‡½æ•° "),a("code",[t._v("rejectFunc")]),t._v("ã€‚è€Œæ–¹æ³• "),a("code",[t._v("catch()")]),t._v(" å®é™…ä¸Šæ˜¯ "),a("code",[t._v("then(null, rejectFunc)")]),t._v(" çš„ç¼©å†™ï¼Œå³å®ƒåªé€‚ç”¨äºå¼‚å¸¸æƒ…å†µä¸‹æ‰æ‰§è¡Œ handler å¤„ç†ç¨‹åºï¼Œæ¨èä½¿ç”¨ "),a("code",[t._v("catch")]),t._v(" æ•æ‰å¼‚æ­¥ä»£ç æ‰§è¡Œå¤±è´¥çš„æƒ…å†µå› ä¸ºå®ƒä¾¿äºé˜…è¯»ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve è¿è¡Œ .then ä¸­çš„ç¬¬ä¸€ä¸ªå‡½æ•°")]),t._v("\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 1 ç§’åæ˜¾ç¤º "done!"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸è¿è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Whoops!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reject è¿è¡Œ .then ä¸­çš„ç¬¬äºŒä¸ªå‡½æ•°")]),t._v("\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸è¿è¡Œ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 1 ç§’åæ˜¾ç¤º "Error: Whoops!"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„æ–¹æ³• "),a("code",[t._v("finally")]),t._v("ï¼Œç±»ä¼¼äº "),a("code",[t._v("try {...} catch {...}")]),t._v(" ä¸­çš„ "),a("code",[t._v("finally")]),t._v(" å­å¥ä¸€æ ·ï¼Œæ–¹æ³• "),a("code",[t._v(".finally(f)")]),t._v(" ä¸­çš„å¤„ç†ç¨‹åº¦ "),a("code",[t._v("f")]),t._v(" åœ¨ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡è¢« "),a("code",[t._v("settled")]),t._v(" æ—¶è¿è¡Œï¼ˆå³ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡è¢« "),a("code",[t._v("resolve")]),t._v(" æˆ– "),a("code",[t._v("reject")]),t._v("ï¼‰è¯¥æ–¹æ³•æ˜¯è®¾ç½®æ¸…ç† cleanup çš„å¾ˆå¥½åœ°æ–¹ï¼Œå®ƒçš„å¤„ç†ç¨‹åºæ— è®ºå¼‚æ­¥æ“ä½œç»“æœå¦‚ä½•éƒ½ä¼šè¢«æ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* åšä¸€äº›éœ€è¦æ—¶é—´çš„äº‹å„¿ï¼Œç„¶åè°ƒç”¨ resolve/reject */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ promise è¢« settled æ—¶è¿è¡Œï¼Œæ— è®ºæˆåŠŸä¸å¦")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" stop loading indicator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" show result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" show error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("æ–¹æ³• "),a("code",[t._v(".finally(f)")]),t._v(" ä¸æ–¹æ³• "),a("code",[t._v("then(f,f)")]),t._v(" ç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸»è¦çš„åŒºåˆ«")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹æ³• "),a("code",[t._v("finally")]),t._v(" çš„å¤„ç†ç¨‹åº handler æ²¡æœ‰å‚æ•°ï¼Œå› ä¸ºåœ¨ "),a("code",[t._v("finally")]),t._v(" ä¸­ä¸éœ€è¦çŸ¥é“ "),a("code",[t._v("promise")]),t._v(" æ˜¯å¦æˆåŠŸï¼Œä»»åŠ¡éƒ½ä¼šè¢«æ‰§è¡Œï¼Œè¢«ç§°ä½œå®šç¨¿ç¨‹åº finalizing procedures")]),t._v(" "),a("li",[t._v("æ–¹æ³• "),a("code",[t._v("finally")]),t._v(" çš„å¤„ç†ç¨‹åºå°†ç»“æœå’Œ "),a("code",[t._v("error")]),t._v(" ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºï¼ˆä¸€èˆ¬åœ¨é“¾å¼è°ƒç”¨ï¼‰ï¼Œè¿™éå¸¸æ–¹ä¾¿ï¼Œå› ä¸º "),a("code",[t._v("finally")]),t._v(" å¹¶ä¸æ˜¯ä¸ºäº†å¤„ç† "),a("code",[t._v("promise")]),t._v(" çš„ç»“æœï¼Œæ‰€ä»¥å®ƒå°†ç»“æœä¼ é€’äº†ä¸‹å»ã€‚")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Promise ready"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- .then å¯¹ç»“æœè¿›è¡Œå¤„ç†ï¼Œç»“æœ result æ˜¯ä»æ–¹æ³• finally ä¸­è·å–çš„")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Promise ready"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- .catch å¯¹ error å¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œé”™è¯¯å¯¹è±¡ error æ˜¯ä»æ–¹æ³• finally ä¸­è·å–çš„")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ æœ‰ä¸€ä¸ªæµè§ˆå™¨æŠ€å·§ï¼Œ"),a("a",{attrs:{href:"https://zh.javascript.info/promise-error-handling#qi-ta",target:"_blank",rel:"noopener noreferrer"}},[t._v("åœ¨æ–¹æ³• "),a("code",[t._v("finally")]),t._v(" å¤„ç†ç¨‹åºä¸­è¿”å›é›¶å»¶æ—¶ zero-timeout çš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡"),a("OutboundLink")],1),t._v("ï¼ˆå¦‚æ„å»ºå‡½æ•°çš„ executor ä¸­å«æœ‰ "),a("code",[t._v("setTimeout(callback, 0)")]),t._v("ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºä¸€äº›æµè§ˆå™¨ï¼Œå¦‚ Chromeï¼Œéœ€è¦ã€Œä¸€ç‚¹æ—¶é—´ã€å¤–çš„ "),a("code",[t._v("promise")]),t._v(" å¤„ç†ç¨‹åºæ¥ç»˜åˆ¶æ–‡æ¡£çš„æ›´æ”¹ï¼Œå› æ­¤å®ƒç¡®ä¿åœ¨è¿›å…¥é“¾ä¸‹ä¸€æ­¥ä¹‹å‰ï¼ŒæŒ‡ç¤ºï¼ˆå¦‚ modal å¼¹å‡ºæ¡†å‡ºç°æˆ–æ¶ˆå¤±æ—¶é¡µé¢èƒŒæ™¯è‰²çš„å˜åŒ–ï¼‰åœ¨è§†è§‰ä¸Šæ˜¯åœæ­¢çš„ã€‚")])])]),t._v(" "),a("p",[t._v("ğŸ’¡ "),a("code",[t._v("promise")]),t._v(" æ˜¯ä¸€ä¸ªå¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ª "),a("strong",[a("RouterLink",{attrs:{to:"d:/Front_end/JavaScript/å¼‚æ­¥æ“ä½œ.html"}},[t._v("å¼‚æ­¥æ“ä½œ")])],1),t._v(" çš„ç»“æœï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œé€šè¿‡å®ƒå¯ä»¥å°†å¼‚æ­¥æ“ä½œçš„ï¼ˆæˆåŠŸå’Œå¤±è´¥ï¼‰ç»“æœä¸ç›¸åº”çš„å¤„ç† handlerï¼ˆæ–¹æ³• "),a("code",[t._v(".then")]),t._v("ã€"),a("code",[t._v(".catch")]),t._v("ã€"),a("code",[t._v(".finally")]),t._v("ï¼Œç›¸å½“äº"),a("RouterLink",{attrs:{to:"/web/Frontend/JavaScript/è¯­æ³•åŸºç¡€/å›è°ƒ.html"}},[t._v("å›è°ƒç»“æ„")]),t._v("ä¸­çš„å›è°ƒå‡½æ•°ï¼‰ç»‘å®šï¼Œè¿™ç§åˆ†ç¦»ç»“æ„å¯ä»¥é¿å…åµŒå¥—å›è°ƒè€Œå½¢æˆã€Œå›è°ƒåœ°ç‹±ã€ç»“æ„ï¼ˆè¿™äº›æ–¹æ³•è¿”å›çš„æ˜¯ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥æ„å»º"),a("a",{attrs:{href:"#%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8"}},[t._v("é“¾å¼è°ƒç”¨")]),t._v("ï¼‰ã€‚")],1),t._v(" "),a("p",[t._v("promise ç›¸è¾ƒäºåŸºäºå›è°ƒçš„æ¨¡å¼çš„ä¸€äº›å¥½å¤„")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Promises")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Callbacks")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Promises å…è®¸æˆ‘ä»¬æŒ‰ç…§è‡ªç„¶é¡ºåºè¿›è¡Œç¼–ç ï¼Œå¯ä»¥å…ˆè¿è¡Œ "),a("code",[t._v("executor")]),t._v(" ç„¶åå†æ·»åŠ æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" æ¥å¤„ç†ç»“æœ")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("åœ¨å£°æ˜ä¸»ä½“å‡½æ•°æ—¶ï¼Œå¿…é¡»æœ‰ä¸€ä¸ª "),a("code",[t._v("callback")]),t._v(" å‡½æ•°ï¼Œå³åœ¨è°ƒç”¨ä¹‹å‰å¿…é¡»çŸ¥é“å¦‚ä½•å¤„ç†ç»“æœ")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥æ ¹æ®éœ€è¦åœ¨ promise ä¸Šå¤šæ¬¡è°ƒç”¨ "),a("code",[t._v(".then")]),t._v("ã€‚æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯å½¢æˆä¸€ä¸ªç‹¬ç«‹çš„å¤„ç†ç¨‹åºï¼ˆä¹Ÿå¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨æ¥å¯¹ç»Ÿä¸€ç»“æœè¿›è¡Œå¤„ç†ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("åªèƒ½æœ‰ä¸€ä¸ªå›è°ƒ")])])])]),t._v(" "),a("p",[t._v("âš ï¸ "),a("code",[t._v("Promise")]),t._v(" ä¸ "),a("code",[t._v("event")]),t._v(" ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å¼‚æ­¥æ“ä½œçš„ä¸€ç§ï¼Œä½†äº‹ä»¶ "),a("code",[t._v("event")]),t._v(" å¯ä»¥å¤šæ¬¡è§¦å‘ï¼Œè€Œ "),a("strong",[a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€")]),t._v("åªèƒ½ç¡®å®šä¸€æ¬¡ï¼ˆä½†æ˜¯å¯ä»¥åŸºäº "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€å¯ä»¥è®¾ç½®å¤šæ¬¡ "),a("code",[t._v(".then")]),t._v(" æ–¹æ³•ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("âš ï¸ "),a("code",[t._v("Promise")]),t._v(" å¹¶ä¸æ˜¯å®‰å…¨æ‰§è¡Œè´¹æ—¶æ“ä½œçš„é€šè¡Œè¯ï¼Œå®ƒåªæ˜¯åœ¨å¼‚æ­¥ä»»åŠ¡çŠ¶æ€ç¡®å®šæ—¶å†³å®šä¸‹ä¸€æ­¥æ“ä½œçš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœ "),a("code",[t._v("Promise")]),t._v(" åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸”åœ¨ "),a("code",[t._v("Promise")]),t._v(" ä¸­çš„æ“ä½œéœ€æ—¶è¿‡é•¿ä¹Ÿå¯èƒ½ä¼šé€ æˆé˜»å¡å¹¶å¼•èµ·é¡µé¢å¡é¡¿ã€‚")]),t._v(" "),a("h2",{attrs:{id:"é”™è¯¯å¤„ç†"}},[t._v("é”™è¯¯å¤„ç†")]),t._v(" "),a("p",[t._v("Promise é“¾åœ¨é”™è¯¯å¤„ç†ä¸­ååˆ†å¼ºå¤§ï¼Œå½“ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼ˆç”±äº executor æŠ›å‡ºå¼‚å¸¸ï¼‰çŠ¶æ€å˜æˆ "),a("code",[t._v("rejected")]),t._v(" æ—¶ï¼Œ"),a("strong",[t._v("æ§åˆ¶æƒå°†ç§»äº¤è‡³æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åº handlerï¼ˆä¸€èˆ¬æ˜¯æ–¹æ³• "),a("code",[t._v(".catch(handler)")])]),t._v("ï¼Œè¿™åœ¨å®é™…å¼€å‘ä¸­éå¸¸æ–¹ä¾¿ã€‚")]),t._v(" "),a("p",[t._v("å®é™…ä¸Šåœ¨ "),a("code",[t._v("promise")]),t._v(" æ„é€ å‡½æ•°ä¸­çš„æ‰§è¡Œè€… executor å’Œ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡æ–¹æ³•çš„å¤„ç†ç¨‹åº handler å‘¨å›´æœ‰ä¸€ä¸ªã€Œéšå¼çš„ã€ "),a("code",[t._v("try...catch")]),t._v(" ç»“æ„ï¼Œå¦‚æœä»£ç å‘ç”Ÿå¼‚å¸¸å°±ä¼šè¢«æ•è·ï¼Œå¹¶è§†ä¸º rejection è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Whoops!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: Whoops!")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›¸å½“äºä»¥ä¸‹æƒ…å†µ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Whoops!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: Whoops!")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ é™¤äº†å¼‚æ­¥ä»»åŠ¡å¤±è´¥ä¹‹å¤–ï¼Œå¦‚æœæ˜¯åœ¨æ–¹æ³• "),a("code",[t._v(".then()")]),t._v(" ä¸­å¼•å‘çš„é”™è¯¯ï¼ˆå¦‚ "),a("code",[t._v("throw")]),t._v(" ã€Œæ‰‹åŠ¨ã€æŠ›å‡ºé”™è¯¯ï¼‰ï¼Œä¹Ÿä¼šéšå¼è‡ªåŠ¨è°ƒç”¨å…¶åæœ€è¿‘çš„æ–¹æ³• "),a("code",[t._v("catch()")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Whoops!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reject è¿™ä¸ª promise")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: Whoops!")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ ä¸€èˆ¬éƒ½åœ¨ promise é“¾å°¾ç«¯ä½¿ç”¨ä¸€ä¸ª "),a("code",[t._v(".catch")]),t._v(" å¤„ç†å…¶ä¸Šçš„æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„ "),a("code",[t._v("error")]),t._v("ï¼Œä»¥é¿å…ç¨‹åºå› å¼‚å¸¸å¡ä½è€Œå¯¼è‡´è„šæœ¬æ­»æ‰ã€‚å¦‚æœå¯¹äº promise é“¾å¯èƒ½ä¼šäº§ç”Ÿæœªå¤„ç†çš„ rejectionï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[t._v("unhandledrejection")]),t._v(" äº‹ä»¶æ¥æ•è·è¿™ç±» "),a("code",[t._v("error")]),t._v("ï¼Œè¿™ä¸ªäº‹ä»¶æ˜¯ "),a("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/webappapis.html#unhandled-promise-rejections",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML æ ‡å‡†"),a("OutboundLink")],1),t._v(" çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå‡ºç°äº†ä¸€ä¸ª errorï¼Œå¹¶ä¸”åœ¨å…¶åæ²¡æœ‰ "),a("code",[t._v(".catch")]),t._v(" å¯¹å®ƒè¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆ "),a("code",[t._v("unhandledrejection")]),t._v(" å¤„ç†ç¨‹åº handler ä¼šè¢«è§¦å‘ï¼Œå¹¶è·å–å…·æœ‰ "),a("code",[t._v("error")]),t._v(" ç›¸å…³ä¿¡æ¯çš„ "),a("code",[t._v("event")]),t._v(" å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±èƒ½åšä¸€äº›åç»­å¤„ç†äº†ã€‚é€šå¸¸æ­¤ç±» error æ˜¯æ— æ³•æ¢å¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†é—®é¢˜å‘ŠçŸ¥ç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥å°†äº‹ä»¶æŠ¥å‘Šç»™æœåŠ¡å™¨ã€‚åœ¨ Node.js ç­‰éæµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œæœ‰å…¶ä»–ç”¨äºè·Ÿè¸ªæœªå¤„ç†çš„ error çš„æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unhandledrejection'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ªäº‹ä»¶å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [object Promise] - ç”Ÿæˆè¯¥å…¨å±€ error çš„ promise")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: Whoops! - æœªå¤„ç†çš„ error å¯¹è±¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Whoops!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ²¡æœ‰ç”¨æ¥å¤„ç† error çš„ catch")]),t._v("\n")])])]),a("h2",{attrs:{id:"é“¾å¼è°ƒç”¨"}},[t._v("é“¾å¼è°ƒç”¨")]),t._v(" "),a("p",[t._v("ä¾æ¬¡è¿ç»­æ‰§è¡Œå¤šä¸ªæ“ä½œæ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼Œå³åœ¨ä¸Šä¸€ä¸ªæ“ä½œæ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ‰å¼€å§‹ä¸‹ä¸€ä¸ªæ“ä½œï¼ˆå¹¶ä¸€èˆ¬å¸¦ç€ä¸Šä¸€æ­¥è¿”å›çš„ç»“æœï¼‰ã€‚ä½¿ç”¨ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„æ–¹æ³• "),a("code",[t._v("then")]),t._v(" å¯ä»¥å®ç°è¿™ç§åŠŸèƒ½ï¼Œä»è€Œé¿å…å½¢æˆ"),a("RouterLink",{attrs:{to:"/web/Frontend/JavaScript/è¯­æ³•åŸºç¡€/å›è°ƒ.html#åµŒå¥—å›è°ƒ"}},[t._v("ã€Œå›è°ƒåœ°ç‹±ã€ç»“æ„")]),t._v("ã€‚è¿™æ˜¯ç”±äºæ–¹æ³• "),a("code",[t._v(".then")]),t._v(" è¿”å›çš„æ˜¯ "),a("a",{attrs:{href:"https://zh.javascript.info/promise-chaining#shi-li-loadscript",target:"_blank",rel:"noopener noreferrer"}},[t._v("thenable å¯¹è±¡"),a("OutboundLink")],1),t._v("ï¼Œå³ä¸€ä¸ªå…·æœ‰æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" çš„ä»»æ„å¯¹è±¡ï¼ˆå¯ä»¥ä½œä¸º "),a("code",[t._v("promise")]),t._v(" æ¥å¯¹å¾…ï¼‰ï¼Œ"),a("strong",[t._v("å› æ­¤å¯ä»¥åœ¨æ–¹æ³•åå†æ·»åŠ æ–¹æ³• "),a("code",[t._v(".then")])]),t._v(" ï¼Œä¸æ–­æ·»åŠ æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" å¯ä»¥æ„æˆä¸€ä¸ªé•¿åºåˆ—çš„é“¾å¼è°ƒç”¨ã€‚")],1),t._v(" "),a("p",[t._v("ğŸ’¡ ç¡®åˆ‡åœ°è¯´å¤„ç†ç¨‹åº handler è¿”å›çš„ä¸å®Œå…¨æ˜¯ä¸€ä¸ª promiseï¼Œè€Œæ˜¯è¿”å›çš„è¢«ç§°ä¸º thenable å¯¹è±¡ï¼ˆä¸€ä¸ªå…·æœ‰æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" çš„ä»»æ„å¯¹è±¡ï¼‰ï¼Œå®ƒä¼šè¢«å½“åšä¸€ä¸ª promise æ¥å¯¹å¾…ï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯è®©ç¬¬ä¸‰æ–¹åº“å¯ä»¥å®ç°è‡ªå·±çš„ promise å…¼å®¹ï¼ˆpromise-compatibleï¼‰å¯¹è±¡ï¼Œä½†ä¾ç„¶å¯ä»¥ä¸åŸç”Ÿçš„ promise å…¼å®¹ï¼ˆå› ä¸ºå®ƒä»¬å®ç°äº† "),a("code",[t._v(".then")]),t._v(" æ–¹æ³•ï¼‰ï¼Œå³å…è®¸æˆ‘ä»¬å°†è‡ªå®šä¹‰çš„å¯¹è±¡ä¸ "),a("code",[t._v("promise")]),t._v(" é“¾é›†æˆåœ¨ä¸€èµ·ï¼Œè€Œä¸å¿…ç»§æ‰¿è‡ª "),a("code",[t._v("Promise")]),t._v("ç±»ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰ thenable ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// function() { native code }")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 ç§’åä½¿ç”¨ this.num*2 è¿›è¡Œ resolve")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (**)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (*)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1000ms åæ˜¾ç¤º 2")]),t._v("\n")])])]),a("p",[t._v("é“¾å¼è°ƒç”¨çš„ç†å¿µæ˜¯åˆ©ç”¨æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" ä¼šè¿”å›ç±»ä¼¼äº "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€æ­¥ä¸­å†æ¬¡è°ƒç”¨è¯¥è¿”å›å¯¹è±¡çš„æ–¹æ³• "),a("code",[t._v(".then")]),t._v("ï¼Œå¹¶å¯¹å¯¹è±¡çš„ç»“æœå±æ€§ "),a("code",[t._v("result")]),t._v(" åœ¨ä¼ é€’é“¾ä¸Šè¿›è¡Œä¾æ¬¡å¤„ç†ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (*)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (**)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (***)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä¸Šè¿°å®ä¾‹è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("åˆå§‹ "),a("code",[t._v("promise")]),t._v(" åœ¨ 1 ç§’åè¿›è¡Œ "),a("code",[t._v("resolve")])]),t._v(" "),a("li",[t._v("ç„¶å "),a("code",[t._v(".then")]),t._v(" å¤„ç†ç¨‹åº handler è¢«è°ƒç”¨")]),t._v(" "),a("li",[t._v("å®ƒè¿”å›çš„å€¼æ˜¯ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œå…¶ç»“æœï¼ˆä¸Šä¸€æ­¥çš„ "),a("code",[t._v("result")]),t._v("ï¼‰å°±å¯ä»¥è¢«ä¼ å…¥ä¸‹ä¸€ä¸ª "),a("code",[t._v(".then")]),t._v(" å¤„ç†ç¨‹åº handler")]),t._v(" "),a("li",[t._v("â€¦â€¦ä¾æ­¤ç±»æ¨")])]),t._v(" "),a("p",[t._v("éšç€ result åœ¨å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰é“¾ä¸­ä¼ é€’ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ç³»åˆ—çš„ "),a("code",[t._v("alert")]),t._v(" è°ƒç”¨ï¼š"),a("code",[t._v("1")]),t._v(" â†’ "),a("code",[t._v("2")]),t._v(" â†’ "),a("code",[t._v("4")])]),t._v(" "),a("p",[a("img",{attrs:{src:"_v_images/20200501212737000_24563.png",alt:"promise chain"}})]),t._v(" "),a("p",[t._v("ğŸ’¡ å¦‚æœæ–¹æ³• "),a("code",[t._v(".then(handler)")]),t._v(" çš„å¤„ç†ç¨‹åºä¸­åŒ…å«å¼‚æ­¥ä»£ç ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ "),a("code",[t._v("new Promise")]),t._v(" æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡å°†å…¶åŒ…è£¹ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–°å»ºçš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œè¿™æ ·è°ƒç”¨é“¾çš„ä¸‹ä¸€æ­¥çš„æ–¹æ³• "),a("code",[t._v(".then")]),t._v(" å°±ä¼šç­‰å¾…æ–°å»º "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€ç¡®å®šåå†æ‰§è¡Œï¼Œå³å¯å®ç°å¼‚æ­¥é“¾å¼è°ƒç”¨ã€‚")]),t._v(" "),a("p",[t._v("é“¾å¼è°ƒç”¨ä¸åŒæƒ…å†µçš„ç¤ºæ„å›¾\n"),a("img",{attrs:{src:"_v_images/20200501213514130_4159.png",alt:"asynchronous  promise chain"}})]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (*)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (**)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä¸Šè¿°å®ä¾‹è¾“å‡ºä¸å‰é¢çš„ç¤ºä¾‹ç›¸åŒï¼š"),a("code",[t._v("1")]),t._v(" â†’ "),a("code",[t._v("2")]),t._v(" â†’ "),a("code",[t._v("4")]),t._v("ï¼Œä½†æ˜¯ç°åœ¨åœ¨æ¯æ¬¡ "),a("code",[t._v("alert")]),t._v(" è°ƒç”¨ä¹‹é—´ä¼šæœ‰ 1 ç§’é’Ÿçš„å»¶è¿Ÿã€‚")]),t._v(" "),a("p",[t._v("ğŸ’¡ è¿”å› "),a("code",[t._v("promise")]),t._v("ï¼ˆä¸”å…¶ä¸­çš„ executor åŒ…å«å¼‚æ­¥ä»£ç ï¼‰ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ„å»ºå¼‚æ­¥è¡Œä¸ºé“¾ã€‚")]),t._v(" "),a("h2",{attrs:{id:"async-å‡½æ•°"}},[t._v("async å‡½æ•°")]),t._v(" "),a("p",[t._v("Async/await æ˜¯ä»¥æ›´èˆ’é€‚çš„æ–¹å¼ä½¿ç”¨ promise çš„ä¸€ç§ç‰¹æ®Šè¯­æ³•ï¼ŒåŒæ—¶å®ƒä¹Ÿéå¸¸æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("å½“å‡½æ•°ä»¥å…³é”®å­— "),a("code",[t._v("async")]),t._v(" å¼€å§‹å°±è¡¨ç¤ºè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œè€Œä¸”ä¼šå°†å‡½æ•°çš„è¿”å›å€¼ä½œä¸º "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„ç»“æœ "),a("code",[t._v("result")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªç»“æœä¸º 1 çš„ resolved promise")]),t._v("\n")])])]),a("p",[t._v("ä¸€èˆ¬åœ¨ "),a("code",[t._v("async")]),t._v(" å‡½æ•°ä¼šä½¿ç”¨å…³é”®å­— "),a("code",[t._v("await")]),t._v(" è·å–ç¡®å®šæš‚åœçš„å¯¹è±¡çš„ç»“æœã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªåœ¨ async å‡½æ•°å†…å·¥ä½œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å…³é”®å­— "),a("code",[t._v("await")]),t._v(" çš„ä½œç”¨å°±æ˜¯è®© JavaScript å¼•æ“ã€Œæš‚åœã€å¹¶ç­‰å¾…ç›´åˆ° "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ settleï¼Œç„¶åä»¥ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„ç»“æœç»§ç»­æ‰§è¡Œã€‚è¿™ä¸ªè¡Œä¸ºä¸ä¼šè€—è´¹ä»»ä½• CPU èµ„æºï¼Œå› ä¸ºå¼•æ“å¯ä»¥åŒæ—¶å¤„ç†å…¶ä»–ä»»åŠ¡ï¼šæ‰§è¡Œå…¶ä»–è„šæœ¬ï¼Œå¤„ç†äº‹ä»¶ç­‰ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// async å‡½æ•°")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾…ï¼Œç›´åˆ° promise resolve")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "done!"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("âš ï¸ å…³é”®å­— "),a("code",[t._v("await")]),t._v(" åªåœ¨ "),a("code",[t._v("async")]),t._v(" å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå¾—åˆ°ä¸€ä¸ªè¯­æ³•é”™è¯¯")]),t._v(" "),a("p",[t._v("å¦‚æœä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡æ­£å¸¸ resolveï¼Œ"),a("code",[t._v("await promise")]),t._v(" è¿”å›çš„å°±æ˜¯å…¶ç»“æœï¼›å¦‚æœ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡è¢« rejectï¼Œå®ƒå°† "),a("code",[t._v("throw")]),t._v(" è¿™ä¸ª "),a("code",[t._v("error")]),t._v("ï¼Œå¯ä»¥åœ¨å¤–éƒ¨æ·»åŠ  "),a("code",[t._v("try...catch")]),t._v(" ç»“æ„æ¥æ•è·ä¸Šé¢æåˆ°çš„é‚£ä¸ª "),a("code",[t._v("error")]),t._v("ï¼›æˆ–è€…åœ¨ "),a("code",[t._v("async")]),t._v(" å‡½æ•°åé¢æ·»åŠ æ–¹æ³• "),a("code",[t._v(".catch")]),t._v(" æ•è·å¼‚å¸¸ï¼›æˆ–è€…ä½¿ç”¨å…¨å±€äº‹ä»¶å¤„ç†ç¨‹åº "),a("code",[t._v("unhandledrejection")]),t._v(" æ¥æ•è·ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ try...catch ç»“æ„æ•è·å¼‚å¸¸")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://no-such-url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TypeError: failed to fetch")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰‹æ§ç«ç‘°æ–¹æ³• .catch æ•è·å¼‚å¸¸")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://no-such-url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// f() å˜æˆäº†ä¸€ä¸ª rejected çš„ promise")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TypeError: failed to fetch // (*)")]),t._v("\n\n")])])]),a("p",[t._v("å®é™…ä¸Š "),a("code",[t._v("await")]),t._v(" æ˜¯æ¥å—ä¸€ä¸ª thenable å¯¹è±¡ï¼ˆé‚£äº›å…·æœ‰å¯è°ƒç”¨çš„ "),a("code",[t._v("then")]),t._v(" æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œå°±åƒæ–¹æ³• "),a("code",[t._v(".then")]),t._v(" è¿”å›ä¸€ä¸ª thenable å¯¹è±¡ä¸€æ ·ï¼Œè¿™æ ·è§„å®šæ˜¯ä¸ºäº†å…¼å®¹é "),a("code",[t._v("promise")]),t._v(" çš„ç¬¬ä¸‰æ–¹å¯¹è±¡ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœ "),a("code",[t._v("await")]),t._v(" æ¥æ”¶äº†ä¸€ä¸ªé "),a("code",[t._v("promise")]),t._v("ä½†æ˜¯æä¾›äº† "),a("code",[t._v(".then")]),t._v(" æ–¹æ³•çš„å¯¹è±¡æ—¶ï¼Œå®ƒå°±ä¼šè°ƒç”¨è¿™ä¸ª "),a("code",[t._v(".then")]),t._v(" æ–¹æ³•å¹¶å°†å†…å»ºçš„å‡½æ•° "),a("code",[t._v("resolve")]),t._v(" å’Œ "),a("code",[t._v("reject")]),t._v(" ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ˆå°±åƒ "),a("code",[t._v("Promise")]),t._v(" å¯¹è±¡çš„ executor æ‰§è¡Œæ­¥éª¤ä¸€æ ·ï¼‰ï¼Œç„¶å "),a("code",[t._v("await")]),t._v(" ç­‰å¾…ï¼Œç›´åˆ°è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹ä¸€è¢«è°ƒç”¨ï¼Œå°±å¯ä»¥è·å–ç›¸åº”çš„ç»“æœç»§ç»­æ‰§è¡Œåç»­ä»»åŠ¡ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// thenable å¯¹è±¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…·æœ‰æ–¹æ³• then")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾… 1 ç§’ï¼Œä¹‹å result å˜ä¸º 2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥å— thenable å¯¹è±¡ï¼Œç±»ä¼¼äº promise å¯¹è±¡")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ ç›¸æ¯”äº "),a("code",[t._v("promise.then")]),t._v("ï¼Œå‡½æ•° "),a("code",[t._v("async")]),t._v(" ç»“åˆå…³é”®å­— "),a("code",[t._v("await")]),t._v(" æ˜¯è·å– promise çš„ç»“æœçš„ä¸€ä¸ªæ›´ä¼˜é›…çš„è¯­æ³•ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ "),a("code",[t._v("async/await")]),t._v(" æ—¶å‡ ä¹å°±ä¸ä¼šç”¨åˆ° "),a("code",[t._v(".then")]),t._v(" äº†ï¼Œå› ä¸º "),a("code",[t._v("await")]),t._v(" ä¸ºæˆ‘ä»¬å¤„ç†äº†ç­‰å¾…ï¼Œè€Œä¸”ä¸€èˆ¬ç»“åˆ "),a("code",[t._v("try..catch")]),t._v(" ç»“æ„ï¼ˆè€Œä¸æ˜¯ "),a("code",[t._v(".catch")]),t._v(" ï¼‰æ•æŠ“å¼‚å¸¸ã€‚âš ï¸ ä½†æ˜¯å½“æˆ‘ä»¬åœ¨ä»£ç çš„é¡¶å±‚ï¼ˆå³åœ¨ "),a("code",[t._v("async")]),t._v(" å‡½æ•°ä¹‹å¤–ï¼‰ï¼Œå°±ä¸èƒ½ä½¿ç”¨ "),a("code",[t._v("await")]),t._v(" äº†ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨ "),a("code",[t._v("async")]),t._v(" å‡½æ•°åæ·»åŠ  "),a("code",[t._v(".then/catch")]),t._v(" æ¥å¤„ç†æœ€ç»ˆçš„ç»“æœ "),a("code",[t._v("result")]),t._v(" æˆ–æŠ›å‡ºçš„ "),a("code",[t._v("error")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// then é“¾å¼è°ƒç”¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-such-user.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ await å…³é”®å­—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-such-user.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"promise-api"}},[t._v("promise API")]),t._v(" "),a("p",[a("code",[t._v("Promise")]),t._v(" ç±»æœ‰ 5 ç§é™æ€æ–¹æ³•ï¼Œç”¨äºã€Œæ‰¹é‡ã€å¤„ç† "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Promise.all(promises)")]),t._v(" ç­‰å¾…æ‰€æœ‰ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çŠ¶æ€éƒ½ä¸º "),a("code",[t._v("resolved")]),t._v(" æ—¶è¿”å›ä»¥å­˜æ”¾å®ƒä»¬ç»“æœçš„æ•°ç»„ä¸ºç»“æœçš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ã€‚å¦‚æœç»™å®šçš„ä»»æ„ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ä¸º "),a("code",[t._v("rejected")]),t._v("ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå˜æˆ "),a("code",[t._v("Promise.all")]),t._v(" çš„ "),a("code",[t._v("error")]),t._v("ï¼Œæ‰€æœ‰å…¶ä»– "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€ç»“æœéƒ½ä¼šè¢«å¿½ç•¥ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Promise.allSettled(promises)")]),t._v("ï¼ˆES2020 æ–°å¢æ–¹æ³•ï¼‰ç­‰å¾…æ‰€æœ‰ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡éƒ½ "),a("code",[t._v("settled")]),t._v(" æ—¶ï¼Œå¹¶ä»¥åŒ…å«"),a("strong",[t._v("ä»¥ä¸‹å†…å®¹çš„å¯¹è±¡")]),t._v("æ•°ç»„çš„å½¢å¼è¿”å›å®ƒä»¬çš„ç»“æœ")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("state")]),t._v(": "),a("code",[t._v('"fulfilled"')]),t._v(" æˆ– "),a("code",[t._v('"rejected"')])]),t._v(" "),a("li",[a("code",[t._v("value")]),t._v("ï¼ˆå¦‚æœ fulfilledï¼‰æˆ– "),a("code",[t._v("reason")]),t._v("ï¼ˆå¦‚æœ rejectedï¼‰")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Promise.race(promises)")]),t._v(" ç­‰å¾…"),a("strong",[t._v("ç¬¬ä¸€ä¸ª "),a("code",[t._v("settled")]),t._v(" çš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡")]),t._v("ï¼Œå¹¶å°†å…¶ "),a("code",[t._v("result/error")]),t._v(" ä½œä¸ºç»“æœ")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Promise.resolve(value)")]),t._v(" ä½¿ç”¨ç»™å®š "),a("code",[t._v("value")]),t._v(" ä½œä¸ºç»“æœ "),a("code",[t._v("result")]),t._v("ï¼Œåˆ›å»ºä¸€ä¸ª "),a("code",[t._v("resolved")]),t._v(" çš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Promise.reject(error)")]),t._v(" ä½¿ç”¨ç»™å®š "),a("code",[t._v("error")]),t._v(" ä½œä¸ºåŸå›  "),a("code",[t._v("reason")]),t._v("ï¼Œåˆ›å»ºä¸€ä¸ª "),a("code",[t._v("rejected")]),t._v(" çš„ "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡")])])]),t._v(" "),a("p",[t._v("ğŸ’¡ è¿™äº”ä¸ªæ–¹æ³•ä¸­ "),a("code",[t._v("Promise.all")]),t._v(" å¯èƒ½æ˜¯åœ¨å®æˆ˜ä¸­ä½¿ç”¨æœ€å¤šçš„")]),t._v(" "),a("h2",{attrs:{id:"promisification"}},[t._v("Promisification")]),t._v(" "),a("p",[t._v("Promisification è¿™ä¸ªé•¿å•è¯è¡¨ç¤ºä¸€ç§ç‰¹å®šçš„å‡½æ•°ç»“æ„è½¬æ¢è¡Œä¸ºï¼Œè¡¨ç¤ºå°†å›è°ƒç»“æ„è½¬æ¢ä¸º promise ç»“æ„ï¼Œå³æŒ‡ promise åŒ–ã€‚")]),t._v(" "),a("p",[t._v("å› ä¸ºä½¿ç”¨ promise æ›´åŠ æ–¹ä¾¿ï¼Œè®¸å¤šå‡½æ•°å’Œåº“éƒ½æ˜¯åŸºäºå›è°ƒçš„ï¼Œå› æ­¤åœ¨å®é™…å¼€å‘ä¸­ç»å¸¸ä¼šéœ€è¦è¿›è¡Œè¿™ç§è½¬æ¢ï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸ªé€šç”¨çš„è½¬æ¢å‡½æ•° "),a("code",[t._v("promisify(f)")]),t._v(" ååŠ©æˆ‘ä»¬è¿›è¡Œè½¬æ¢ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªéœ€è¦è¢« promisify çš„å‡½æ•° "),a("code",[t._v("f")]),t._v("ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…è£… wrapper å‡½æ•°ï¼ˆä»¥ä¾¿æˆ‘ä»¬æŒ‰ç…§åŸæ¥çš„æ–¹å¼è°ƒç”¨è½¬æ¢åçš„å‡½æ•°ï¼‰ã€‚è€Œè¯¥åŒ…è£…å‡½æ•°çš„åŠŸèƒ½å°±æ˜¯æœ€åè¿”å›ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ï¼Œå¹¶å°†è°ƒç”¨ï¼ˆå‚æ•°ï¼‰ä¼ é€’ç»™åŸå§‹çš„å‡½æ•° "),a("code",[t._v("f")]),t._v("ï¼Œå¹¶åœ¨è‡ªå®šä¹‰çš„å›è°ƒä¸­è·Ÿè¸ªç»“æœ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promisify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼ˆwrapper-functionï¼‰")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬å¯¹ f çš„è‡ªå®šä¹‰çš„å›è°ƒ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æˆ‘ä»¬çš„è‡ªå®šä¹‰çš„å›è°ƒé™„åŠ åˆ° f å‚æ•°ï¼ˆargumentsï¼‰çš„æœ«å°¾")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨åŸå§‹çš„å‡½æ•°")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æ³•ï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" loadScriptPromise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promisify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loadScript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadScriptPromise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸæ¥çš„å›è°ƒå‡½æ•°å˜æˆæ–¹æ³• then çš„å¤„ç†ç¨‹åº")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ ä¸Šè¿°çš„ä»£ç å‡è®¾"),a("strong",[t._v("åŸå§‹çš„å‡½æ•°æœŸæœ›ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•° "),a("code",[t._v("(err, result)")]),t._v(" çš„å›è°ƒ")]),t._v("ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æœ€å¸¸é‡åˆ°çš„å½¢å¼ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„è‡ªå®šä¹‰å›è°ƒçš„æ ¼å¼å®Œå…¨æ­£ç¡®ï¼Œå¹¶ä¸” "),a("code",[t._v("promisify")]),t._v(" åœ¨è¿™ç§æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœåŸå§‹çš„ "),a("code",[t._v("f")]),t._v(" æœŸæœ›ä¸€ä¸ªå¸¦æœ‰æ›´å¤šå‚æ•°çš„å›è°ƒå‡½æ•°ï¼Œå¦‚ "),a("code",[t._v("callback(err, res1, res2, ...)")]),t._v(" åˆ™å¯ä»¥ä½¿ç”¨ã€Œæ›´é«˜çº§ã€çš„ç‰ˆæœ¬")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// promisify(f, true) æ¥è·å–ç»“æœæ•°ç»„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promisify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" manyArgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("results")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬è‡ªå®šä¹‰çš„ f çš„å›è°ƒï¼Œä»¥å‰©ä½™å‚æ•°æ¥æ¥å—ä¸å®šæ•°é‡çš„è¾“å…¥")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœ manyArgs è¢«æŒ‡å®šï¼Œåˆ™ä½¿ç”¨æ‰€æœ‰å›è°ƒçš„ç»“æœ resolve")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("manyArgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" results "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æ³•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ promisify(f, true) è¡¨ç¤º promise çš„ç»“æœå°†æ˜¯ç”¨æˆ·è¾“å…¥å¤šä¸ªå‚æ•°ç»„æˆçš„æ•°ç»„ [res1, res2, ...]")]),t._v("\nf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promisify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arrayOfResults")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç”¨æˆ·æ‰€æœ‰è¾“å…¥è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ å¯¹äºä¸€äº›æ›´å¥‡ç‰¹çš„å›è°ƒæ ¼å¼ï¼Œå¦‚æ ¹æœ¬æ²¡æœ‰ "),a("code",[t._v("err")]),t._v(" çš„æ ¼å¼ "),a("code",[t._v("callback(result)")]),t._v(" å¯ä»¥æ‰‹åŠ¨ promisify è¿™æ ·çš„å‡½æ•°ã€‚ä¹Ÿæœ‰ä¸€äº›å…·æœ‰æ›´çµæ´»ä¸€ç‚¹çš„ promisification å‡½æ•°çš„æ¨¡å—ï¼Œä¾‹å¦‚ "),a("a",{attrs:{href:"https://github.com/digitaldesignlabs/es6-promisify",target:"_blank",rel:"noopener noreferrer"}},[t._v("es6-promisify"),a("OutboundLink")],1),t._v("ã€‚åœ¨ Node.js ä¸­ï¼Œæœ‰ä¸€ä¸ªå†…å»ºçš„ promisify å‡½æ•° "),a("code",[t._v("util.promisify")]),t._v("ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å¾®ä»»åŠ¡"}},[t._v("å¾®ä»»åŠ¡")]),t._v(" "),a("p",[t._v("Promise çš„å¤„ç†ç¨‹åºï¼ˆhandlersï¼‰"),a("code",[t._v(".then")]),t._v("ã€"),a("code",[t._v(".catch")]),t._v(" å’Œ "),a("code",[t._v(".finally")]),t._v(" éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå³ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡ç«‹å³è¢« resolveï¼Œä½†å®ƒçš„æ–¹æ³• "),a("code",[t._v(".then")]),t._v("ã€"),a("code",[t._v(".catch")]),t._v(" å’Œ "),a("code",[t._v(".finally")]),t._v(" ä¹Ÿä¼šç­‰å¾…å…¶ä¸‹é¢ï¼ˆé“¾å¼è°ƒç”¨ä»¥å¤–ï¼‰ çš„ä»£ç æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œè¿™äº›å¤„ç†ç¨‹åº handlerã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"promise done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code finished"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ä¸ª alert å…ˆæ˜¾ç¤º")]),t._v("\n")])])]),a("p",[t._v("è¿™æ˜¯ç”±äº ECMA æ ‡å‡†è§„å®šäº†ä¸€ä¸ªå†…éƒ¨é˜Ÿåˆ— "),a("code",[t._v("PromiseJobs")]),t._v("ï¼Œé€šå¸¸è¢«ç§°ä¸ºå¾®ä»»åŠ¡é˜Ÿåˆ— microtask queueï¼ˆES8 æœ¯è¯­ï¼‰æ¥ç®¡ç†å¼‚æ­¥ä»»åŠ¡ã€‚å½“ä¸€ä¸ª "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡å‡†å¤‡å°±ç»ªæ—¶ï¼Œå®ƒçš„æ–¹æ³• "),a("code",[t._v(".then/catch/finally")]),t._v(" ä¸­çš„å¤„ç†ç¨‹åº handler å°±ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä¼šç«‹å³è¢«æ‰§è¡Œã€‚æ ¹æ®"),a("a",{attrs:{href:"https://tc39.github.io/ecma262/#sec-jobs-and-job-queues",target:"_blank",rel:"noopener noreferrer"}},[t._v("è§„èŒƒ"),a("OutboundLink")],1),t._v("ä¸­æ‰€è¿°ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åªæœ‰åœ¨ JavaScript å¼•æ“ä¸­æ²¡æœ‰å…¶å®ƒä»»åŠ¡åœ¨è¿è¡Œæ—¶ï¼Œæ‰å¼€å§‹æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚")]),t._v(" "),a("li",[t._v("é˜Ÿåˆ— queue æ˜¯å…ˆè¿›å…ˆå‡ºçš„ï¼Œå³åœ¨ promise é“¾ä¸­é¦–å…ˆè¿›å…¥é˜Ÿåˆ—çš„å¤„ç†ç¨‹åºä»»åŠ¡ä¼šé¦–å…ˆè¿è¡Œã€‚")])]),t._v(" "),a("p",[a("img",{attrs:{src:"_v_images/20200502102151557_23180.png",alt:"microtask queue"}})]),t._v(" "),a("p",[t._v("å¦‚æœæ‰§è¡Œé¡ºåºå¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼Œå¯ä»¥å°†ä»£ç æ·»åŠ åˆ°é“¾å¼è°ƒç”¨çš„ "),a("code",[t._v(".then")]),t._v(" ä¸­ï¼Œç¡®ä¿ç¨‹åºä¾æ¬¡æ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"promise done!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code finished"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ğŸ’¡ å¯¹äº promise é“¾æœªå¤„ç†çš„ rjection å¯ä»¥ä½¿ç”¨ "),a("code",[t._v("unhandledrejection")]),t._v(" äº‹ä»¶æ¥æ•è·ï¼Œä½†å®ƒæ˜¯åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½å®Œæˆæ—¶æ‰ä¼šç”Ÿæˆçš„ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);