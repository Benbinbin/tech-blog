---
tags:
  - nodejs
  - npm
---

# npm
Node.js æä¾›äº†æ ¸å¿ƒæ¨¡å—ï¼Œè€Œå…¶ä»–å¼€å‘è€…å¯ä»¥å°†å…¶å¼€å‘çš„æ‹“å±•æ¨¡å—å‘å¸ƒå‡ºæ¥ï¼Œå…¶ä»–å¼€å‘è€…å°±å¯ä»¥ä½¿ç”¨[npmï¼Œnode package manager](https://www.npmjs.com/) è¿™ä¸ªè½¯ä»¶æ¥å®‰è£…ç®¡ç†è¿™äº›æ‹“å±•åŒ…ã€‚

:bulb: ä¸€èˆ¬å®‰è£… node å°±ä¼šåŒæ—¶å®‰è£… npm è½¯ä»¶ã€‚

## package.json
å¯¹äºä¸€ä¸ª Node.js é¡¹ç›®ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ª `package.json` æ–‡æ¡£æ¥æè¿°æ¨¡å—/é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ `npm init` åˆå§‹åŒ–é¡¹ç›®å¹¶åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚

![package.json](./_v_images/20200814163815213_6824.png)

## å®‰è£…æ¨¡å—
åœ¨ [npm å®˜ç½‘](https://www.npmjs.com/)ä¸Šæœç´¢éœ€è¦å®‰è£…çš„æ¨¡å—ï¼Œå¹¶å°†å…¶æ–‡æ¡£æ‰€æä¾›çš„å®‰è£…æŒ‡ä»¤è¾“å…¥åˆ°ç»ˆç«¯ä¸­ï¼ˆç»ˆç«¯è·¯å¾„å·²åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼‰ï¼Œ:bulb: éœ€è¦å†™ä¸Š `--save` æŒ‡ä»¤å°†æ¨¡å—å†™å…¥åˆ° `package.json` ä¸­ä»¥æŒ‡æ˜é¡¹ç›®ä¾èµ– `dependecies` çš„åŒ…ã€‚

![express æ¨¡å—](./_v_images/20200814164853902_20647.png)

```bash
# å®‰è£… express æ¨¡å—
npm i express --save
```

:bulb: å®‰è£…æŒ‡ä»¤ä¸­ä¸€èˆ¬éœ€è¦æ·»åŠ é¢å¤–çš„æŒ‡ä»¤ï¼š
* `--save` å‘½ä»¤ï¼šå°†æ¨¡å—å†™å…¥åˆ° `package.json` æ–‡æ¡£çš„ä¾èµ–åŒ… `dependencies` è®°å½•ä¸­ï¼Œè¡¨ç¤ºé¡¹ç›®ä¸Šçº¿éœ€è¦çš„æ¨¡å—ã€‚
* `--save-dev` å‘½ä»¤ï¼šå°†æ¨¡å—å†™å…¥åˆ° `package.json` æ–‡æ¡£çš„ä¾èµ–åŒ… `devDependencies` è®°å½•ä¸­ï¼Œè¡¨ç¤ºæµ‹è¯•ã€é™¤é”™ç­‰å¼€å‘ç¯å¢ƒæ‰éœ€è¦çš„æ¨¡å—
* `-g` å‘½ä»¤ï¼šå°†æ¨¡å—å®‰è£…åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼ˆå¯¹äº Windows ç”¨æˆ·ä¸€èˆ¬å®‰è£…åœ¨ `C:\Users[ç”¨æˆ·å]\AppData\Roming\npm\node_modules` ç›®å½•ä¸­ï¼›å¯¹äº Mac ç”¨æˆ·ä¸€èˆ¬å®‰è£…åœ¨ `/usr/local/lib/node_modules` ç›®å½•ä¸­ï¼‰ï¼Œä»»ä½•é¡¹ç›®éƒ½å¯ä»¥è°ƒç”¨è¯¥æ¨¡å—ï¼Œ**ä½†å¹¶ä¸ä¼šå†™å…¥åˆ° `package.json` æ–‡æ¡£çš„ä¾èµ–ä¸­**ï¼ˆå¹¶ä¸æ¨èè¿™ç§æ–¹å¼å®‰è£…æ¨¡å—ï¼‰ã€‚

å®‰è£…ä»¥åå°±å¯ä»¥åœ¨ JavaScript æ–‡æ¡£ä¸­å¯¼å…¥æ¨¡å—ä½¿ç”¨ç›¸å…³åŠŸèƒ½ã€‚

```js
// ğŸ“ app.js
// åªéœ€è¦ç›´æ¥å†™æ¨¡å—çš„åç§°å³å¯ï¼Œnode å°±ä¼šåœ¨è§£ææ–‡æ¡£æ—¶åˆ° node_modules ç›®å½•ä¸‹å¯»æ‰¾ç›¸å…³æ¨¡å—
var express = require('express');
```

:bulb: å¦‚æœæ¥æ‰‹ä¸€ä¸ªé¡¹ç›®æ—¶å·²ç»æœ‰ `package.json` æ–‡æ¡£ï¼ˆä½†æ²¡æœ‰ `node_modules` ç›®å½•ï¼‰ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ `npm install` å‘½ä»¤ï¼Œnpm å°±ä¼šæ ¹æ®æ–‡æ¡£ä¸­ `dependencies` è®°å½•çš„ä¾èµ–åŒ…å®‰è£…ç›¸åº”ç‰ˆæœ¬çš„æ¨¡å—ã€‚

:bulb: å¦‚æœå®‰è£…æ¨¡å—è¾ƒæ…¢å¯ä»¥ä½¿ç”¨[æ·˜å®é•œåƒ](https://developer.aliyun.com/mirror/NPM?from=tnpm)ï¼Œå¦‚å®‰è£… lodash å¯ä»¥æ·»åŠ æ·˜å®æº `npm install lodash --save --registry=https://registry.npm.taobao.org`
## æ¨èæ¨¡å—
* [nodemon](https://www.npmjs.com/package/nodemon) ç›‘æ§æ¨¡å—æ–‡ä»¶çš„å˜åŒ–ï¼Œè‡ªåŠ¨å¯åŠ¨é¡¹ç›®
* [cross-env](https://www.npmjs.com/package/cross-env) è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆåˆ‡æ¢å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œå…¼å®¹ Linuxã€Macã€Windowsã€‚å¯ä»¥åœ¨è®¾ç½® npm script æ—¶ä½¿ç”¨ `cross-env NODE_ENV=production` æŒ‡å®šè¿è¡Œç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒã€‚