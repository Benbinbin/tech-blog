(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{1267:function(v,_,t){"use strict";t.r(_);var d=t(18),o=Object(d.a)({},(function(){var v=this,_=v.$createElement,d=v._self._c||_;return d("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[d("h1",{attrs:{id:"mongodb-核心概念"}},[v._v("MongoDb 核心概念")]),v._v(" "),d("p",[v._v("在 MongoDb 中基本的概念是"),d("strong",[v._v("数据库 database")]),v._v("、"),d("strong",[v._v("集合 collection")]),v._v("、"),d("strong",[v._v("文档 document")]),v._v("，部分概念与 SQL 概念相对应：")]),v._v(" "),d("table",[d("thead",[d("tr",[d("th",[v._v("SQL 术语/概念")]),v._v(" "),d("th",[v._v("MongoDB 术语/概念")]),v._v(" "),d("th",[v._v("解释/说明")])])]),v._v(" "),d("tbody",[d("tr",[d("td",[v._v("database")]),v._v(" "),d("td",[v._v("database")]),v._v(" "),d("td",[v._v("数据库")])]),v._v(" "),d("tr",[d("td",[v._v("table")]),v._v(" "),d("td",[v._v("collection")]),v._v(" "),d("td",[v._v("数据库表/集合")])]),v._v(" "),d("tr",[d("td",[v._v("row")]),v._v(" "),d("td",[v._v("document")]),v._v(" "),d("td",[v._v("数据记录行/文档")])]),v._v(" "),d("tr",[d("td",[v._v("column")]),v._v(" "),d("td",[v._v("field")]),v._v(" "),d("td",[v._v("数据字段/域")])]),v._v(" "),d("tr",[d("td",[v._v("index")]),v._v(" "),d("td",[v._v("index")]),v._v(" "),d("td",[v._v("索引")])]),v._v(" "),d("tr",[d("td",[v._v("table joins")]),v._v(" "),d("td"),v._v(" "),d("td",[v._v("表连接，MongoDB 不支持")])]),v._v(" "),d("tr",[d("td",[v._v("primary key")]),v._v(" "),d("td",[v._v("primary key")]),v._v(" "),d("td",[v._v("主键，MongoDB 自动将 "),d("code",[v._v("_id")]),v._v(" 字段设置为主键")])])])]),v._v(" "),d("p",[d("img",{attrs:{src:t(762),alt:"SQL vs MongoDB"}})]),v._v(" "),d("h2",{attrs:{id:"数据库"}},[v._v("数据库")]),v._v(" "),d("p",[v._v("一个 MongoDB 实例中可以容纳多个数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。默认数据库为 "),d("code",[v._v("db")]),v._v("，存储在 "),d("code",[v._v("data")]),v._v(" 目录中。")]),v._v(" "),d("p",[v._v("数据库也通过名字来标识，数据库名可以是满足以下条件的任意 UTF-8 字符串：")]),v._v(" "),d("ul",[d("li",[v._v("不能是空字符串 "),d("code",[v._v('""')])]),v._v(" "),d("li",[v._v("不得含有 "),d("code",[v._v("' '")]),v._v("（空格）、"),d("code",[v._v(".")]),v._v("、"),d("code",[v._v("$")]),v._v("、"),d("code",[v._v("/")]),v._v("、"),d("code",[v._v("\\")]),v._v(" 和 "),d("code",[v._v("\\0")]),v._v("（空宇符）")]),v._v(" "),d("li",[v._v("=="),d("strong",[v._v("应全部小写")]),v._v("==")]),v._v(" "),d("li",[v._v("最多 64 字节")])]),v._v(" "),d("p",[v._v("有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库：")]),v._v(" "),d("ul",[d("li",[d("code",[v._v("admin")]),v._v('： 从权限的角度来看，这是 "root" 数据库，要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，如列出所有的数据库或关闭服务器')]),v._v(" "),d("li",[d("code",[v._v("local")]),v._v("：这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合")]),v._v(" "),d("li",[d("code",[v._v("config")]),v._v("：当 MongoDB 用于分片设置时，"),d("code",[v._v("config")]),v._v(" 数据库在内部使用，用于保存分片的相关信息")])]),v._v(" "),d("h2",{attrs:{id:"集合"}},[v._v("集合")]),v._v(" "),d("p",[v._v("集合存在于数据库中，是 MongoDB 文档的集合，"),d("strong",[v._v("类似于 SQL 中的表格")]),v._v("。集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。")]),v._v(" "),d("p",[v._v("集合命名规范：")]),v._v(" "),d("ul",[d("li",[v._v("集合名不能是空字符串 "),d("code",[v._v('""')])]),v._v(" "),d("li",[v._v("集合名不能含有 "),d("code",[v._v("\\0")]),v._v(" 字符（空字符），这个字符表示集合名的结尾")]),v._v(" "),d("li",[v._v("集合名不能以 "),d("code",[v._v("system.")]),v._v(" 开头，这是为系统集合保留的前缀")]),v._v(" "),d("li",[v._v("用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符，除非你要访问这种系统创建的集合，否则千万"),d("strong",[v._v("不要")]),v._v("在名字里出现 "),d("code",[v._v("$")])])]),v._v(" "),d("h2",{attrs:{id:"文档"}},[v._v("文档")]),v._v(" "),d("p",[d("strong",[v._v("文档是一个键值 key-value 对（即BSON）")]),v._v("，MongoDB 的集合不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。")]),v._v(" "),d("p",[v._v("虽然文档存储的数据很自由，但还有一些限制：")]),v._v(" "),d("ul",[d("li",[v._v("文档中的键/值对是有序的")]),v._v(" "),d("li",[v._v("MongoDB 的文档"),d("strong",[v._v("不能有重复的键")])]),v._v(" "),d("li",[v._v("MongoDB "),d("strong",[v._v("区分类型和大小写")])])]),v._v(" "),d("p",[v._v("MongoDB 中常用的几种数据类型：")]),v._v(" "),d("table",[d("thead",[d("tr",[d("th",[v._v("数据类型")]),v._v(" "),d("th",[v._v("描述")])])]),v._v(" "),d("tbody",[d("tr",[d("td",[v._v("String")]),v._v(" "),d("td",[v._v("字符串。在 MongoDB 中 UTF-8 编码的字符串才是合法的。")])]),v._v(" "),d("tr",[d("td",[v._v("Integer")]),v._v(" "),d("td",[v._v("整型数值。用于存储数值，根据你服务器可分为 32 位或 64 位。")])]),v._v(" "),d("tr",[d("td",[v._v("Boolean")]),v._v(" "),d("td",[v._v("布尔值。")])]),v._v(" "),d("tr",[d("td",[v._v("Double")]),v._v(" "),d("td",[v._v("双精度浮点值。用于存储浮点值。")])]),v._v(" "),d("tr",[d("td",[v._v("Min/Max keys")]),v._v(" "),d("td",[v._v("将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。")])]),v._v(" "),d("tr",[d("td",[v._v("Arrays")]),v._v(" "),d("td",[v._v("用于将数组或列表或多个值存储为一个键。")])]),v._v(" "),d("tr",[d("td",[v._v("Timestamp")]),v._v(" "),d("td",[v._v("时间戳。记录文档修改或添加的具体时间。")])]),v._v(" "),d("tr",[d("td",[v._v("Object")]),v._v(" "),d("td",[v._v("用于内嵌文档。")])]),v._v(" "),d("tr",[d("td",[v._v("Null")]),v._v(" "),d("td",[v._v("用于创建空值。")])]),v._v(" "),d("tr",[d("td",[v._v("Symbol")]),v._v(" "),d("td",[v._v("符号。该数据类型基本上等同于字符串类型，但不同的是它一般用于采用特殊符号类型的语言。")])]),v._v(" "),d("tr",[d("td",[v._v("Date")]),v._v(" "),d("td",[v._v("日期时间。用 UNIX 时间格式来存储当前日期或时间，也可以传入年月日信息创建 Date 对象指定自己的日期时间。")])]),v._v(" "),d("tr",[d("td",[v._v("Object ID")]),v._v(" "),d("td",[v._v("对象 ID。用于创建文档的 ID。")])]),v._v(" "),d("tr",[d("td",[v._v("Binary Data")]),v._v(" "),d("td",[v._v("二进制数据。")])]),v._v(" "),d("tr",[d("td",[v._v("Code")]),v._v(" "),d("td",[v._v("代码类型。用于在文档中存储 JavaScript 代码。")])]),v._v(" "),d("tr",[d("td",[v._v("Regular expression")]),v._v(" "),d("td",[v._v("正则表达式类型。")])])])]),v._v(" "),d("p",[v._v("💡 文档中的值不仅可以是字符串，还可以是其他几种数据类型，"),d("strong",[v._v("甚至可以是整个嵌入的文档")]),v._v("；而文档的键则必须是字符串，除了少数例外情况，键可以使用任意 UTF-8 字符。")]),v._v(" "),d("p",[v._v("文档键 key 命名规范：")]),v._v(" "),d("ul",[d("li",[v._v("键不能含有 "),d("code",[v._v("\\0")]),v._v("（空字符），这个字符用来表示键的结尾。")]),v._v(" "),d("li",[d("code",[v._v(".")]),v._v(" 和 "),d("code",[v._v("$")]),v._v(" 有特别的意义，只有在特定环境下才能使用。")]),v._v(" "),d("li",[v._v("以下划线 "),d("code",[v._v("_")]),v._v(" 开头的键是保留的（不是严格要求的）。")])]),v._v(" "),d("h2",{attrs:{id:"元数据"}},[v._v("元数据")]),v._v(" "),d("p",[v._v("数据库的元信息存储在"),d("strong",[v._v("系统集合")]),v._v("中，使用了系统的命名空间 "),d("code",[v._v("dbname.system.*")]),v._v("，该集合包含多种系统信息")]),v._v(" "),d("table",[d("thead",[d("tr",[d("th",[v._v("集合命名空间")]),v._v(" "),d("th",[v._v("描述")])])]),v._v(" "),d("tbody",[d("tr",[d("td",[d("code",[v._v("dbname.system.namespaces")])]),v._v(" "),d("td",[v._v("列出所有名字空间。")])]),v._v(" "),d("tr",[d("td",[d("code",[v._v("dbname.system.indexes")])]),v._v(" "),d("td",[v._v("列出所有索引。")])]),v._v(" "),d("tr",[d("td",[d("code",[v._v("dbname.system.profile")])]),v._v(" "),d("td",[v._v("包含数据库概要 profile 信息。")])]),v._v(" "),d("tr",[d("td",[d("code",[v._v("dbname.system.users")])]),v._v(" "),d("td",[v._v("列出所有可访问数据库的用户。")])]),v._v(" "),d("tr",[d("td",[d("code",[v._v("dbname.local.sources")])]),v._v(" "),d("td",[v._v("包含复制对端 slave 的服务器信息和状态。")])])])]),v._v(" "),d("p",[v._v("💡 对于修改系统集合中的对象有如下限制：")]),v._v(" "),d("ul",[d("li",[v._v("在 "),d("code",[v._v("system.indexes")]),v._v(" 插入数据，可以创建索引，但除此之外该表信息是不可变的（特殊的 "),d("code",[v._v("drop index")]),v._v(" 命令将自动更新相关信息）。")]),v._v(" "),d("li",[d("code",[v._v("system.users")]),v._v(" 是可修改的。")]),v._v(" "),d("li",[d("code",[v._v("system.profile")]),v._v("是可删除的。")])])])}),[],!1,null,null,null);_.default=o.exports},762:function(v,_,t){v.exports=t.p+"assets/img/20201021164859061_29247.638d1a43.png"}}]);