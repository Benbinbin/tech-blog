(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{1379:function(t,a,s){"use strict";s.r(a);var e=s(18),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"dom-å˜åŠ¨è§‚å¯Ÿå™¨"}},[t._v("DOM å˜åŠ¨è§‚å¯Ÿå™¨")]),t._v(" "),s("p",[t._v("DOM å˜åŠ¨è§‚å¯Ÿå™¨ç”¨äºè§‚å¯Ÿé¡µé¢çš„ DOM å˜åŒ–æƒ…å†µï¼Œå¦‚ç‰¹æ€§ï¼Œæ·»åŠ /åˆ é™¤çš„å…ƒç´ ï¼Œæ–‡æœ¬å†…å®¹ï¼Œå¹¶åœ¨å…¶å‘ç”Ÿæ›´æ”¹æ—¶è§¦å‘å›è°ƒã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è·Ÿè¸ªä»£ç å…¶ä»–éƒ¨åˆ†å¼•å…¥çš„æ›´æ”¹ï¼Œä»¥åŠä¸ç¬¬ä¸‰æ–¹è„šæœ¬é›†æˆã€‚")]),t._v(" "),s("p",[t._v("è§‚å¯Ÿå™¨ä½¿ç”¨å†…å»ºå¯¹è±¡ï¼ˆæ„é€ å‡½æ•°ï¼‰ "),s("code",[t._v("MutationObserver")]),t._v(" åˆ›å»ºï¼Œå¹¶é€šè¿‡æ–¹æ³• "),s("code",[t._v("observe")]),t._v(" è®¾ç½®éœ€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å›è°ƒå‡½æ•°çš„è§‚å¯Ÿå™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MutationObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®éœ€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹")]),t._v("\n\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("å‚æ•°è¯´æ˜")]),t._v(" "),s("p",[s("code",[t._v("config")]),t._v(" æ˜¯ä¸€ä¸ªå…·æœ‰å¤šç§å±æ€§çš„å¯¹è±¡ï¼Œè¿™äº›å±æ€§çš„å€¼éƒ½æ˜¯å¸ƒå°”å€¼ï¼Œç”¨äºé™å®šè¦è§‚å¯Ÿçš„å†…å®¹ï¼Œé¿å…ä¸å¿…è¦çš„å›è°ƒè°ƒç”¨ä»¥èŠ‚çœèµ„æºã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å±æ€§ "),s("code",[t._v("childList")]),t._v(" è®¾ç½®æ˜¯å¦è§‚å¯Ÿ "),s("code",[t._v("node")]),t._v(" çš„ç›´æ¥å­èŠ‚ç‚¹çš„æ›´æ”¹")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("subtree")]),t._v(" è®¾ç½®æ˜¯å¦è§‚å¯Ÿ  "),s("code",[t._v("node")]),t._v(" çš„æ‰€æœ‰åä»£çš„æ›´æ”¹")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("attributes")]),t._v(" è®¾ç½®æ˜¯å¦è§‚å¯Ÿ  "),s("code",[t._v("node")]),t._v(" çš„ç‰¹æ€§ï¼ˆattributeï¼‰")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("attributeFilter")]),t._v(" ç‰¹æ€§åç§°æ•°ç»„ï¼Œè®¾ç½®åªè§‚å¯Ÿè¿™äº›é€‰å®šçš„ç‰¹æ€§çš„æ›´æ”¹")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("characterData")]),t._v(" è®¾ç½®æ˜¯å¦è§‚å¯Ÿ "),s("code",[t._v("node.data")]),t._v("ï¼ˆæ–‡æœ¬å†…å®¹ï¼‰çš„æ›´æ”¹")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("attributeOldValue")]),t._v(" è®¾ç½®æ˜¯å¦å°†ç‰¹æ€§çš„æ—§å€¼å’Œæ–°å€¼éƒ½"),s("strong",[t._v("ä¼ é€’ç»™å›è°ƒå‡½æ•°")]),t._v("ï¼Œå¦‚æœä¸º "),s("code",[t._v("false")]),t._v(" åªä¼ æ–°å€¼ï¼ˆéœ€è¦åŒæ—¶è®¾ç½®é€‰é¡¹ "),s("code",[t._v("attributes=true")]),t._v("ï¼‰")]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("characterDataOldValue")]),t._v(" è®¾ç½®æ˜¯å¦å°† "),s("code",[t._v("node.data")]),t._v(" çš„æ—§å€¼å’Œæ–°å€¼éƒ½"),s("strong",[t._v("ä¼ é€’ç»™å›è°ƒå‡½æ•°")]),t._v("ï¼Œå¦‚æœä¸º "),s("code",[t._v("false")]),t._v(" åªä¼ æ–°å€¼ï¼ˆéœ€è¦åŒæ—¶è®¾ç½®é€‰é¡¹ "),s("code",[t._v("characterData=true")]),t._v("ï¼‰")])]),t._v(" "),s("p",[t._v("ğŸ’¡ å½“è®¾ç½®äº†ç›¸åº”çš„å±æ€§åï¼ŒDOM å‘ç”Ÿä»»ä½•æ›´æ”¹éƒ½ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°ï¼Œè¿™äº›æ”¹åŠ¨ç»„æˆä¸€ç³»åˆ—è¢«ç§°ä¸º "),s("a",{attrs:{href:"https://dom.spec.whatwg.org/#mutationrecord",target:"_blank",rel:"noopener noreferrer"}},[t._v("MutationRecord"),s("OutboundLink")],1),t._v(" çš„å¯¹è±¡ï¼Œå…·æœ‰å¤šç§å±æ€§")]),t._v(" "),s("ul",[s("li",[t._v("å±æ€§ "),s("code",[t._v("type")]),t._v(" å˜åŠ¨ç±»å‹ï¼Œä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š\n"),s("ul",[s("li",[s("code",[t._v('"attributes"')]),t._v(" ç‰¹æ€§è¢«ä¿®æ”¹äº†")]),t._v(" "),s("li",[s("code",[t._v('"characterData"')]),t._v(" æ•°æ®è¢«ä¿®æ”¹äº†ï¼Œç”¨äºæ–‡æœ¬èŠ‚ç‚¹")]),t._v(" "),s("li",[s("code",[t._v('"childList"')]),t._v(" æ·»åŠ /åˆ é™¤äº†å­å…ƒç´ ")])])]),t._v(" "),s("li",[t._v("å±æ€§ "),s("code",[t._v("target")]),t._v(" æ›´æ”¹å‘ç”Ÿåœ¨ä½•å¤„ï¼Œå³ "),s("code",[t._v('"attributes"')]),t._v(" æ‰€åœ¨çš„å…ƒç´ ï¼Œæˆ– "),s("code",[t._v('"characterData"')]),t._v(" æ‰€åœ¨çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œæˆ– "),s("code",[t._v('"childList"')]),t._v(" å˜åŠ¨æ‰€åœ¨çš„å…ƒç´ ")]),t._v(" "),s("li",[s("code",[t._v("addedNodes/removedNodes")]),t._v(" æ·»åŠ /åˆ é™¤çš„èŠ‚ç‚¹")]),t._v(" "),s("li",[s("code",[t._v("previousSibling/nextSibling")]),t._v(" æ·»åŠ /åˆ é™¤çš„èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹")]),t._v(" "),s("li",[s("code",[t._v("attributeName/attributeNamespace")]),t._v(" è¢«æ›´æ”¹çš„ç‰¹æ€§çš„åç§°/å‘½åç©ºé—´ï¼ˆç”¨äº XMLï¼‰")]),t._v(" "),s("li",[s("code",[t._v("oldValue")]),t._v(" ä¹‹å‰çš„å€¼ï¼Œä»…é€‚ç”¨äºç‰¹æ€§æˆ–æ–‡æœ¬æ›´æ”¹ï¼Œè€Œä¸”è®¾ç½®äº†ç›¸åº”é€‰é¡¹ "),s("code",[t._v("attributeOldValue")]),t._v("/"),s("code",[t._v("characterDataOldValue")]),t._v(" ä¸º "),s("code",[t._v("true")])])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- å…ƒç´  div å…·æœ‰ç‰¹æ€§ contentEditableï¼Œè¯¥ç‰¹æ€§ä½¿æˆ‘ä»¬å¯ä»¥èšç„¦å’Œç¼–è¾‘å…ƒç´  --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("contentEditable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Click and "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("edit"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(", please"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸º div å…ƒç´ è®¾ç½® DOM å˜åŠ¨è§‚å¯Ÿå™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MutationObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mutationRecords")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mutationRecords"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(the changes)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é™å®šè¦è§‚å¯Ÿçš„å†…å®¹ï¼Œé™¤äº†ç‰¹æ€§ä¹‹å¤–çš„æ‰€æœ‰å˜åŠ¨")]),t._v("\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  childList"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§‚å¯Ÿç›´æ¥å­èŠ‚ç‚¹")]),t._v("\n  subtree"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŠå…¶æ›´ä½çš„åä»£èŠ‚ç‚¹")]),t._v("\n  characterDataOldValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ—§çš„æ•°æ®ä¼ é€’ç»™å›è°ƒ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("å¦‚æœèšç„¦åˆ°ç»™å®šçš„ "),s("code",[t._v("<div>")]),t._v(" ä¸Šç„¶åæ›´æ”¹ "),s("code",[t._v("<b>edit</b>")]),t._v(" ä¸­çš„æ–‡æœ¬ï¼Œæ§åˆ¶å°ä¼šè¾“å‡º MutationRecord å¯¹è±¡ï¼Œæ˜¾ç¤º DOM ä¿®æ”¹çš„ç›¸å…³ä¿¡æ¯")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("mutationRecords "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"characterData"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  oldValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"edit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("text node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¶ä»–å±æ€§ä¸ºç©º")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ğŸ’¡ ä½¿ç”¨æ–¹æ³• "),s("code",[t._v("observer.disconnect()")]),t._v(" å¯ä»¥åœæ­¢è§‚å¯Ÿã€‚å½“æˆ‘ä»¬åœæ­¢è§‚å¯Ÿæ—¶ï¼Œè§‚å¯Ÿå™¨å¯èƒ½å°šæœªå¤„ç†æŸäº›æ›´æ”¹ï¼Œå¯ä»¥è°ƒç”¨æ–¹æ³• "),s("code",[t._v("observer.takeRecords()")]),t._v(" è·å–å°šæœªå¤„ç†çš„å˜åŠ¨è®°å½•åˆ—è¡¨ï¼Œè¡¨ä¸­è®°å½•çš„æ˜¯å·²ç»å‘ç”Ÿï¼Œä½†å›è°ƒæš‚æœªå¤„ç†çš„å˜åŠ¨ã€‚")]),t._v(" "),s("p",[t._v("âš ï¸ è§‚å¯Ÿå™¨åœ¨å†…éƒ¨å¯¹èŠ‚ç‚¹ä½¿ç”¨å¼±å¼•ç”¨ï¼Œè§‚å¯Ÿåˆ° DOM èŠ‚ç‚¹è¿™ä¸€äº‹å®å¹¶ä¸èƒ½é˜»æ­¢åƒåœ¾å›æ”¶ï¼Œå³å¦‚æœä¸€ä¸ªèŠ‚ç‚¹è¢«ä» DOM ä¸­åˆ é™¤äº†ï¼Œå¹¶ä¸”è¯¥èŠ‚ç‚¹å˜å¾—ä¸å¯è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«åƒåœ¾å›æ”¶ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);