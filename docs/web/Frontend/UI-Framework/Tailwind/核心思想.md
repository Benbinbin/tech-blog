---
tags:
  - tailwind
---

# 核心思想

## 基础类
Tailwind 提供了多种[基础类](https://github.com/tailwindlabs/tailwindcss/blob/master/stubs/defaultConfig.stub.js)，如断点 `md` 表示 `768px`，这些基础类按照规则可以用横线 `-` 相连进行**组合**，构成特点的语义，将相应的 UI 样式应用在 HTML 元素上，如 `bg-blue-100` 将背景颜色设置为 `#ebf8ff`，而 `text-gray-500` 则是将字体颜色设置为 `#a0aec0`。

## 响应式设计
Tailwind 提供四个默认的断点

```css
/* Small (sm) */
@media (min-width: 640px) { /* ... */ }

/* Medium (md) */
@media (min-width: 768px) { /* ... */ }

/* Large (lg) */
@media (min-width: 1024px) { /* ... */ }

/* Extra Large (xl) */
@media (min-width: 1280px) { /* ... */ }
```

需要将样式设定在相应断点起作用，只需要在类名前添加断点名称并用冒号 `:` 分隔即可

```html
<!-- Width of 16 by default, 32 on medium screens, and 48 on large screens -->
<img class="w-16 md:w-32 lg:w-48" src="...">
```

:bulb: Tailwind 的断点都是基于 `min-width` 最小宽度的，这是遵循移动优先 mobile first 的原则，即默认样式就是移动端小屏的样式，然后断点是针对大屏进行样式响应式变化的。

:bulb: 可以在 `tailwind.config.js` 自定义断点

```js
// 📁 tailwind.config.js
module.exports = {
  theme: {
    screens: {
      'tablet': '640px',
      // => @media (min-width: 640px) { ... }

      'laptop': '1024px',
      // => @media (min-width: 1024px) { ... }

      'desktop': '1280px',
      // => @media (min-width: 1280px) { ... }
    },
  }
}
```

## 伪类
伪类和响应式实现方式类似，通过在基础类前添加相应的伪类名称，如悬停 `hover`、聚焦 `focus` 等，并用冒号 `:` 分隔，即可设置相应状态下元素的样式。

```html
<button class="bg-teal-500 hover:bg-teal-600">Sign Up</button>
```

:bulb: 除了常见的伪类，Tailwind 还自定义增添了不少常用的[伪类变量](https://tailwindcss.com/docs/pseudo-class-variants)。
:bulb: 由于考虑到编译文件大小等性能问题，并非所有基础类都默认支持伪类，如果遇到某些伪类设置无效，可以查看
[Default variants reference](https://tailwindcss.com/docs/pseudo-class-variants#default-variants-reference) 默认支持的伪类变量，如果基础类的相应伪类默认未开启，可以在配置文件 `tailwind.config.js` 中 `variants` 属性开启，当然也可以关闭相应的伪类变量。

```js
module.exports = {
  // ...
  // 背景颜色支持的伪类有 3 种
  variants: {
    backgroundColor: ['responsive', 'hover', 'focus'],
  },
}
```

```js
// 📁 tailwind.config.js
module.exports = {
  // ...
  variants: {
    backgroundColor: ['responsive', 'hover', 'focus', 'active'],
  },
}
```

:bulb: Tailwind 伪类变量也可以使用在项目的 `styles.css` 样式表中，只需要在前面使用关键字 `@variants`

```css
/* Input: */
@variants group-hover, hover, focus {
  .banana {
    color: yellow;
  }
}

/* Output: */
.banana {
  color: yellow;
}
.group:hover .group-hover\:banana {
  color: yellow;
}
.hover\:banana:hover {
  color: yellow;
}
.focus\:banana:focus {
  color: yellow;
}
```

可以在配置文件 `tailwind.config.js` 的 `plugins` 属性中[定制伪类变量](https://tailwindcss.com/docs/plugins#adding-variants)，需要先导入 `tailwindcss/plugin` 模块

```js
// 📁 tailwind.config.js
const plugin = require('tailwindcss/plugin')

module.exports = {
  plugins: [
    plugin(function({ addVariant, e }) {
      addVariant('disabled', ({ modifySelectors, separator }) => {
        modifySelectors(({ className }) => {
          return `.${e(`disabled${separator}${className}`)}:disabled`
        })
      })
    })
  ]
}
```

## 抽取组件
在 HTML 页面重复使用的组件中会有大量相同的基础类，如按钮等较小的组件中可能使用了有很多相同基础类，为了避免代码冗余以及后续维护方便，可以将这些类似组件中相同的一些列基础类**提取**出来，写在样式表 `styles.css` 中，只需要在它们前面添加关键字 `@apply` 即可将它们「汇总」在一个类名下，然后我们就可以将类名添加在 HTML 标签中。

```html
<!-- 原始的按钮元素 -->
<!-- Repeating these classes for every button can be painful -->
<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
  Button
</button>
```
提取样式后的按钮元素
```html
<button class="btn-blue">
  Button
</button>
```

```css
/* 📁 styles.css */
.btn-blue {
  @apply bg-blue-500 text-white font-bold py-2 px-4 rounded;
}
.btn-blue:hover {
  @apply bg-blue-700;
}
```

类似地，另一种常见于框架，如 Vue 等，的做法是[对组件的模板进行共用样式设定](https://tailwindcss.com/docs/extracting-components#extracting-html-components)，并在组件的实例进行特定样式设置。

## 自定义基础类
有多种方式添加自定义基础类，但较为便捷的方式是使用配置文档 `tailwind.config.js`

所有配置都是可选的，如果基础类在配置文件中没有设置，则会使用 Tailwind 的[预设值](https://github.com/tailwindlabs/tailwindcss/blob/master/stubs/defaultConfig.stub.js)。

```js
// 📁 tailwind.config.js
module.exports = {
  important: true,
  theme: {
    fontFamily: {
      display: ['Gilroy', 'sans-serif'],
      body: ['Graphik', 'sans-serif'],
    },
    extend: {
      colors: {
        cyan: '#9cdbff',
      },
      margin: {
        '96': '24rem',
        '128': '32rem',
      },
    }
  },
  variants: {
    opacity: ['responsive', 'hover']
  }
}
```
## 函数与指令
* `@tailwind` 指令将 Tailwind 的预设基础样式导入到项目的样式表中

```css
/* 📁 styles.css */
/**
 * This injects Tailwind's base styles and any base styles registered by
 * plugins.
 */
@tailwind base;
```

* `@apply` 指令将行内存在的（共用）基础类提取出来放到项目的 CSS 样式表中，「汇总」为一个类，然后在 HTML 元素就可以只写这个类名就应用其包含的所有基础类

```css
/* 📁 styles.css */
.btn {
  @apply font-bold py-2 px-4 rounded;
}

/* 两种方式效果一样 */
.btn {
  @apply font-bold;
  @apply py-2;
  @apply px-4;
  @apply rounded;
}

/* 可以插入到已有样式设置的类中 */
.btn:hover {
  @apply bg-blue-700;
  transform: translateY(-1px);
}
```

* `@layer` 指令告诉 Tailwind 自定义样式属于哪个 bucket，通过该指令可以直接在项目的样式表 `styles.css` 定制基础类、伪类变量等，但还是推荐在配置文件 `tailwind.config.js` 中进行设置

```css
/* 📁 styles.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  h1 {
    @apply text-2xl;
  }
  h2 {
    @apply text-xl;
  }
}

@layer components {
  .btn-blue {
    @apply bg-blue-500 text-white font-bold py-2 px-4 rounded;
  }
  .btn-blue:hover {
    @apply bg-blue-700;
  }
}

@layer utilities {
  @variants hover, focus {
    .filter-none {
      filter: none;
    }
    .filter-grayscale {
      filter: grayscale(100%);
    }
  }
}
```

* `@variants` 指令可以在样式表中使用或定制伪类变量

```css
/* 📁 styles.css */
@variants focus, hover {
  .rotate-0 {
    transform: rotate(0deg);
  }
  .rotate-90 {
    transform: rotate(90deg);
  }
}
```

* `@responsive` 指令可以在样式表中使用断点

```css
/* 📁 styles.css */
@responsive {
  .bg-gradient-brand {
    background-image: linear-gradient(blue, green);
  }
}
```

* `@screen` 指令可以在样式表中使用屏幕相关的媒体查询，设置响应式样式

```css
/* 📁 styles.css */
@screen sm {
  /* ... */
}

/* 以下代码效果相同 */
@media (min-width: 640px) {
  /* ... */
}
```

* `theme()` 函数可以在样式表中读取 Tailwind 配置文件的值

```css
/* 📁 styles.css */
.content-area {
  height: calc(100vh - theme('spacing.12'));
}
```