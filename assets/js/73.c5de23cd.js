(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1111:function(t,s,a){t.exports=a.p+"assets/img/20200126121303548_29356.25164e83.png"},1112:function(t,s,a){t.exports=a.p+"assets/img/20200513103736982_28256.41d8f8ad.png"},1113:function(t,s,a){t.exports=a.p+"assets/img/20200513105447526_13159.2716f3da.png"},1444:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ajax"}},[t._v("Ajax")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š"),n("a",{attrs:{href:"http://codemany.com/blog/ajax-new-approach-web-applications/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ajaxï¼šWebåº”ç”¨çš„ä¸€ç§æ–°æ–¹æ³•"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Ajaxï¼ŒAsynchronous JavaScript And XMLï¼Œå³å¼‚æ­¥çš„ JavaScript ä¸ XML æŠ€æœ¯ï¼Œè¯¥æ¦‚å¿µæ˜¯åœ¨ 2005 å¹´ "),n("a",{attrs:{href:"https://web.archive.org/web/20080702075113/http://www.adaptivepath.com/ideas/essays/archives/000385.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jesse James Garrett å‘æ˜çš„"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("p",[t._v("è¯¥æŠ€æœ¯æ ¸å¿ƒæ¦‚å¿µæ˜¯å¼‚æ­¥è¯·æ±‚æ•°æ®ï¼Œå³åœ¨å®¢æˆ·ç«¯å‘å‡ºæ•°æ®è¯·æ±‚åï¼Œä¸éœ€è¦ç­‰å¾…è¯·æ±‚è¿”å›ï¼Œå€ŸåŠ© Ajaxå¼•æ“å¯ä»¥ç»§ç»­è¿›è¡Œå…¶ä»–ä»»åŠ¡å¤„ç†ï¼Œå¾…è¯·æ±‚è¿”å›åå†è¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œè¯¥è¿‡ç¨‹ä¸ç”¨ä¸€æ¬¡æ¬¡é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè€Œåªéœ€è¦æ ¹æ®å“åº”æ›´æ–°ç‰¹å®šåŒºåŸŸçš„æ•°æ®ã€‚")]),t._v(" "),n("p",[t._v("Ajax æŠ€æœ¯åŒ…æ‹¬ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ä½¿ç”¨ XHTML å’Œ CSS çš„ "),n("a",{attrs:{href:"http://adaptivepath.org/publications/essays/archives/000266.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("standards-based presentation"),n("OutboundLink")],1),t._v("ï¼›")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ "),n("a",{attrs:{href:"http://www.scottandrew.com/weblog/articles/dom_1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Document Object Model"),n("OutboundLink")],1),t._v(" çš„åŠ¨æ€æ˜¾ç¤ºå’Œäº¤äº’ï¼›")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ "),n("a",{attrs:{href:"http://www-106.ibm.com/developerworks/xml/library/x-xslt/?article=xr",target:"_blank",rel:"noopener noreferrer"}},[t._v("XML å’Œ XSLT"),n("OutboundLink")],1),t._v(" çš„æ•°æ®äº¤æ¢å’Œæ“æ§ï¼›")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ "),n("a",{attrs:{href:"http://www.xml.com/pub/a/2005/02/09/xml-http-request.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMLHttpRequest"),n("OutboundLink")],1),t._v(" çš„å¼‚æ­¥æ•°æ®æ£€ç´¢ï¼›")]),t._v(" "),n("li",[n("a",{attrs:{href:"http://www.crockford.com/javascript/javascript.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript"),n("OutboundLink")],1),t._v(" å°†æ‰€æœ‰è¿™äº›ç»‘å®šåœ¨ä¸€èµ·ã€‚")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1111),alt:"Ajax ä¸ä¼ ç»Ÿçš„æ•°æ®è¯·æ±‚æ¨¡å‹å¯¹æ¯”"}})]),t._v(" "),n("p",[t._v("å…¶ä¸­ Ajax æŠ€æœ¯æ ¸å¿ƒæ˜¯å‘é€å¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ä½¿ç”¨ JavaScript å†…ç½®çš„ XMLHttpRequest æ„é€ å‡½æ•°ï¼ˆåˆ›å»º XMLHttpRequest/XHR å¯¹è±¡ï¼‰ç”Ÿæˆå¼‚æ­¥è¯·æ±‚")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ jQuery ç”Ÿæˆå¼‚æ­¥è¯·æ±‚")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ fetch API ç”Ÿæˆå¼‚æ­¥è¯·æ±‚")])]),t._v(" "),n("h2",{attrs:{id:"xmlhttprequest"}},[t._v("XMLHttpRequest")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://zh.javascript.info/xmlhttprequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMLHttpRequest | ç°ä»£ JavaScript æ•™ç¨‹"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä½¿ç”¨ XMLHttpRequest - Web API æ¥å£å‚è€ƒ | MDN"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://xhr.spec.whatwg.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMLHttpRequest Standard | WHATWG è§„èŒƒ"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.w3.org/TR/XMLHttpRequest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMLHttpRequest Level 1 | W3C è§„èŒƒ"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.html5rocks.com/zh/tutorials/file/xhr2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMLHttpRequest2 æ–°æŠ€å·§"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/file/xhr2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‹±æ–‡"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("XMLHttpRequestï¼ˆç¼©å†™ä¸º XHR æˆ– xhrï¼‰å¯ä»¥ç”¨æ¥å‘ API è¯·æ±‚ä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ "),n("code",[t._v("txt")]),t._v(" çº¯æ–‡æœ¬æ–‡ä»¶ã€"),n("code",[t._v("HTML")]),t._v(" æ–‡ä»¶ã€"),n("code",[t._v("JSON")]),t._v(" æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ç­‰ï¼‰æˆ–æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯XMLï¼Œå®ƒç”šè‡³æ”¯æŒ HTTP ä»¥å¤–çš„åè®®ï¼ˆåŒ…æ‹¬ file:// å’Œ FTPï¼‰ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ å¦‚ä»Šæœ‰ä¸€ä¸ªæ›´ä¸ºç°ä»£çš„æ–¹æ³• "),n("code",[t._v("fetch")]),t._v(" å‘é€å¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼Œå®ƒçš„å‡ºç°ä½¿å¾— "),n("code",[t._v("XMLHttpRequest")]),t._v(" åœ¨æŸç§ç¨‹åº¦ä¸Šè¢«å¼ƒç”¨ã€‚åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå‡ºäºä»¥ä¸‹ä¸‰ç§åŸå› ï¼Œæˆ‘ä»¬è¿˜åœ¨ä½¿ç”¨ "),n("code",[t._v("XMLHttpRequest")]),t._v("ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("å†å²åŸå› ï¼šæˆ‘ä»¬éœ€è¦æ”¯æŒç°æœ‰çš„ä½¿ç”¨äº† "),n("code",[t._v("XMLHttpRequest")]),t._v(" çš„è„šæœ¬ã€‚")]),t._v(" "),n("li",[t._v("æˆ‘ä»¬éœ€è¦å…¼å®¹æ—§æµè§ˆå™¨ï¼Œå¹¶ä¸”ä¸æƒ³ç”¨ polyfillã€‚")]),t._v(" "),n("li",[t._v("æˆ‘ä»¬éœ€è¦åšä¸€äº› "),n("code",[t._v("fetch")]),t._v(" ç›®å‰æ— æ³•åšåˆ°çš„äº‹æƒ…ï¼Œå¦‚"),n("strong",[t._v("è·Ÿè¸ªä¸Šä¼ è¿›åº¦")]),t._v("ã€‚")])]),t._v(" "),n("p",[t._v("JavaScript å¼•æ“æä¾›äº†å‘å‡ºå¼‚æ­¥ HTTP è¯·æ±‚çš„æ–¹å¼ï¼Œè°ƒç”¨å…¶å†…ç½®çš„ "),n("strong",[t._v("XMLHttpRequest æ„é€ å‡½æ•°")]),t._v("åˆ›å»º XHR å¯¹è±¡ï¼Œä»¥åˆ›å»º Ajax è¯·æ±‚ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/my/url'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HTTP error?")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç† error")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Error: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æ¥è‡ª xhr.response çš„å“åº”")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onprogress")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠ¥å‘Šä¸‹è½½è¿›åº¦")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Loaded ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loaded"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" of ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("total"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†é HTTP errorï¼ˆå¦‚ç½‘ç»œä¸­æ–­ï¼‰")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("XMLHttpRequest å‘é€ç½‘ç»œè¯·æ±‚æ­¥éª¤ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("XMLHttpRequest æœ‰ä¸¤ç§æ‰§è¡Œæ¨¡å¼ï¼ŒåŒæ­¥ synchronous å’Œå¼‚æ­¥ asynchronousï¼Œå¼‚æ­¥æ¨¡å¼å‘é€è¯·æ±‚éœ€è¦ 3 ä¸ªæ­¥éª¤ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("ä½¿ç”¨ "),n("code",[t._v("XMLHttpRequest")]),t._v(" æ„é€ å‡½æ•°åˆ›å»º XHR å¯¹è±¡")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨ "),n("code",[t._v("open()")]),t._v(" æ–¹æ³•åˆå§‹åŒ– XHR å¯¹è±¡")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ .open æ–¹æ³•æ—¶å¹¶ä¸ä¼šå»ºç«‹è¿æ¥ï¼Œä»…ä»…è®¾ç½®å½“å‰è¯·æ±‚çš„é…ç½®")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("method"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("async"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("åœ¨åˆ›å»º XHR å¯¹è±¡ä¹‹åï¼Œé€šå¸¸è°ƒç”¨ "),n("code",[t._v(".open()")]),t._v(" å‡½æ•°æŒ‡å®šäº†è¯·æ±‚çš„ä¸»è¦å‚æ•°ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("method")]),t._v(" æŒ‡ä»£ HTTP æ–¹æ³•ã€‚é€šå¸¸æ˜¯ "),n("code",[t._v("GET")]),t._v(" æˆ–è€… "),n("code",[t._v("POST")])]),t._v(" "),n("li",[n("code",[t._v("URL")]),t._v(" æŒ‡å®šè¦æ‰§è¡Œè¯·æ±‚çš„ URL å­—ç¬¦ä¸²ï¼Œæˆ–å¯ä»¥ URL å¯¹è±¡ã€‚")]),t._v(" "),n("li",[n("code",[t._v("async")]),t._v(" å¦‚æœè®¾ç½®ä¸º "),n("code",[t._v("false")]),t._v(" è¯·æ±‚å°†ä¼šä»¥åŒæ­¥çš„æ–¹å¼å¤„ç†ï¼ˆé»˜è®¤ä¸º "),n("code",[t._v("true")]),t._v(" å³å¼‚æ­¥æ‰§è¡Œï¼‰")]),t._v(" "),n("li",[n("code",[t._v("user")]),t._v(" å’Œ "),n("code",[t._v("password")]),t._v(" æŒ‡å®š HTTP åŸºæœ¬èº«ä»½è®¤è¯ï¼ˆå¯é€‰ï¼‰çš„ç™»å½•åå’Œå¯†ç ")])]),t._v(" "),n("p",[t._v("ğŸ’¡ ä½¿ç”¨ "),n("code",[t._v("xhr")]),t._v(" å¯¹è±¡å±æ€§ "),n("code",[t._v("timeout")]),t._v(" è®¾ç½®è¶…æ—¶é™åˆ¶ï¼Œå¦‚æœåœ¨ç»™å®šæ—¶é—´å†…è¯·æ±‚æ²¡æœ‰æˆåŠŸæ‰§è¡Œå°±ä¼šè¢«å–æ¶ˆï¼Œå¹¶ä¸”"),n("strong",[t._v("è§¦å‘ "),n("code",[t._v("timeout")]),t._v(" äº‹ä»¶")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// timeout å•ä½æ˜¯ msï¼Œæ­¤å¤„å³ 10 ç§’")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨æ–¹æ³• "),n("code",[t._v("send()")]),t._v(" å‘é€è¯·æ±‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»ºç«‹è¿æ¥ï¼Œå¹¶å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("å¯é€‰å‚æ•° body åŒ…å«äº†è¯·æ±‚ä¸»ä½“ :")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("GET")]),t._v(" æ²¡æœ‰è¯·æ±‚ä½“")]),t._v(" "),n("li",[n("code",[t._v("POST")]),t._v(" è¿™ç±»è¯·æ±‚æ–¹å¼ä¼šç”¨ "),n("code",[t._v("body")]),t._v(" æ¥å‘é€æ•°æ®åˆ°æœåŠ¡å™¨")])])])])]),t._v(" "),n("li",[n("p",[t._v("ç„¶åå°±æ˜¯ç›‘å¬å“åº”äº‹ä»¶ï¼Œè®¾ç½®å¯¹æˆåŠŸ/é”™è¯¯çš„å“åº”çš„å¤„ç†ç¨‹åºï¼ˆâš ï¸ éœ€è¦"),n("strong",[t._v("åœ¨å‘å‡ºè¯·æ±‚å‰")]),t._v("å®Œæˆç›‘å¬å“åº”äº‹ä»¶çš„è®¾ç½®ï¼‰ã€‚å¸¸è§çš„ä¸‰ä¸ªäº‹ä»¶ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("load")]),t._v(" åœ¨è¯·æ±‚ç»“æœå·²ç»è¿”å›æ—¶è§¦å‘ï¼Œâš ï¸ è¯·æ±‚è¿”å›ä¹ŸåŒ…æ‹¬åƒ "),n("code",[t._v("404")]),t._v(" è¿™æ ·çš„ HTTP é”™è¯¯ã€‚é€šè¿‡ XHR å¯¹è±¡å±æ€§ "),n("code",[t._v("onload")]),t._v(" ç›‘å¬æˆåŠŸè¿”å›çš„äº‹ä»¶ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„å¤„ç†ç¨‹åº")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("error")]),t._v(" åœ¨æ— æ³•å®Œæˆè¯·æ±‚æ—¶è§¦å‘ï¼Œæ¯”å¦‚ç½‘ç»œä¸­æ–­æˆ–è€…æ— æ•ˆçš„ URLã€‚é€šè¿‡ XHR å¯¹è±¡å±æ€§ "),n("code",[t._v("onerroe")]),t._v(" ç›‘å¬é”™è¯¯å“åº”çš„äº‹ä»¶ï¼Œå¹¶è®¾ç½®æ— æ³•å®ç°è¯·æ±‚çš„å¤„ç†ç¨‹åº")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("progress")]),t._v(" åœ¨ä¸‹è½½æœŸé—´å®šæ—¶è§¦å‘ï¼ŒæŠ¥å‘Šå·²ç»ä¸‹è½½äº†å¤šå°‘ã€‚é€šè¿‡ XHR å¯¹è±¡å±æ€§ "),n("code",[t._v("onprogress")]),t._v(" æ¥è®¾ç½®ä¸‹è½½å“åº”è¿‡ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œ")])])]),t._v(" "),n("li",[n("p",[t._v("æœ€åå¦‚æœè¯·æ±‚æˆåŠŸï¼Œå¹¶è·å¾—å“åº”æ¶ˆæ¯ï¼Œå°±éœ€è¦å¯¹è¿”å›çš„å“åº”ä½“ "),n("code",[t._v("xhr.response")]),t._v(" ä½œè¿›ä¸€æ­¥åˆ†æã€‚")])])]),t._v(" "),n("h3",{attrs:{id:"open-æ–¹æ³•"}},[t._v("open() æ–¹æ³•")]),t._v(" "),n("p",[t._v("XHR å¯¹è±¡ä½¿ç”¨æ–¹æ³• "),n("code",[t._v(".open(method, URL)")]),t._v(" è®¾ç½®è¯·æ±‚é…ç½®ï¼Œæœ‰å¤šä¸ªå‚æ•°ä½†æ˜¯æœ€é‡è¦çš„å‚æ•°æ˜¯å‰ä¸¤ä¸ªå‚æ•°ï¼š")]),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP æ–¹æ³•"),n("OutboundLink")],1),t._v("ï¼Œä¸»è¦æ˜¯ä¸¤ç§ "),n("code",[t._v("GET")]),t._v("æ£€ç´¢æ•°æ®æˆ– "),n("code",[t._v("POST")]),t._v(" å‘é€æ•°æ®")]),t._v(" "),n("li",[t._v("è¦å‘é€è¯·æ±‚çš„ URL")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å›¾ç‰‡ç½‘ç«™ Unsplash å‘å‡ºé¦–é¡µå¼‚æ­¥è¯·æ±‚ï¼Œä½¿ç”¨ GET è¯·æ±‚å¹¶æä¾›ç›¸å…³ URL")]),t._v("\nasyncRequestObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://unsplash.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ å¯å°† "),n("code",[t._v("false")]),t._v(" ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ XHR è¯·æ±‚å˜æˆ"),n("strong",[t._v("åŒæ­¥è¯·æ±‚")]),t._v("ã€‚è¿™å°†å¯¼è‡´ JavaScript å¼•æ“åœ¨æ‰§è¡Œ "),n("code",[t._v("send()")]),t._v(" åæš‚åœå¹¶ç­‰å¾…è¿”å›è¯¥è¯·æ±‚ï¼Œç§°ä¸ºã€Œé˜»æ­¢ã€ï¼Œç„¶åå†ç»§ç»­ã€‚è¿™åšæ³•å®Œå…¨ä¸å¼‚æ­¥è¡Œä¸ºçš„ç›®çš„ç›¸è¿èƒŒï¼ŒåŒæ­¥è¯·æ±‚ä¼šé˜»å¡é¡µé¢å†…çš„å…¶ä»–è„šæœ¬æ‰§è¡Œï¼Œå¦‚æœä¸€ä¸ªåŒæ­¥è°ƒç”¨æ‰§è¡Œæ—¶é—´è¿‡é•¿æµè§ˆå™¨å¯èƒ½ä¼šå»ºè®®å…³é—­ã€ŒæŒ‚èµ·ã€hanging çš„ç½‘é¡µã€‚âš ï¸ è¯·å‹¿å¦‚æ­¤è®¾ç½®ä½ çš„ XHR å¯¹è±¡ï¼è¦ä¹ˆå°†ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ä¸º "),n("code",[t._v("true")]),t._v(" æˆ–ç•™ç©ºï¼ˆé»˜è®¤å€¼å˜æˆ "),n("code",[t._v("true")]),t._v("ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ è¯¥æ–¹æ³•å¹¶æ²¡æœ‰å®é™…åœ°å‘é€è¯·æ±‚ï¼å®ƒçš„ä½œç”¨åªæ˜¯åšå¥½å‡†å¤‡ï¼Œå‘ XHR å¯¹è±¡æä¾›è¯·æ±‚æ‰€éœ€çš„ä¿¡æ¯ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ ä¸€èˆ¬åªèƒ½åœ¨å°†åŠ è½½æ•°æ®çš„"),n("strong",[t._v("åŒä¸€ç½‘åŸŸä¸­")]),t._v("å‘å‡ºèµ„æºå’Œæ•°æ®è¯·æ±‚ï¼Œå¦‚è¦å‘ google.com å‘å‡ºå¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œæµè§ˆå™¨éœ€è¦ä½äº "),n("code",[t._v("google.com")]),t._v(" ä¸Šï¼Œè¿™ç§°ä¸º "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒæºç­–ç•¥"),n("OutboundLink")],1),t._v("ã€‚è¿™ä¸€é™åˆ¶æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒåŸå› æ˜¯ JavaScript å¯¹ç½‘é¡µä¸Šçš„å¤ªå¤šä¿¡æ¯å…·æœ‰æ§åˆ¶æƒï¼Œå®ƒå¯ä»¥è®¿é—®æ‰€æœ‰çš„ Cookieã€èƒ½å¤Ÿåˆ¤æ–­å¯†ç ï¼ˆå› ä¸ºå®ƒå¯ä»¥è¿½è¸ªç”¨æˆ·æŒ‰çš„æ˜¯å“ªä¸ªé”®ï¼‰ç­‰ã€‚è§£å†³åŒæºç­–ç•¥é™åˆ¶çš„æ–¹å¼æ˜¯ä½¿ç”¨ "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",target:"_blank",rel:"noopener noreferrer"}},[t._v("CORS, Cross-Origin Resource Sharing è·¨åŸŸè¯·æ±‚"),n("OutboundLink")],1),t._v(" ï¼Œè¿™æ˜¯å¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šå®ç°çš„æŠ€æœ¯ï¼Œèƒ½è®©å¼€å‘è€…è§„é¿åŒæºç­–ç•¥é™åˆ¶å¹¶è®¿é—®è¿™äº›æœåŠ¡å™¨ä¸Šçš„ä¿¡æ¯ã€‚")]),t._v(" "),n("h4",{attrs:{id:"post"}},[t._v("POST")]),t._v(" "),n("p",[t._v("å½“æˆ‘ä»¬éœ€è¦å‘é€å¤§é‡æ•°æ®æ—¶ï¼Œå¦‚è¡¨å•ç­‰ï¼Œéœ€è¦ä½¿ç”¨ "),n("code",[t._v("POST")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ å¦‚æœéœ€è¦å¤„ç†è¡¨å•æ•°æ®ï¼Œå¯ä»¥"),n("a",{attrs:{href:"#FormData"}},[t._v("ä½¿ç”¨æ„é€ å‡½æ•° "),n("code",[t._v("FormData([form])")]),t._v(" åˆ›å»ºä¸€ä¸ª HTML è¡¨å•æ•°æ®å¯¹è±¡")]),t._v("ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡æä¾›çš„è®¸å¤šä¾¿æ·æ–¹æ³•ã€‚å½“ä»¥ FormData å¯¹è±¡ä½œä¸º request body æ—¶ï¼Œå³ "),n("code",[t._v("xhr.send(formData)")]),t._v("ï¼Œåˆ™è¯·æ±‚è¡¨å¤´ä¼šå«æœ‰  "),n("code",[t._v("Content-Type: multipart/form-data")]),t._v(" çš„ headerã€‚")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("John"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("surname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Smith"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»è¡¨å•é¢„å¡«å…… FormData")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" formData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forms"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é™„åŠ ä¸€ä¸ªå­—æ®µ")]),t._v("\n  formData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"middle"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Lee"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†å…¶å‘é€å‡ºå»")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/article/xmlhttprequest/post/user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ POST æ–¹æ³•")]),t._v("\n  xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h3",{attrs:{id:"http-header"}},[t._v("HTTP-header")]),t._v(" "),n("p",[t._v("HTTP-header æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè®¯æ—¶å¤´éƒ¨ä¿¡æ¯ï¼Œå¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" æœ‰ä¸‰ç§æ–¹æ³•è®¾ç½®/è¯»å–è‡ªå®šä¹‰çš„ headerï¼Œä»¥å‘é€é™„åŠ çš„ä¿¡æ¯ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("a",{attrs:{href:"http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸€äº› header æ˜¯ç”±æµè§ˆå™¨ä¸“é—¨ç®¡ç†è®¾ç½®çš„"),n("OutboundLink")],1),t._v("ï¼Œå¦‚ "),n("code",[t._v("Referer")]),t._v(" å’Œ "),n("code",[t._v("Host")]),t._v("ï¼Œä¸ºäº†ç”¨æˆ·å®‰å…¨å’Œè¯·æ±‚çš„æ­£ç¡®æ€§ä¸å…é€šè¿‡å¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" çš„æ–¹æ³•æ›´æ”¹å®ƒä»¬ã€‚")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ–¹æ³• "),n("code",[t._v("xhr.setRequestHeader(name, value)")]),t._v(" ä½¿ç”¨ç»™å®šçš„ "),n("code",[t._v("name")]),t._v(" å’Œ "),n("code",[t._v("value")]),t._v(" è®¾ç½® request headerï¼Œå¿…é¡»åœ¨ "),n("code",[t._v("open()")]),t._v(" ä¹‹åã€"),n("code",[t._v("send()")]),t._v(" ä¹‹å‰è°ƒç”¨è¯¥æ–¹æ³•ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("âš ï¸ "),n("code",[t._v("XMLHttpRequest")]),t._v(" çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯"),n("strong",[t._v("ä¸èƒ½æ’¤é”€ "),n("code",[t._v("setRequestHeader")])]),t._v("ï¼Œå³ä¸€æ—¦è®¾ç½®äº† header å°±æ— æ³•æ’¤é”€äº†ï¼Œå…¶ä»–è°ƒç”¨ä¼šå‘ header ä¸­æ·»åŠ ä¿¡æ¯ï¼Œä½†ä¸ä¼šè¦†ç›–å®ƒã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Auth'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Auth'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'456'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// header å°†æ˜¯ï¼š")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// X-Auth: 123, 456")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æ–¹æ³• "),n("code",[t._v("getResponseHeader(name)")]),t._v(" è·å–å“åº”å¤´ä¸­ç»™å®š "),n("code",[t._v("name")]),t._v(" çš„ headerï¼ˆ"),n("code",[t._v("Set-Cookie")]),t._v(" å’Œ "),n("code",[t._v("Set-Cookie2")]),t._v(" é™¤å¤–ï¼‰ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResponseHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æ–¹æ³• "),n("code",[t._v("getAllResponseHeaders()")]),t._v(" è¿”å›é™¤ "),n("code",[t._v("Set-Cookie")]),t._v(" å’Œ "),n("code",[t._v("Set-Cookie2")]),t._v(" å¤–å“åº”å¤´ä¸­æ‰€æœ‰ response headerã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// header ä»¥å•è¡Œå½¢å¼è¿”å›")]),t._v("\nCache"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" max"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31536000")]),t._v("\nContent"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4260")]),t._v("\nContent"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" image"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("png\nDate"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Sat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),t._v(" Sep "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2012")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("53")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\n")])])]),n("p",[t._v("å®ƒä»¬ä¹‹é—´çš„æ¢è¡Œç¬¦å§‹ç»ˆä¸º "),n("code",[t._v('"\\r\\n"')]),t._v("ï¼ˆä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼‰ï¼Œè€Œä¸”"),n("code",[t._v("name")]),t._v(" å’Œ "),n("code",[t._v("value")]),t._v(" ä¹‹é—´æ€»æ˜¯ä»¥å†’å·åè·Ÿä¸€ä¸ªç©ºæ ¼ "),n("code",[t._v('": "')]),t._v(" åˆ†éš”ï¼ŒåŸºäºè¿™äº›æ ‡å‡†æ ¼å¼å¯ä»¥å¾ˆå®¹æ˜“å°†å®ƒä»¬æ‹†åˆ†ä¸ºå•ä¸ª headerã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ‰€æœ‰çš„ header æ‹†åˆ†ä¸ºå¯¹è±¡ result çš„å„ä¸ªå±æ€§")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" headers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" xhr\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllResponseHeaders")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\r\\n'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" current")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("': '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// headers['Content-Type'] = 'image/png'")]),t._v("\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"send-æ–¹æ³•"}},[t._v("send() æ–¹æ³•")]),t._v(" "),n("p",[t._v("è¦å®é™…åœ°å‘é€è¯·æ±‚ï¼Œéœ€è¦è°ƒç”¨ XHR "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³• "),n("code",[t._v(".send()")]),n("OutboundLink")],1),t._v("\n![å‘é€ Ajax è¯·æ±‚](./_v_images/20200126161625614_20161.png =1000x)")]),t._v(" "),n("p",[t._v("è™½ç„¶è¯·æ±‚å‘å‡ºäº†ï¼Œä½†å¦‚æœä¸å¯¹å“åº”äº‹ä»¶ä½œå‡ºç›‘è§†ï¼Œåˆ™è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åœ¨éƒ½æ²¡æœ‰ä»»ä½•æç¤ºã€‚ä¸ºäº†ç›‘è§†äº‹ä»¶å¯ä»¥è®¾ç½® XHR å¯¹è±¡çš„ "),n("code",[t._v("onload")]),t._v(" å±æ€§æˆ– "),n("code",[t._v("onerror")]),t._v(" å±æ€§ã€‚")]),t._v(" "),n("h4",{attrs:{id:"ä¸Šä¼ è¿›åº¦"}},[t._v("ä¸Šä¼ è¿›åº¦")]),t._v(" "),n("p",[t._v("äº‹ä»¶ "),n("code",[t._v("progress")]),t._v(" ä»…åœ¨ä¸‹è½½é˜¶æ®µè§¦å‘ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬è¯¥äº‹ä»¶è¿½è¸ªä¸‹è½½è¿‡ç¨‹ã€‚è€Œå¯¹äºä¸Šä¼ è¿‡ç¨‹å¯ä»¥ç›‘å¬ "),n("code",[t._v("xhr.upload")]),t._v(" å¯¹è±¡ï¼Œä¸Šä¼ è¿‡ç¨‹ä¸­ä¼šåœ¨å…¶ä¸Šè§¦å‘ä¸åŒäº‹ä»¶ï¼Œé€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶å¯ä»¥è¿½è¸ªä¸Šä¼ è¿‡ç¨‹")]),t._v(" "),n("ul",[n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("loadstart")]),t._v(" åœ¨ä¸Šä¼ å¼€å§‹æ—¶è§¦å‘")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("progress")]),t._v(" "),n("strong",[t._v("åœ¨ä¸Šä¼ æœŸé—´å®šæœŸè§¦å‘")])]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("abort")]),t._v(" åœ¨ä¸Šä¼ ä¸­æ­¢è§¦å‘")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("error")]),t._v(" åœ¨é HTTP é”™è¯¯æŠ›å‡ºæ—¶è§¦å‘")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("load")]),t._v(" åœ¨ä¸Šä¼ æˆåŠŸå®Œæˆæ—¶è§¦å‘")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("timeout")]),t._v(" ï¼ˆå¦‚æœè®¾ç½®äº† "),n("code",[t._v("timeout")]),t._v(" å±æ€§ï¼‰åœ¨ä¸Šä¼ è¶…æ—¶æ—¶è§¦å‘ã€‚")]),t._v(" "),n("li",[t._v("äº‹ä»¶ "),n("code",[t._v("loadend")]),t._v(" åœ¨ä¸Šä¼ å®Œæˆæ—¶è§¦å‘ï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯ errorã€‚")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onprogress")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// event.loaded è¡¨ç¤ºå·²ä¸Šä¼ å­—èŠ‚æ•°ï¼Œevent.total è¡¨ç¤ºæ€»å­—èŠ‚æ•°")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Uploaded ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loaded"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" of ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("total"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" bytes")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Upload finished successfully.")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Error during the upload: ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å…·ä½“çš„å®ä¾‹æ¼”ç¤ºå¯æŸ¥çœ‹ï¼š"),n("a",{attrs:{href:"https://zh.javascript.info/xmlhttprequest#shang-chuan-jin-du",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¸¦æœ‰è¿›åº¦æŒ‡ç¤ºçš„æ–‡ä»¶ä¸Šä¼ "),n("OutboundLink")],1)]),t._v(" "),n("h4",{attrs:{id:"è·¨åŸŸè¯·æ±‚"}},[t._v("è·¨åŸŸè¯·æ±‚")]),t._v(" "),n("p",[n("code",[t._v("XMLHttpRequest")]),t._v(" å¯ä»¥ä½¿ç”¨ CORS ç­–ç•¥è¿›è¡Œ"),n("a",{attrs:{href:"#%E8%B7%A8%E6%BA%90%E8%AF%B7%E6%B1%82"}},[t._v("è·¨æºè¯·æ±‚")]),t._v("ï¼Œè¦å¯ç”¨å®ƒä»¬å¯ä»¥å°†å±æ€§ "),n("code",[t._v("xhr.withCredentials")]),t._v(" è®¾ç½®ä¸º "),n("code",[t._v("true")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withCredentials "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://anywhere.com/request'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),n("h3",{attrs:{id:"ä¸­æ­¢è¯·æ±‚"}},[t._v("ä¸­æ­¢è¯·æ±‚")]),t._v(" "),n("p",[t._v("å¯ä»¥éšæ—¶è°ƒç”¨æ–¹æ³• "),n("code",[t._v("xhr.abort()")]),t._v(" ç»ˆæ­¢è¯·æ±‚ï¼Œå®ƒä¼šè§¦å‘ "),n("code",[t._v("abort")]),t._v(" äº‹ä»¶ï¼Œä¸” "),n("code",[t._v("xhr.status")]),t._v(" å˜ä¸º "),n("code",[t._v("0")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»ˆæ­¢è¯·æ±‚")]),t._v("\n")])])]),n("h3",{attrs:{id:"çŠ¶æ€"}},[t._v("çŠ¶æ€")]),t._v(" "),n("p",[t._v("å¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" çš„çŠ¶æ€ state ä¼šéšç€å®ƒçš„å¤„ç†è¿›åº¦å˜åŒ–è€Œå˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å±æ€§ "),n("code",[t._v("xhr.readyState")]),t._v(" æ¥äº†è§£å½“å‰çŠ¶æ€ã€‚åœ¨"),n("a",{attrs:{href:"https://xhr.spec.whatwg.org/#states",target:"_blank",rel:"noopener noreferrer"}},[t._v("è§„èŒƒ"),n("OutboundLink")],1),t._v(" ä¸­æåˆ°çš„å¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" å…±æœ‰ 5 ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«ç”¨æ•°å€¼è¡¨ç¤ºå¯¹åº”äºä¸€ç§çŠ¶æ€ï¼Œ"),n("strong",[t._v("å½“å¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶äº‹ä»¶ "),n("code",[t._v("readystatechange")]),t._v(" å°±ä¼šè¢«è§¦å‘")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("UNSENT = 0")]),t._v(" åˆå§‹çŠ¶æ€")]),t._v(" "),n("li",[n("code",[t._v("OPENED = 1")]),t._v(" æ–¹æ³• "),n("code",[t._v("open()")]),t._v(" è¢«è°ƒç”¨")]),t._v(" "),n("li",[n("code",[t._v("HEADERS_RECEIVED = 2")]),t._v(" æ¥æ”¶åˆ° response header")]),t._v(" "),n("li",[n("code",[t._v("LOADING = 3")]),t._v(" å“åº”æ­£åœ¨è¢«åŠ è½½ï¼ˆæ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼‰")]),t._v(" "),n("li",[n("code",[t._v("DONE = 4")]),t._v(" è¯·æ±‚å®Œæˆ")])]),t._v(" "),n("p",[t._v("åœ¨å®é™…çš„ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡ "),n("code",[t._v("xhr")]),t._v(" çŠ¶æ€ä»¥ "),n("code",[t._v("0")]),t._v(" â†’ "),n("code",[t._v("1")]),t._v(" â†’ "),n("code",[t._v("2")]),t._v(" â†’ "),n("code",[t._v("3")]),t._v(" â†’ â€¦ â†’ "),n("code",[t._v("3")]),t._v(" â†’ "),n("code",[t._v("4")]),t._v(" çš„é¡ºåºè½¬å˜ï¼Œæ¯å½“é€šè¿‡ç½‘ç»œæ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå°±ä¼šé‡å¤ä¸€æ¬¡çŠ¶æ€ "),n("code",[t._v("3")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ å¯ä»¥é€šè¿‡ç›‘å¬äº‹ä»¶ "),n("code",[t._v("readystatechange")]),t._v("æ¥è·Ÿè¸ªè¯¥è¿‡ç¨‹ã€‚å¯èƒ½åœ¨éå¸¸è€çš„ä»£ç ä¸­æ‰¾åˆ° "),n("code",[t._v("readystatechange")]),t._v(" è¿™æ ·çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒçš„å­˜åœ¨æ˜¯æœ‰å†å²åŸå› çš„ï¼Œå› ä¸ºé‚£æ—¶æ²¡æœ‰ "),n("code",[t._v("load")]),t._v(" ä»¥åŠå…¶ä»–äº‹ä»¶ï¼Œå¦‚ä»Šå®ƒå·²è¢« "),n("code",[t._v("load/error/progress")]),t._v(" äº‹ä»¶å¤„ç†ç¨‹åºæ‰€æ›¿ä»£ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŠ è½½ä¸­")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚å®Œæˆ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"å“åº”"}},[t._v("å“åº”")]),t._v(" "),n("p",[t._v("ä¸€æ—¦æœåŠ¡å™¨è¿”å›å“åº”ï¼Œæˆ‘ä»¬è®¿é—® "),n("code",[t._v("xhr")]),t._v(" å¯¹è±¡çš„å±æ€§è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯")]),t._v(" "),n("ul",[n("li",[t._v("å±æ€§ "),n("code",[t._v("status")]),t._v("HTTP çŠ¶æ€ç ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¦‚ "),n("code",[t._v("200")]),t._v("ï¼Œ"),n("code",[t._v("404")]),t._v("ï¼Œ"),n("code",[t._v("403")]),t._v(" ç­‰ï¼Œå¦‚æœå‡ºç°"),n("strong",[t._v("é HTTP é”™è¯¯")]),t._v("åˆ™ä¸º "),n("code",[t._v("0")]),t._v("ï¼ˆå¦‚æœæ˜¯ HTTP é”™è¯¯è¿”å›çŠ¶æ€ç æ˜¯ "),n("code",[t._v("40*")]),t._v(" å½¢å¼ï¼‰ã€‚")]),t._v(" "),n("li",[t._v("å±æ€§ "),n("code",[t._v("statusText")]),t._v(" HTTP çŠ¶æ€æ¶ˆæ¯ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ ä¸çŠ¶æ€ç ç›¸å¯¹åº”ï¼Œå¦‚ "),n("code",[t._v("200")]),t._v(" å¯¹åº”äº "),n("code",[t._v("OK")]),t._v("ï¼Œ"),n("code",[t._v("404")]),t._v(" å¯¹åº”äº "),n("code",[t._v("Not Found")]),t._v("ï¼Œ"),n("code",[t._v("403")]),t._v(" å¯¹åº”äº "),n("code",[t._v("Forbidden")]),t._v(" ç­‰ã€‚")]),t._v(" "),n("li",[t._v("å±æ€§ "),n("code",[t._v("response")]),t._v("ï¼ˆæ—§è„šæœ¬å¯èƒ½ç”¨çš„æ˜¯ "),n("code",[t._v("responseText")]),t._v("ï¼‰æœåŠ¡å™¨å“åº”ä½“ response bodyã€‚")])]),t._v(" "),n("p",[t._v("âš ï¸ è¯·æ±‚è¿”å›åƒ "),n("code",[t._v("404")]),t._v(" è¿™æ ·çš„ HTTP é”™è¯¯å“åº”ï¼Œè™½ç„¶æ— æ³•è·å–èµ„æºä¹Ÿç®—æ˜¯è®¿é—®æˆåŠŸï¼Œä¾ç„¶å¯ä»¥è°ƒç”¨ XHR å¯¹è±¡å±æ€§ "),n("code",[t._v("onload")]),t._v(" è®¾ç½®çš„å¤„ç†ç¨‹åº")]),t._v(" "),n("h4",{attrs:{id:"å¤„ç†æˆåŠŸè¯·æ±‚-onload"}},[t._v("å¤„ç†æˆåŠŸè¯·æ±‚ onload")]),t._v(" "),n("p",[t._v("XHR å¯¹è±¡ "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestEventTarget/onload",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("onload")]),t._v(" å±æ€§"),n("OutboundLink")],1),t._v("æ˜¯è¯·æ±‚æˆåŠŸå®Œæˆæ—¶æ‰è°ƒç”¨çš„å‡½æ•°ï¼Œé€šè¿‡è¯¥å±æ€§å¯ä»¥è®¾ç½®è¯·æ±‚æˆåŠŸåçš„æ“ä½œ")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("XMLHttpRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// callback æ˜¯è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œ")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ å¤„ç†ç¨‹åºä¸­çš„ "),n("code",[t._v("this")]),t._v(" æŒ‡ä»£ XHR å¯¹è±¡")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚æˆåŠŸæ—¶å°†å“åº”æ¶ˆæ¯ï¼ˆå¦‚ HTML æ–‡ä»¶ï¼‰åœ¨ç»ˆç«¯æ‰“å°å‡ºæ¥")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleSuccess")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this æŒ‡ä»£ XHR å¯¹è±¡")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this.responseText ä¿å­˜æ¥è‡ªæœåŠ¡å™¨çš„å“åº”å†…å®¹")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nasyncRequestObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handleSuccess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚æˆåŠŸæ—¶æ‰§è¡Œ handleSuccess å‡½æ•°")]),t._v("\n")])])]),n("p",[t._v("âš ï¸ ä½¿ç”¨ XHR å¯¹è±¡çš„ "),n("code",[t._v(".responseText")]),t._v(" å±æ€§ä»¥è·å–å“åº”çš„æ–‡æœ¬ï¼Œå¦‚ç½‘é¡µçš„ HTML æ–‡ä»¶ã€‚")]),t._v(" "),n("h4",{attrs:{id:"å¤„ç†é”™è¯¯-onerror"}},[t._v("å¤„ç†é”™è¯¯ onerror")]),t._v(" "),n("p",[t._v("XHR å¯¹è±¡ "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestEventTarget/onerror",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("onerror")]),t._v(" å±æ€§"),n("OutboundLink")],1),t._v("æ˜¯è¯·æ±‚æ— æ³•å®ç°æ—¶æ‰è°ƒç”¨çš„å‡½æ•°ï¼Œå¯ä»¥è®¾ç½®è¯·æ±‚å¤±è´¥æ—¶æ‰§è¡Œçš„æ“ä½œ")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("XMLHttpRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onerror "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleError")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å‡ºç°é”™è¯¯ ğŸ˜'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nasyncRequestObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onerror "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handleError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚å¤±è´¥æ—¶æ‰§è¡Œ handleError å‡½æ•°")]),t._v("\n")])])]),n("h4",{attrs:{id:"å“åº”ç±»å‹"}},[t._v("å“åº”ç±»å‹")]),t._v(" "),n("p",[t._v("é™¤äº†è®¿é—®æœåŠ¡å™¨è·å–ç½‘ç«™çš„ HTML æ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è·å–å…¶ä»–æ ¼å¼çš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨ "),n("code",[t._v("xhr")]),t._v(" å¯¹è±¡å±æ€§ "),n("code",[t._v("xhr.responseType")]),t._v(" ï¼ˆé¢„å…ˆï¼Œä½¿ç”¨æ–¹æ³• "),n("code",[t._v("xhr.send()")]),t._v(" å‘é€è¯·æ±‚ä¹‹å‰ï¼‰è®¾ç½®å“åº”æ ¼å¼ï¼Œä»¥ä¾¿ JavaScript å¯¹å“åº”ä½“è¿›è¡Œåˆé€‚çš„å¤„ç†ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v('""')]),t._v("ï¼ˆé»˜è®¤ï¼‰ å“åº”æ ¼å¼ä¸ºå­—ç¬¦ä¸²ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v('"text"')]),t._v(" å“åº”æ ¼å¼ä¸ºå­—ç¬¦ä¸²ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v('"arraybuffer"')]),t._v(" å“åº”æ ¼å¼ä¸º "),n("code",[t._v("ArrayBuffer")])]),t._v(" "),n("li",[n("code",[t._v('"blob"')]),t._v(" å“åº”æ ¼å¼ä¸º "),n("code",[t._v("Blob")])]),t._v(" "),n("li",[n("code",[t._v('"document"')]),t._v(" å“åº”æ ¼å¼ä¸º XML documentï¼ˆå¯ä»¥ä½¿ç”¨ XPath å’Œå…¶ä»– XML æ–¹æ³•ï¼‰")]),t._v(" "),n("li",[n("code",[t._v('"json"')]),t._v(" å“åº”æ ¼å¼ä¸º JSONï¼ˆè‡ªåŠ¨è§£æï¼‰"),n("RouterLink",{attrs:{to:"/web/Network/JSON.html"}},[t._v("JSON")]),t._v(" æ˜¯ç½‘ç»œä¼ è¾“å¸¸è§çš„æ•°æ®æ ¼å¼")],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/article/xmlhttprequest/example/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¢„è®¾è¿”å›æ•°æ®ç±»å‹")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”±äºé¢„è®¾äº†è¿”å›çš„æ•°æ®ç±»å‹ä¸º JSONï¼ŒJavaScript è‡ªåŠ¨è§£æå“åº”")]),t._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" responseObj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("responseObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Hello, world!")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScript å†…å»ºçš„å‡½æ•° "),n("code",[t._v("JSON.parse()")]),t._v(" ï¼ˆæ‰‹åŠ¨ï¼‰è§£æ JSON æ•°æ®å¹¶è½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleSuccess")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨å‡½æ•° JSON.parse() å°†æ•°æ®ä» JSON æ ¼å¼è½¬æ¢ä¸º JavaScript å¯¹è±¡")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nasyncRequestObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handleSuccess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ åœ¨æ—§çš„è„šæœ¬ä¸­ï¼Œå¯èƒ½ä¼šçœ‹åˆ° "),n("code",[t._v("xhr.responseText")]),t._v("ï¼Œç”šè‡³ä¼šçœ‹åˆ° "),n("code",[t._v("xhr.responseXML")]),t._v(" å±æ€§ã€‚å®ƒä»¬æ˜¯ç”±äºå†å²åŸå› è€Œå­˜åœ¨çš„ï¼Œä»¥è·å–å­—ç¬¦ä¸²æˆ– XML æ–‡æ¡£ã€‚å¦‚ä»Šåº”è¯¥é€šè¿‡å±æ€§ "),n("code",[t._v("xhr.responseType")]),t._v(" è®¾ç½®æ ¼å¼ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å±æ€§ "),n("code",[t._v("xhr.response")]),t._v(" è®¿é—®ä¸åŒæ•°æ®ã€‚")]),t._v(" "),n("h2",{attrs:{id:"fetch"}},[t._v("fetch")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä½¿ç”¨ Fetch - Web API æ¥å£å‚è€ƒ | MDN"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("ç°ä»£é€šç”¨çš„å‘é€ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•æ˜¯ Fetchï¼Œè¿™æ˜¯æ–°çš„ JavaScript API æ—¨åœ¨è®©èµ„æºè¯·æ±‚ï¼ˆé€šå¸¸æ˜¯ç½‘ç»œè¯·æ±‚ï¼‰ç®€å•å¾ˆå¤šï¼Œ"),n("strong",[t._v("å…¶æ ¸å¿ƒæ˜¯åŸºäº "),n("code",[t._v("promise")]),t._v(" å¤„ç†å¼‚æ­¥è¯·æ±‚")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("å‚æ•°è¯´æ˜ï¼š")]),t._v(" "),n("ul",[n("li",[n("strong",[n("code",[t._v("url")])]),t._v(" è¦è®¿é—®çš„ URLã€‚")]),t._v(" "),n("li",[n("strong",[n("code",[t._v("options")])]),t._v(" å¯é€‰å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªç§°ä¸º init å¯¹è±¡/é…ç½®å¯¹è±¡ï¼Œå…·æœ‰å±æ€§ "),n("code",[t._v("method")]),t._v("ï¼Œ"),n("code",[t._v("header")]),t._v(" ç­‰ï¼Œç”¨äºè®¾ç½® HTTP è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯ã€‚")])]),t._v(" "),n("p",[t._v("å…¸å‹çš„ fetch è¯·æ±‚ç”±ä¸¤ä¸ª "),n("code",[t._v("await")]),t._v(" è°ƒç”¨ç»„æˆæˆ–ä»¥ "),n("code",[t._v("promise")]),t._v(" å½¢å¼")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½¢å¼ä¸€ï¼šä½¿ç”¨ await å…³é”®å­—")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æ response header")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°† body è¯»å–ä¸º json")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½¢å¼äºŒï¼šä½¿ç”¨ promise é“¾å¼è°ƒç”¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* process result */")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("é€šè¿‡ Fetch å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”çš„è¿‡ç¨‹ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("åˆ›å»º "),n("code",[t._v("fetch(url)")]),t._v(" å‡½æ•°å¹¶æä¾›äº† "),n("code",[t._v("url")]),t._v(" åæµè§ˆå™¨ä¼šç«‹å³å‘æœåŠ¡å™¨å‘é€ç½‘ç»œè¯·æ±‚ï¼Œï¼ˆæ— è®ºè¯·æ±‚æˆåŠŸä¸å¦ï¼‰å¹¶ç«‹å³è¿”å›ä¸€ä¸ª "),n("RouterLink",{attrs:{to:"/web/JavaScript/è¯­æ³•åŸºç¡€/promise.html"}},[t._v("Promise å¯¹è±¡")])],1)]),t._v(" "),n("li",[n("p",[t._v("å½“æœåŠ¡å™¨è¿”å›å“åº”å¤´ response header æ—¶ï¼Œ"),n("code",[t._v("promise")]),t._v(" å¯¹è±¡å°±ä½¿ç”¨å†…å»ºçš„ "),n("a",{attrs:{href:"https://fetch.spec.whatwg.org/#response-class",target:"_blank",rel:"noopener noreferrer"}},[t._v("Response"),n("OutboundLink")],1),t._v(" class å¯¹è±¡æ¥å¯¹å“åº”å¤´è¿›è¡Œè§£æï¼Œé€šè¿‡å“åº”å¤´æ¥æ£€æŸ¥ HTTP çŠ¶æ€ä»¥ç¡®å®šè¯·æ±‚æ˜¯å¦æˆåŠŸï¼ˆå½“å‰è¿˜æ²¡æœ‰å“åº”ä½“ response bodyï¼‰ã€‚")]),t._v(" "),n("ul",[n("li",[t._v("å¦‚æœ "),n("code",[t._v("fetch")]),t._v(" æ— æ³•å»ºç«‹ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œå¦‚ç½‘ç»œé—®é¢˜æˆ–æ˜¯è¯·æ±‚çš„ç½‘å€ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå³ "),n("code",[t._v("promise")]),t._v(" å°±ä¼š reject")]),t._v(" "),n("li",[t._v("å¦‚æœè¯·æ±‚æˆåŠŸ "),n("code",[t._v("promise")]),t._v(" å°±ä¼š resolveï¼Œåˆ™å¯ä»¥è®¿é—® "),n("strong",[n("code",[t._v("response")]),t._v(" å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("status")]),t._v("ï¼Œå±æ€§å€¼ä¼šåœ¨ç‰¹å®šèŒƒå›´ä¸­ï¼Œå¦‚ "),n("code",[t._v("200")])]),t._v("ï¼›å¦‚æœ HTTP çŠ¶æ€ç  200-299ï¼Œåˆ™ "),n("code",[t._v("request")]),t._v(" å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("ok")]),t._v(" ä¸º "),n("code",[t._v("true")])])]),t._v(" "),n("p",[t._v("âš ï¸ å¼‚å¸¸çš„ HTTP çŠ¶æ€ï¼Œå¦‚å“åº”å¤´ "),n("code",[t._v("status")]),t._v(" ä¸º "),n("code",[t._v("404")]),t._v(" æˆ– "),n("code",[t._v("500")]),t._v(" ä¹Ÿæ˜¯è¯·æ±‚æˆåŠŸçš„ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´å‡ºç° "),n("code",[t._v("error")])])]),t._v(" "),n("li",[n("p",[t._v("åŸºäº "),n("code",[t._v("promise")]),t._v(" å¯¹è±¡çš„çŠ¶æ€é€šè¿‡é“¾å¼è°ƒç”¨æ‰§è¡Œ"),n("strong",[t._v("æ–¹æ³• "),n("code",[t._v("then()")]),t._v(" æˆ– "),n("code",[t._v("catch()")])]),t._v("ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸå°±ä¼šè¿”å› "),n("code",[t._v("response")]),t._v(" å¯¹è±¡ï¼Œå¯åŸºäº response body çš„æ•°æ®æ ¼å¼è°ƒç”¨ "),n("code",[t._v("response")]),t._v(" å¯¹è±¡çš„"),n("a",{attrs:{href:"#%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"}},[t._v("ä¸åŒæ–¹æ³•")]),t._v("è¿›è¡Œè§£æã€‚")])])]),t._v(" "),n("p",[t._v("ğŸ’¡ å¯è®¿é—® "),n("a",{attrs:{href:"http://caniuse.com/#feat=fetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("caniuse"),n("OutboundLink")],1),t._v(" æŸ¥çœ‹å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒ Fetch APIï¼Œå¦‚æœä½ çš„æµè§ˆå™¨ä¸æ”¯æŒåªéœ€å‘ä½ çš„é¡¹ç›®ä¸­æ·»åŠ  "),n("a",{attrs:{href:"https://github.com/github/fetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("polyfill"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("âš ï¸ Fetch è¯·æ±‚ä¾ç„¶éœ€è¦éµå®ˆ"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒæºç­–ç•¥"),n("OutboundLink")],1),t._v("çš„é™åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹åªèƒ½å¯¹ä¸åŠ è½½æ•°æ®åœ¨åŒä¸€ç½‘åŸŸä¸­çš„èµ„æºå’Œæ•°æ®å‘å‡ºè¯·æ±‚ã€‚")]),t._v(" "),n("h3",{attrs:{id:"request-header"}},[t._v("Request header")]),t._v(" "),n("p",[t._v("åœ¨å‡½æ•° "),n("code",[t._v("fetch()")]),t._v(" çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("header")]),t._v(" ä¸­è®¾ç½® HTTP è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" value\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ å¯ä»¥ä½¿ç”¨ Fetch API æä¾›çš„æ¥å£/æ„é€ å‡½æ•° "),n("code",[t._v("Headers")]),t._v(" åˆ›å»ºä¸€ä¸ª HTTP è¯·æ±‚å¤´ï¼Œä¸€èˆ¬æ­¥éª¤æ˜¯")]),t._v(" "),n("ol",[n("li",[t._v("ä½¿ç”¨æ„é€ å‡½æ•° "),n("code",[t._v("Header()")]),t._v(" åˆ›å»ºæ–° "),n("code",[t._v("header")]),t._v(" å¯¹è±¡")]),t._v(" "),n("li",[t._v("ï¼ˆä»¥é”®å€¼å¯¹çš„å½¢å¼ï¼Œç±»ä¼¼äº Mapï¼‰é€šè¿‡ "),n("code",[t._v("append()")]),t._v(" æ–¹æ³•å°†ä¿¡æ¯æ·»åŠ åˆ° "),n("code",[t._v("header")]),t._v(" å¯¹è±¡ä¸­")]),t._v(" "),n("li",[t._v("å°†è¯¥ "),n("code",[t._v("header")]),t._v(" å¯¹è±¡ä½œä¸ºï¼ˆ"),n("code",[t._v("fetch()")]),t._v(" å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("headers")]),t._v(" çš„å€¼")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" requestHeaders "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Headers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrequestHeaders"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" requestHeaders\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("âš ï¸ æœ‰ä¸€äº› header å¯¹è±¡çš„å±æ€§æ— æ³•è®¾ç½®ï¼Œè¿™äº› header å±æ€§ä¿è¯äº† HTTP çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ï¼Œæ‰€ä»¥å®ƒä»¬ä»…ç”±æµè§ˆå™¨æ§åˆ¶ï¼Œè¯¦è§ "),n("a",{attrs:{href:"https://fetch.spec.whatwg.org/#forbidden-header-name",target:"_blank",rel:"noopener noreferrer"}},[t._v("forbidden HTTP headers"),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Accept-Charset")]),t._v(", "),n("code",[t._v("Accept-Encoding")])]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Request-Headers")])]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Request-Method")])]),t._v(" "),n("li",[n("code",[t._v("Connection")])]),t._v(" "),n("li",[n("code",[t._v("Content-Length")])]),t._v(" "),n("li",[n("code",[t._v("Cookie")]),t._v(", "),n("code",[t._v("Cookie2")])]),t._v(" "),n("li",[n("code",[t._v("Date")])]),t._v(" "),n("li",[n("code",[t._v("DNT")])]),t._v(" "),n("li",[n("code",[t._v("Expect")])]),t._v(" "),n("li",[n("code",[t._v("Host")])]),t._v(" "),n("li",[n("code",[t._v("Keep-Alive")])]),t._v(" "),n("li",[n("code",[t._v("Origin")])]),t._v(" "),n("li",[n("code",[t._v("Referer")])]),t._v(" "),n("li",[n("code",[t._v("TE")])]),t._v(" "),n("li",[n("code",[t._v("Trailer")])]),t._v(" "),n("li",[n("code",[t._v("Transfer-Encoding")])]),t._v(" "),n("li",[n("code",[t._v("Upgrade")])]),t._v(" "),n("li",[n("code",[t._v("Via")])]),t._v(" "),n("li",[n("code",[t._v("Proxy-*")])]),t._v(" "),n("li",[n("code",[t._v("Sec-*")])])]),t._v(" "),n("h4",{attrs:{id:"fetch-api"}},[t._v("Fetch API")]),t._v(" "),n("p",[t._v("fetch æä¾›"),n("a",{attrs:{href:"https://zh.javascript.info/fetch-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¤šç§é€‰é¡¹"),n("OutboundLink")],1),t._v("ä»¥æ›´å¥½åœ°é…ç½®ç½‘ç»œè¯·æ±‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// POSTï¼ŒPUTï¼ŒDELETEï¼Œç­‰ã€‚")]),t._v("\n  headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å†…å®¹ç±»å‹ header å€¼é€šå¸¸æ˜¯è‡ªåŠ¨è®¾ç½®çš„")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–å†³äº request body")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain;charset=UTF-8"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// stringï¼ŒFormDataï¼ŒBlobï¼ŒBufferSourceï¼Œæˆ– URLSearchParams")]),t._v("\n  referrer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"about:client"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// æˆ– "" ä»¥ä¸å‘é€ Referer headerï¼Œ')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ–è€…æ˜¯å½“å‰æºçš„ url")]),t._v("\n  referrerPolicy"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no-referrer-when-downgrade"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// no-referrerï¼Œoriginï¼Œsame-origin...")]),t._v("\n  mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cors"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// same-originï¼Œno-cors")]),t._v("\n  credentials"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"same-origin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// omitï¼Œinclude")]),t._v("\n  cache"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// no-storeï¼Œreloadï¼Œno-cacheï¼Œforce-cacheï¼Œæˆ– only-if-cached")]),t._v("\n  redirect"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"follow"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// manualï¼Œerror")]),t._v("\n  integrity"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ä¸€ä¸ª hashï¼Œåƒ "sha256-abcdef1234567890"')]),t._v("\n  keepalive"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  signal"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// AbortController æ¥ä¸­æ­¢è¯·æ±‚")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" window "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// null")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"æ›´æ”¹-http-æ–¹æ³•"}},[t._v("æ›´æ”¹ HTTP æ–¹æ³•")]),t._v(" "),n("p",[t._v("Fetch è¯·æ±‚çš„é»˜è®¤ HTTP æ–¹æ³•æ˜¯ GETï¼Œå¯ä»¥é€šè¿‡ "),n("code",[t._v("fetch()")]),t._v(" çš„é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("method")]),t._v(" è®¾ç½®å…¶ä»–çš„ HTTP æ–¹æ³•")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ POST æ–¹æ³•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å¦‚æœä½¿ç”¨ POST å‘é€ç½‘ç»œè¯·æ±‚ï¼Œåˆ™éœ€è¦æä¾› è¯·æ±‚ä½“ request bodyï¼Œé€šè¿‡ "),n("code",[t._v("fetch()")]),t._v(" çš„é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("body")]),t._v(" è¿›è¡Œè®¾ç½®")]),t._v(" "),n("p",[n("strong",[n("code",[t._v("body")])]),t._v(" å±æ€§å€¼å¯ä»¥æœ‰å¤šç§æ•°æ®ç±»å‹ï¼Œå¸¸è§çš„æ ¼å¼å¦‚ä¸‹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬ä»¥ JSON æ ¼å¼è¿›è¡Œç¼–ç ï¼ˆæœ€å¸¸ç”¨ï¼‰")]),t._v(" "),n("li",[n("code",[t._v("FormData")]),t._v(" å¯¹è±¡ï¼Œä»¥ "),n("code",[t._v("form/multipart")]),t._v(" å½¢å¼å‘é€æ•°æ®")]),t._v(" "),n("li",[n("code",[t._v("Blob")]),t._v("/"),n("code",[t._v("BufferSource")]),t._v(" å‘é€äºŒè¿›åˆ¶æ•°æ®")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zh.javascript.info/url",target:"_blank",rel:"noopener noreferrer"}},[t._v("URLSearchParams"),n("OutboundLink")],1),t._v(" ä»¥ "),n("code",[t._v("x-www-form-urlencoded")]),t._v(" ç¼–ç å½¢å¼å‘é€æ•°æ®ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»¥ JSON å½¢å¼å‘é€ user å¯¹è±¡")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'John'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  surname"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Smith'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/article/fetch/post/user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json;charset=utf-8'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// User saved.")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ è¯·æ³¨æ„å¦‚æœè¯·æ±‚çš„ "),n("code",[t._v("body")]),t._v(" æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ "),n("code",[t._v("Content-Type")]),t._v(" ä¼šé»˜è®¤è®¾ç½®ä¸º "),n("code",[t._v("text/plain;charset=UTF-8")]),t._v("ï¼›ä½†æ˜¯å½“è¦å‘é€ JSON æ—¶ï¼Œéœ€è¦å°† "),n("code",[t._v("headers")]),t._v(" çš„å±æ€§ "),n("code",[t._v("Content-Type")]),t._v(" è®¾ç½®ä¸º "),n("code",[t._v("application/json")]),t._v("ï¼Œå› ä¸ºè¿™æ˜¯ JSON ç¼–ç çš„æ•°æ®çš„æ­£ç¡®çš„ "),n("code",[t._v("Content-Type")]),t._v("ã€‚")]),t._v(" "),n("h4",{attrs:{id:"formdata"}},[t._v("FormData")]),t._v(" "),n("p",[t._v("åœ¨å•†ä¸šç½‘ç«™ä¸­æœ€å¸¸è§å’Œå®ç”¨çš„æ•°æ®ä¼ è¾“/è¯·æ±‚å°±æ˜¯è¡¨å•æ•°æ®ï¼Œä½¿ç”¨ "),n("a",{attrs:{href:"https://xhr.spec.whatwg.org/#interface-formdata",target:"_blank",rel:"noopener noreferrer"}},[t._v("FormData"),n("OutboundLink")],1),t._v(" å¯¹è±¡å¯ä»¥æä¾›å¸®åŠ©ã€‚")]),t._v(" "),n("p",[t._v("FormData æ˜¯ HTML è¡¨å•æ•°æ®çš„å¯¹è±¡ï¼Œé€šè¿‡æ„é€ å‡½æ•° "),n("code",[t._v("FormData()")]),t._v(" åˆ›å»ºï¼Œå¯ä»¥æä¾› HTML å…ƒç´  "),n("code",[t._v("form")]),t._v(" ä½œä¸ºå…¶å‚æ•°ï¼Œè¿™æ · FormData å¯¹è±¡ä¼šè‡ªåŠ¨æ•æŠ“å…¶ä¸­çš„è¡¨å•å­—æ®µ/æ§ä»¶ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" formData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("form"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ å‘æœåŠ¡å™¨ä¼ é€’ "),n("code",[t._v("FormData")]),t._v(" å¯¹è±¡æ—¶ï¼Œå¦‚ä½¿ç”¨æ–¹æ³•"),n("code",[t._v("fetch()")]),t._v("ï¼ˆå°†å…¶è®¾ç½®ä¸ºå‡½æ•° "),n("code",[t._v("fetch()")]),t._v(" çš„ç¬¬äºŒä¸ªå‚æ•°é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("body")]),t._v(" å€¼ï¼‰ï¼Œå®ƒä¼šè¢«ç¼–ç å¹¶å‘é€å‡ºå»ï¼ˆè¿™ä¸ªç¼–ç å…è®¸å‘é€æ–‡ä»¶ï¼Œå› æ­¤ "),n("code",[t._v('<input type="file">')]),t._v(" å­—æ®µä¹Ÿèƒ½è¢«å‘é€ï¼‰ï¼Œå¹¶å¸¦æœ‰ "),n("code",[t._v("Content-Type: multipart/form-data")]),t._v("ï¼ˆå› æ­¤ä¸éœ€è¦è®¾ç½® "),n("code",[t._v("fetch()")]),t._v(" ç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("Content-Type")]),t._v("ï¼‰ï¼Œè¿™æ ·ä»æœåŠ¡å™¨è§’åº¦æ¥çœ‹ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„è¡¨å•æäº¤ã€‚")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("formElem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("John"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("surname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Smith"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  formElem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onsubmit")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/article/formdata/post/user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formElem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€è¡¨å• formElem")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¿®æ”¹ "),n("code",[t._v("FormData")]),t._v(" ä¸­çš„å­—æ®µ/æ§ä»¶")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("formData.append(name, value)")]),t._v(" æ·»åŠ å…·æœ‰ç»™å®š "),n("code",[t._v("name")]),t._v(" å’Œ "),n("code",[t._v("value")]),t._v(" çš„è¡¨å•å­—æ®µï¼Œ")]),t._v(" "),n("li",[n("code",[t._v("formData.append(name, blob, fileName)")]),t._v(" æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ç±»å‹å­—æ®µï¼ˆåŠ¨æ€ç”Ÿæˆçš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼Œç›¸å½“äº "),n("code",[t._v('<input type="file">')]),t._v("ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° "),n("code",[t._v("fileName")]),t._v(" è®¾ç½®æ–‡ä»¶åï¼ˆè€Œä¸æ˜¯è¡¨å•å­—æ®µåï¼‰ï¼Œå®ƒæ˜¯ç”¨æˆ·æ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶çš„åç§°")]),t._v(" "),n("li",[n("code",[t._v("formData.delete(name)")]),t._v(" ç§»é™¤å¸¦æœ‰ç»™å®š "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µ")]),t._v(" "),n("li",[n("code",[t._v("formData.get(name)")]),t._v(" è·å–å¸¦æœ‰ç»™å®š "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µå€¼")]),t._v(" "),n("li",[n("code",[t._v("formData.has(name)")]),t._v(" å¦‚æœå­˜åœ¨å¸¦æœ‰ç»™å®š "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µï¼Œåˆ™è¿”å› "),n("code",[t._v("true")]),t._v("ï¼Œå¦åˆ™è¿”å› "),n("code",[t._v("false")])])]),t._v(" "),n("p",[t._v("ğŸ’¡ ä»æŠ€æœ¯ä¸Šæ¥è®²ï¼Œä¸€ä¸ªè¡¨å•å¯ä»¥åŒ…å«å¤šä¸ªå…·æœ‰ç›¸åŒ "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µï¼Œå› æ­¤å¤šæ¬¡è°ƒç”¨ "),n("code",[t._v("append")]),t._v(" å°†ä¼šæ·»åŠ å¤šä¸ªå…·æœ‰ç›¸åŒåç§°çš„å­—æ®µã€‚")]),t._v(" "),n("p",[t._v("è€Œç±»ä¼¼äº "),n("code",[t._v("append")]),t._v(" çš„æ–¹æ³• "),n("code",[t._v("set")]),t._v(" "),n("strong",[t._v("ç§»é™¤æ‰€æœ‰å…·æœ‰ç»™å®š "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µï¼Œç„¶åé™„åŠ ä¸€ä¸ªæ–°å­—æ®µ")]),t._v("ï¼Œå› æ­¤å®ƒç¡®ä¿äº†åªæœ‰ä¸€ä¸ªå…·æœ‰è¿™ç§ "),n("code",[t._v("name")]),t._v(" çš„å­—æ®µ")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("formData.set(name, value)")]),t._v("ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v("formData.set(name, blob, fileName)")]),t._v("ã€‚")])]),t._v(" "),n("p",[t._v("ğŸ’¡ å¯ä»¥ä½¿ç”¨ "),n("code",[t._v("for..of")]),t._v(" å¾ªç¯è¿­ä»£ formData å­—æ®µ")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" formData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nformData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nformData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡è§£æ„è·å– key/value å¯¹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" formData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" = ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// key1=value1ï¼Œç„¶åæ˜¯ key2=value2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"ä¸‹è½½è¿›åº¦"}},[t._v("ä¸‹è½½è¿›åº¦")]),t._v(" "),n("p",[t._v("é€šè¿‡æ–¹æ³• "),n("code",[t._v("fetch()")]),t._v(" å‘é€çš„ç½‘ç»œè¯·æ±‚ï¼Œæ”¯æŒä½¿ç”¨ "),n("code",[t._v("response.body")]),t._v(" çš„æ–¹æ³•è·Ÿè¸ªä¸‹è½½è¿›åº¦ï¼Œ"),n("code",[t._v("response.body")]),t._v(" æ˜¯ "),n("a",{attrs:{href:"https://streams.spec.whatwg.org/#rs-class",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ReadableStream")]),t._v(" å¯¹è±¡"),n("OutboundLink")],1),t._v("ï¼Œç±»ä¼¼äº ä¸ "),n("code",[t._v("response.text()")]),t._v("ï¼Œ"),n("code",[t._v("response.json()")]),t._v(" å’Œå…¶ä»–æ–¹æ³•å¯è¯»å–å“åº”ä½“ï¼Œä½† "),n("code",[t._v("response.body")]),t._v(" å¯ä»¥é€šè¿‡æ–¹æ³•ï¼Œå¦‚ "),n("code",[t._v("read()")]),t._v(" é€å— chunk è¯»å–å¹¶ç›‘æ§ä¸‹è½½è¿›åº¦ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºä¸€ä¸ªæµè¯»å–å™¨ stream reader è¯»å–å“åº”ä½“ï¼Œä»£æ›¿ response.json() ä»¥åŠå…¶ä»–æ–¹æ³•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reader "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨å¾ªç¯ä¸­æ¥æ”¶å“åº”å— response chunkï¼Œå¹¶è¯»å–æ¯æ¬¡æ¥å—å—å­—èŠ‚çš„å¤§å°ï¼Œç›´åˆ°åŠ è½½å®Œæˆ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“æœ€åä¸€å—ä¸‹è½½å®Œæˆæ—¶ï¼Œdone å€¼ä¸º true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// value æ˜¯å—å­—èŠ‚")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" reader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Received ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" bytes")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("æ›´è¯¦ç»†åœ°æ§åˆ¶ä¸‹è½½è¿›åº¦ï¼ˆå¹¶å°†å“åº”å—ã€Œå¤åŸã€ä¸ºå“åº”ä½“ï¼‰çš„å®ä¾‹å¯æŸ¥çœ‹ "),n("a",{attrs:{href:"https://zh.javascript.info/fetch-progress",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetchï¼šä¸‹è½½è¿›åº¦"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("ğŸ’¡ åˆ°ç›®å‰ä¸ºæ­¢æ–¹æ³• "),n("code",[t._v("fetch")]),t._v(" æ— æ³•è·Ÿè¸ªä¸Šä¼ è¿›åº¦ï¼Œå¯ä½¿ç”¨æ–¹æ³• "),n("code",[t._v("XMLHttpReques")]),t._v(" å‘é€ç½‘ç»œè¯·æ±‚ä»¥ç›‘å¬ä¸Šä¼ è¿›åº¦")]),t._v(" "),n("h3",{attrs:{id:"ä¸­æ­¢è¯·æ±‚-2"}},[t._v("ä¸­æ­¢è¯·æ±‚")]),t._v(" "),n("p",[t._v("æ–¹æ³• "),n("code",[t._v("fetch")]),t._v(" æ ¸å¿ƒæ˜¯åŸºäº promise å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œå¦‚æœæƒ³ä¸­æ­¢ç½‘ç»œè¯·æ±‚ï¼Œä½†åœ¨ JavaScript é€šå¸¸å¹¶æ²¡æœ‰ã€Œä¸­æ­¢ã€ promise çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿç”¨ç‰¹æ®Šçš„å†…å»ºå¯¹è±¡ AbortController æ¥å®ç°ã€‚")]),t._v(" "),n("p",[t._v("å†…å»ºå¯¹è±¡ AbortController å¯ç”¨äºä¸­æ­¢å¼‚æ­¥ä»»åŠ¡ï¼ŒåŒ…æ‹¬ "),n("code",[t._v("fetch()")]),t._v(" å‘èµ·çš„ç½‘ç»œè¯·æ±‚ã€‚ä½¿ç”¨æ„å»ºå‡½æ•° "),n("code",[t._v("AbortController")]),t._v(" åˆ›å»ºæ§åˆ¶å™¨ï¼Œè¯¥å¯¹è±¡åªæœ‰å•ä¸€çš„æ–¹æ³• "),n("code",[t._v("abort()")]),t._v(" å’Œå•ä¸€å±æ€§ "),n("code",[t._v("signal")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å½“æ§åˆ¶å™¨è°ƒç”¨ "),n("code",[t._v("abort()")]),t._v(" æ–¹æ³•æ—¶ï¼Œäº‹ä»¶ "),n("code",[t._v("abort")]),t._v(" å°±ä¼šåœ¨ "),n("code",[t._v("controller.signal")]),t._v(" ä¸Šè§¦å‘ï¼ŒåŒæ—¶ "),n("code",[t._v("controller.signal.aborted")]),t._v(" å±æ€§å˜ä¸º "),n("code",[t._v("true")]),t._v("ã€‚å› æ­¤å¯ä»¥åœ¨ "),n("code",[t._v("controller.signal")]),t._v(" ä¸Šè®¾ç½®ç›‘å¬å™¨æ¥è·Ÿè¸ªäº‹ä»¶ "),n("code",[t._v("abort")]),t._v("ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ç¨‹åºä¸­æ­¢ "),n("code",[t._v("promise")]),t._v("ï¼›è€Œæ–¹æ³• "),n("code",[t._v("fetch")]),t._v(" åœ¨å†…éƒ¨é›†æˆäº†å®ƒï¼Œåªè¦å°† "),n("code",[t._v("controller.signal")]),t._v(" ä½œä¸ºå‡½æ•° "),n("code",[t._v("fetch()")]),t._v(" çš„ç¬¬äºŒä¸ªå‚æ•°é…ç½®å¯¹è±¡çš„å±æ€§ "),n("code",[t._v("signal")]),t._v(" çš„å€¼å³å¯å®ç°ç›‘æ§ã€‚")]),t._v(" "),n("p",[t._v("ä¸­æ­¢æ–¹æ³• "),n("code",[t._v("fetch")]),t._v(" å‘èµ·çš„ç½‘ç»œè¯·æ±‚æ­¥éª¤ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" controller "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("å°† "),n("code",[t._v("signal")]),t._v(" å±æ€§ä¼ é€’ç»™ "),n("code",[t._v("fetch")]),t._v(" é€‰é¡¹ï¼Œå®ƒä¼šç›‘å¬ "),n("code",[t._v("signal")]),t._v(" ä¸Šçš„äº‹ä»¶ "),n("code",[t._v("abort")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" controller "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  signal"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("è°ƒç”¨ "),n("code",[t._v("controller.abort()")]),t._v(" æ¥ä¸­æ­¢")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),n("p",[t._v("ğŸ’¡ å½“ä¸€ä¸ªå¼‚æ­¥ç¨‹åºè¢«ä¸­æ­¢æ—¶ï¼Œpromise å°±ä¼šå˜æˆ reject çŠ¶æ€å¹¶è¿”å›ä¸€ä¸ª "),n("code",[t._v("AbortError")]),t._v(" å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥æ•æŠ“è¯¥å¼‚å¸¸å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 ç§’åä¸­æ­¢")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" controller "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/article/fetch-abort/demo/hang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    signal"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AbortError'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle abort()")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Aborted!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ AbortController æ˜¯"),n("strong",[t._v("å¯æ‰©å±•")]),t._v("çš„ï¼Œå³æ§åˆ¶å™¨å¯ä»¥åˆ†é…ç»™å¤šä¸ª fetch æˆ–å…¶ä»–å¼‚æ­¥ä»»åŠ¡ï¼ˆéœ€è¦æ‰‹åŠ¨è®¾ç½®ç›‘å¬å™¨æ¥ç›‘å¬äº‹ä»¶ "),n("code",[t._v("abort")]),t._v(" è§¦å‘ promise çŠ¶æ€å˜æˆ rejectï¼‰ï¼Œå®ç°ä¸€æ¬¡ä¸­æ­¢å¤šä¸ªç½‘ç»œè¯·æ±‚ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" urls "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¦å¹¶è¡Œ fetch çš„ url åˆ—è¡¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" controller "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbortController")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ourJob "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¶ä»–å¼‚æ­¥ä»»åŠ¡")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abort'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®äº‹ä»¶ abort ç›‘å¬å™¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fetchJobs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" urls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fetches")]),t._v("\n  signal"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" controller"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signal\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾…å®Œæˆæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ä»»åŠ¡å’Œ fetch å‘èµ·çš„ç½‘ç»œè¯·æ±‚")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" results "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("fetchJobs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ourJob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœ controller.abort() è¢«ä»å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ƒå°†ä¸­æ­¢æ‰€æœ‰ fetch å’Œ ourJob")]),t._v("\n")])])]),n("h3",{attrs:{id:"å¤„ç†ç¨‹åº"}},[t._v("å¤„ç†ç¨‹åº")]),t._v(" "),n("p",[t._v("Fetch åŸºäº Promiseï¼Œå½“æˆ‘ä»¬å‘å‡º Fetch è¯·æ±‚æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨è¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œç›‘å¬å“åº”ï¼Œå³é€šè¿‡é“¾å¼è°ƒç”¨ä¸ºè¯¥ promise å¯¹è±¡è®¾ç½®æ–¹æ³• "),n("code",[t._v("then()")]),t._v(" æˆ– "),n("code",[t._v("catch()")])]),t._v(" "),n("p",[t._v("å½“ Fetch è¯·æ±‚ "),n("code",[t._v("resolve")]),t._v(" æ—¶å°±ä¼šå°† "),n("code",[t._v("Response")]),t._v(" å¯¹è±¡ä½œä¸º promise å¯¹è±¡çš„ç»“æœï¼ŒåŒæ—¶ä¼šè°ƒç”¨ "),n("code",[t._v(".then()")]),t._v(" æ–¹æ³•æ‰§è¡Œå¤„ç†ç¨‹åºï¼›å¦‚æœè¯·æ±‚å‘ç”Ÿé”™è¯¯å°±ä¼šè°ƒç”¨ "),n("code",[t._v(".catch()")]),t._v(" æ–¹æ³•å¹¶æ‰§è¡Œå¤„ç†ç¨‹åºã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å“åº”çš„ä¸»ä½“æ•°æ®æ ¼å¼ä¸º JSON æ—¶ï¼Œå¯¹å“åº”å¯¹è±¡è°ƒç”¨æ–¹æ³• json()")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// response ä¸ºå“åº”å¯¹è±¡ï¼Œä»ä¸­æå–å“åº”ï¼ˆä¸»ä½“ï¼‰æ•°æ®")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ "),n("code",[t._v("Response")]),t._v(" å¯¹è±¡ä¸Šæœ‰å¤šç§åŸºäº promise çš„"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch#Body",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³•"),n("OutboundLink")],1),t._v("ï¼Œæ¯ä¸ªæ–¹æ³•å¯¹åº”å¤„ç†"),n("a",{attrs:{href:"https://davidwalsh.name/fetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸åŒæ•°æ®ç±»å‹"),n("OutboundLink")],1),t._v("ä»¥è®¿é—® response body")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("response.json()")]),t._v(" å°† response è§£æä¸º JSON")]),t._v(" "),n("li",[n("code",[t._v("response.text()")]),t._v(" è¯»å– responseï¼Œå¹¶ä»¥æ–‡æœ¬å½¢å¼è¿”å› response")]),t._v(" "),n("li",[n("code",[t._v("response.blob()")]),t._v(" ä»¥ "),n("a",{attrs:{href:"https://zh.javascript.info/blob",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blob"),n("OutboundLink")],1),t._v("ï¼ˆå…·æœ‰ç±»å‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰å½¢å¼è¿”å›ï¼Œå¦‚å›¾ç‰‡æ–‡ä»¶")]),t._v(" "),n("li",[n("code",[t._v("response.formData()")]),t._v(" ä»¥ "),n("code",[t._v("FormData")]),t._v(" å¯¹è±¡çš„å½¢å¼è¿”å› response")]),t._v(" "),n("li",[n("code",[t._v("response.arrayBuffer()")]),t._v(" ä»¥ "),n("a",{attrs:{href:"https://zh.javascript.info/arraybuffer-binary-arrays",target:"_blank",rel:"noopener noreferrer"}},[t._v("ArrayBuffer"),n("OutboundLink")],1),t._v("ï¼ˆä½çº§åˆ«çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰å½¢å¼è¿”å› response")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ promise é“¾å¼è°ƒç”¨è·å– JSON æ ¼å¼çš„ response body")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("commits")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("commits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("login"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ awite æ–¹æ³•ï¼Œè·å– JSON æ ¼å¼çš„ response body")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" commits "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯»å– response bodyï¼Œå¹¶å°†å…¶è§£æä¸º JSON")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("commits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("login"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*---------- åˆ†å‰²çº¿ ----------*/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨æ–¹æ³• response.text() è·å–çº¯æ–‡æœ¬æ ¼å¼çš„ response body")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" text "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°† response body è¯»å–ä¸ºæ–‡æœ¬")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆªå–å‰80ä¸ªå­—ç¬¦")]),t._v("\n")])])]),n("p",[t._v("âš ï¸ åªèƒ½é€‰æ‹©ä¸€ç§è¯»å– body çš„æ–¹æ³•ï¼Œå¦‚ä½¿ç”¨äº† "),n("code",[t._v("response.text()")]),t._v(" æ–¹æ³•æ¥è·å– responseï¼Œé‚£ä¹ˆå¦‚æœå†ç”¨ "),n("code",[t._v("response.json()")]),t._v(" åˆ™ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸º body å†…å®¹å·²ç»è¢«å¤„ç†è¿‡äº†ã€‚")]),t._v(" "),n("h3",{attrs:{id:"response-header"}},[t._v("Response header")]),t._v(" "),n("p",[t._v("ä½¿ç”¨å“åº”å¯¹è±¡å±æ€§ "),n("code",[t._v("response.headers")]),t._v(" è®¿é—® Response header å“åº”è¡¨å¤´ï¼Œå®ƒç±»ä¼¼äº Map ï¼ˆä½†ä¸æ˜¯çœŸæ­£çš„ Mapï¼‰å…·æœ‰ç±»ä¼¼çš„æ–¹æ³•ï¼Œå³æŒ‰é”®/åç§° name è·å–å„ä¸ªå€¼ headerï¼Œæˆ–ä½¿ç”¨å¾ªç¯ç»“æ„è¿­ä»£å…¶ä¸­çš„å…ƒç´ ã€‚")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("let response = await fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits');\n\n// è·å–ä¸€ä¸ª header\nalert(response.headers.get('Content-Type')); // application/json; charset=utf-8\n\n// è¿­ä»£æ‰€æœ‰ header\nfor (let [key, value] of response.headers) {\n  alert(`${key} = ${value}`);\n}\n")])])]),n("h2",{attrs:{id:"è·¨æºè¯·æ±‚"}},[t._v("è·¨æºè¯·æ±‚")]),t._v(" "),n("p",[t._v("Cross-Origin Resource Sharingï¼ŒCORS è·¨æºèµ„æºå…±äº«æ˜¯æŒ‡é‚£äº›å‘é€åˆ°å…¶ä»–åŸŸï¼ˆå³ä½¿æ˜¯å­åŸŸï¼‰ã€åè®®æˆ–ç«¯å£çš„è¯·æ±‚ï¼Œéœ€è¦è¿œç¨‹æœåŠ¡å™¨å¿…é¡»æä¾›è¡¨ç¤ºå…è®¸è·å–çš„ header "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ è¿™é‡Œçš„æº origin åŒ…æ‹¬åŸŸ domain/ç«¯å£ port/åè®® protocol çš„ç»„åˆï¼Œåªè¦ç½‘ç»œè¯·æ±‚ä¸­å…¶ä¸­ä¹‹ä¸€ä¸ç›®å‰åŠ è½½æ•°æ®æ¥æºä¸åŒå°±æ˜¯"),n("strong",[t._v("è·¨æº")]),t._v("ã€‚èµ·åˆå‡ºäºå®‰å…¨è€ƒè™‘è·¨æºè¯·æ±‚ CORS æ˜¯è¢«ç¦æ­¢çš„ï¼Œä¸ºäº†ä¿æŠ¤äº’è”ç½‘ä»¥å…å—é»‘å®¢æ”»å‡»ï¼Œå¦‚ä½äº https://facebook.com çš„è„šæœ¬æ— æ³•è¯»å–ä½äº https://gmail.com çš„ç”¨æˆ·é‚®ç®±çš„å†…å®¹ã€‚ä½†ä¸ºäº†èµ„æºäº’é€šæµåŠ¨éœ€è¦åœ¨å¿…è¦æ—¶æ‰“ç ´è¿™ç§é™åˆ¶ï¼Œç»è¿‡é•¿æ—¶é—´çš„è®¨è®ºè·¨æºè¯·æ±‚è¢«å…è®¸äº†ï¼Œä½†æ˜¯ä»»ä½•æ–°åŠŸèƒ½éƒ½éœ€è¦æœåŠ¡å™¨æ˜ç¡®å…è®¸ï¼Œå³æœåŠ¡å™¨å¿…é¡»æä¾›è¡¨ç¤ºå…è®¸è·å–çš„ header "),n("code",[t._v("Access-Control-Allow-Origin")])]),t._v(" "),n("p",[t._v("æœ‰ä¸¤ç§ç±»å‹çš„è·¨åŸŸè¯·æ±‚ï¼šç®€å•çš„è¯·æ±‚å’Œæ‰€æœ‰å…¶ä»–è¯·æ±‚ã€‚"),n("strong",[t._v("æœ¬è´¨åŒºåˆ«åœ¨äºï¼Œå¯ä»¥ä½¿ç”¨ "),n("code",[t._v("<form>")]),t._v(" æˆ– "),n("code",[t._v("<script>")]),t._v(" è¿›è¡Œã€Œç®€å•è¯·æ±‚ã€ï¼Œè€Œæ— éœ€ä»»ä½•å…¶ä»–ç‰¹æ®Šæ–¹æ³•ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"ç®€å•è¯·æ±‚"}},[t._v("ç®€å•è¯·æ±‚")]),t._v(" "),n("p",[t._v("ä¸€ä¸ª "),n("a",{attrs:{href:"http://www.w3.org/TR/cors/#terminology",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç®€å•çš„è¯·æ±‚"),n("OutboundLink")],1),t._v(" æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„è¯·æ±‚")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://www.w3.org/TR/cors/#simple-method",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç®€å•çš„æ–¹æ³•"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("GET")]),t._v("ï¼Œ"),n("code",[t._v("POST")]),t._v(" æˆ– "),n("code",[t._v("HEAD")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://www.w3.org/TR/cors/#simple-header",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç®€å•çš„ header"),n("OutboundLink")],1),t._v(" ä»…å…è®¸è‡ªå®šä¹‰ä¸‹åˆ— headerï¼š\n"),n("ul",[n("li",[n("code",[t._v("Accept")]),t._v("ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v("Accept-Language")]),t._v("ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v("Content-Language")]),t._v("ï¼Œ")]),t._v(" "),n("li",[n("code",[t._v("Content-Type")]),t._v(" çš„å€¼ä¸º "),n("code",[t._v("application/x-www-form-urlencoded")]),t._v("ï¼Œ"),n("code",[t._v("multipart/form-data")]),t._v(" æˆ– "),n("code",[t._v("text/plain")]),t._v("ã€‚")])])])]),t._v(" "),n("p",[t._v("å¦‚æœä¸€ä¸ªè¯·æ±‚æ˜¯è·¨æºçš„ï¼Œæµè§ˆå™¨å§‹ç»ˆä¼šå‘ HTTP è¯·æ±‚æ·»åŠ  "),n("code",[t._v("Origin")]),t._v(" headerï¼Œå®ƒåŒ…å«äº†ç¡®åˆ‡çš„æº domain/protocol/port ä½†æ²¡æœ‰è·¯å¾„ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä» https://javascript.info/page è¯·æ±‚ https://anywhere.com/request çš„ header")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("request\nHost"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" anywhere"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\nOrigin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])]),n("p",[t._v("ç„¶åæœåŠ¡å™¨æ¥æ”¶åˆ°è¯¥è¯·æ±‚æ—¶å¯ä»¥æ£€æŸ¥ "),n("code",[t._v("Origin")]),t._v("ï¼Œå¦‚æœåŒæ„æ¥å—è¿™æ ·çš„è¯·æ±‚ï¼Œå°±ä¼šåœ¨å“åº”ä¸­æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„ header "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v("ï¼Œè¯¥ header åŒ…å«äº†å…è®¸çš„æºï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ˜¯ "),n("code",[t._v("https://javascript.info")]),t._v("ï¼‰æˆ–è€…ä¸€ä¸ªæ˜Ÿå· "),n("code",[t._v("*")]),t._v("ï¼Œç„¶åå“åº”æˆåŠŸï¼Œå¦åˆ™æŠ¥é”™ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¸¦æœ‰æœåŠ¡å™¨è®¸å¯çš„å“åº”")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OK")]),t._v("\nContent"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" charset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UTF")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nAccess"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Allow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Origin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info\n")])])]),n("p",[t._v("å¯¹äºè·¨æºè¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ JavaScript åªèƒ½è®¿é—®ã€Œç®€å•ã€response headerï¼Œè®¿é—®ä»»ä½•å…¶ä»– response header éƒ½å°†å¯¼è‡´ "),n("code",[t._v("error")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Cache-Control")])]),t._v(" "),n("li",[n("code",[t._v("Content-Language")])]),t._v(" "),n("li",[n("code",[t._v("Content-Type")])]),t._v(" "),n("li",[n("code",[t._v("Expires")])]),t._v(" "),n("li",[n("code",[t._v("Last-Modified")])]),t._v(" "),n("li",[n("code",[t._v("Pragma")])])]),t._v(" "),n("p",[t._v("âš ï¸ ä¸Šè¿°åˆ—è¡¨ä¸­æ²¡æœ‰ "),n("code",[t._v("Content-Length")]),t._v(" headerï¼Œå®ƒåŒ…å«å®Œæ•´çš„å“åº”é•¿åº¦ç”¨äºè·Ÿè¸ªä¸‹è½½è¿›åº¦ç™¾åˆ†æ¯”ã€‚è¦æˆäºˆ JavaScript å¯¹ä»»ä½•å…¶ä»– response header çš„è®¿é—®æƒé™ï¼ŒæœåŠ¡å™¨å¿…é¡»å‘é€ "),n("code",[t._v("Access-Control-Expose-Headers")]),t._v(" çš„ headerï¼Œå®ƒåŒ…å«ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„åº”è¯¥è¢«è®¾ç½®ä¸ºå¯è®¿é—®çš„éç®€å• header åç§°åˆ—è¡¨ã€‚")]),t._v(" "),n("p",[t._v("æµè§ˆå™¨æ‰®æ¼”å—è¢«ä¿¡ä»»çš„ä¸­é—´äººçš„è§’è‰²ï¼Œå†³å®šæ˜¯å¦å…è®¸è·¨æºè¯·æ±‚çš„å‘é€ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å®ƒç¡®ä¿å‘é€çš„è·¨æºè¯·æ±‚å¸¦æœ‰æ­£ç¡®çš„ "),n("code",[t._v("Origin")])]),t._v(" "),n("li",[t._v("å®ƒæ£€æŸ¥å“åº”ä¸­çš„è®¸å¯ "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v(" æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™å…è®¸ JavaScript è®¿é—®å“åº”ï¼Œå¦åˆ™å°†å¤±è´¥å¹¶æŠ¥é”™")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1112),alt:"CORS"}})]),t._v(" "),n("h3",{attrs:{id:"éç®€å•è¯·æ±‚"}},[t._v("éç®€å•è¯·æ±‚")]),t._v(" "),n("p",[t._v("é™¤äº†æ»¡è¶³ç®€å•è¯·æ±‚é™åˆ¶çš„ä¸¤ç§æ¡ä»¶çš„è¯·æ±‚ä»¥å¤–ï¼Œä»»ä½•å…¶ä»–è¯·æ±‚éƒ½è¢«è®¤ä¸ºæ˜¯ã€Œéç®€å•è¯·æ±‚ã€ï¼Œå¦‚å…·æœ‰ "),n("code",[t._v("PUT")]),t._v(" æ–¹æ³•æˆ– "),n("code",[t._v("API-Key")]),t._v(" HTTP-header çš„è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("ä¹‹å‰æ²¡æœ‰äººèƒ½å¤Ÿè®¾æƒ³ç½‘é¡µèƒ½å‘å‡ºè¿™äº›å¤æ‚çš„éç®€å•è¯·æ±‚ï¼Œå› æ­¤å½“æˆ‘ä»¬å°è¯•å‘é€ä¸€ä¸ªéç®€å•è¯·æ±‚æ—¶ï¼Œ"),n("strong",[t._v("æµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ªç‰¹æ®Šçš„ã€Œé¢„æ£€ã€preflight è¯·æ±‚åˆ°æœåŠ¡å™¨")]),t._v("ï¼Œä»¥è¯¢é—®æœåŠ¡å™¨æ˜¯å¦æ¥å—æ­¤ç±»è·¨æºè¯·æ±‚ï¼Œé™¤éæœåŠ¡å™¨æ˜ç¡®é€šè¿‡ header è¿›è¡Œç¡®è®¤ï¼Œå¦åˆ™éç®€å•è¯·æ±‚ä¸ä¼šè¢«å‘é€ã€‚")]),t._v(" "),n("p",[t._v("é¢„æ£€è¯·æ±‚ä½¿ç”¨ "),n("code",[t._v("OPTIONS")]),t._v(" æ–¹æ³•ï¼Œå®ƒæ²¡æœ‰ bodyï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ª headerï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Access-Control-Request-Method")]),t._v(" header å¸¦æœ‰éç®€å•è¯·æ±‚çš„æ–¹æ³•ã€‚")]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Request-Headers")]),t._v(" header æä¾›ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„éç®€å• HTTP-header åˆ—è¡¨ã€‚")])]),t._v(" "),n("p",[t._v("å¦‚æœæœåŠ¡å™¨åŒæ„å¤„ç†è¯·æ±‚é‚£ä¹ˆå®ƒä¼šè¿›è¡Œå“åº”ï¼Œæ­¤å“åº”çš„çŠ¶æ€ç åº”è¯¥ä¸º "),n("code",[t._v("200")]),t._v("ï¼Œæ²¡æœ‰ bodyï¼Œå…·æœ‰ headerï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Access-Control-Allow-Methods")]),t._v(" å¿…é¡»å…·æœ‰å…è®¸çš„æ–¹æ³•ã€‚")]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Allow-Headers")]),t._v(" å¿…é¡»å…·æœ‰ä¸€ä¸ªå…è®¸çš„ header åˆ—è¡¨ã€‚")]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Max-Age")]),t._v(" header å¯ä»¥æŒ‡å®šç¼“å­˜æ­¤æƒé™çš„ç§’æ•°ï¼Œå› æ­¤æµè§ˆå™¨ä¸æ˜¯å¿…é¡»ä¸ºæ»¡è¶³ç»™å®šæƒé™çš„åç»­è¯·æ±‚å‘é€é¢„æ£€ã€‚")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1113),alt:"No-simple requests"}})]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€éç®€å•è¯·æ±‚")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://site.com/service.json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PATCH'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–¹æ³• PATCH å¹¶éç®€å•è¯·æ±‚é™åˆ¶ä¸‰ä¸ªä¸­ä¹‹ä¸€")]),t._v("\n  headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Content-Type ä¸æ˜¯ç®€å•è¯·æ±‚é™åˆ¶ä¸‰ä¸ªä¸­ä¹‹ä¸€")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'API-Key'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret'")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å«æœ‰ API-Key header")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("éç®€å•è·¨åŸŸè¯·æ±‚æ­¥éª¤ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("åœ¨å‘é€è¯·æ±‚å‰ï¼Œæµè§ˆå™¨ä¼šè‡ªå·±å‘é€é¢„æ£€è¯·æ±‚ preflight request")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OPTIONS")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\nHost"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\nOrigin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info\nAccess"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Request"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PATCH")]),t._v("\nAccess"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Request"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Content"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Key\n")])])]),n("ul",[n("li",[t._v("æ–¹æ³•ï¼š"),n("code",[t._v("OPTIONS")])]),t._v(" "),n("li",[t._v("è·¯å¾„ä¸ä¸»è¯·æ±‚å®Œå…¨ç›¸åŒï¼š"),n("code",[t._v("/service.json")])]),t._v(" "),n("li",[t._v("ç‰¹æ®Šè·¨æºå¤´ï¼š\n"),n("ul",[n("li",[n("code",[t._v("Origin")]),t._v(" æ¥æºã€‚")]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Request-Method")]),t._v(" è¯·æ±‚æ–¹æ³•ã€‚")]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Request-Headers")]),t._v(" ä»¥é€—å·åˆ†éš”çš„ã€Œéç®€å•ã€header åˆ—è¡¨ã€‚")])])])]),t._v(" "),n("p",[t._v("ğŸ’¡ é¢„æ£€è¯·æ±‚å‘ç”Ÿåœ¨åå°ï¼Œå®ƒå¯¹ JavaScript ä¸å¯è§ã€‚JavaScript ä»…è·å–å¯¹ä¸»è¯·æ±‚çš„å“åº”ï¼Œå¦‚æœæ²¡æœ‰æœåŠ¡å™¨è®¸å¯ï¼Œåˆ™è·å¾—ä¸€ä¸ª errorã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æœåŠ¡åº”è¿”å›é¢„æ£€å“åº”")]),t._v(" "),n("p",[t._v("å½“æœåŠ¡åº”å“åº”çŠ¶æ€ "),n("code",[t._v("200")]),t._v(" å¹¶åŒ…æ‹¬ä»¥ä¸‹ header å°±è¡¨ç¤ºå…è®¸åç»­é€šä¿¡ï¼Œå¦åˆ™ä¼šè§¦å‘é”™è¯¯ã€‚")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Access-Control-Allow-Methods: PATCH")])]),t._v(" "),n("li",[n("code",[t._v("Access-Control-Allow-Headers: Content-Type,API-Key")]),t._v("ã€‚")])]),t._v(" "),n("p",[t._v("å½“æµè§ˆå™¨çœ‹åˆ° "),n("code",[t._v("PATCH")]),t._v(" åœ¨ "),n("code",[t._v("Access-Control-Allow-Methods")]),t._v(" ä¸­ï¼Œ"),n("code",[t._v("Content-Type,API-Key")]),t._v(" åœ¨åˆ—è¡¨ "),n("code",[t._v("Access-Control-Allow-Headers")]),t._v(" ä¸­ï¼Œå®ƒå°†å‘é€ä¸»è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ å¦‚æœæœåŠ¡å™¨å°†æ¥æœŸæœ›å…¶ä»–æ–¹æ³•å’Œ header å¯ä»¥é€šè¿‡æ·»åŠ åˆ°åˆ—è¡¨ä¸­æ¥é¢„å…ˆå…è®¸å®ƒä»¬")]),t._v(" "),n("div",{staticClass:"language-http extra-class"},[n("pre",{pre:!0,attrs:{class:"language-http"}},[n("code",[t._v("200 OK\n"),n("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Methods:")]),t._v(" PUT,PATCH,DELETE\n"),n("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Headers:")]),t._v(" API-Key,Content-Type,If-Modified-Since,Cache-Control\n"),n("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Max-Age:")]),t._v(" 86400\n")])])]),n("p",[t._v("ğŸ’¡ æ­¤å¤–é¢„æ£€å“åº”ä¼š"),n("strong",[t._v("ç¼“å­˜ä¸€æ®µæ—¶é—´")]),t._v("ï¼Œè¯¥æ—¶é—´ç”± "),n("code",[t._v("Access-Control-Max-Age")]),t._v(" header æŒ‡å®šï¼ˆ86400 ç§’ï¼Œä¸€å¤©ï¼‰ï¼Œå› æ­¤åç»­è¯·æ±‚å°†ä¸ä¼šå¯¼è‡´é¢„æ£€ã€‚å‡è®¾å®ƒä»¬ç¬¦åˆç¼“å­˜çš„é…é¢ï¼Œåˆ™å°†ç›´æ¥å‘é€å®ƒä»¬ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("é¢„æ£€æˆåŠŸåï¼Œæµè§ˆå™¨ç°åœ¨å‘å‡ºä¸»è¯·æ±‚ï¼Œå…¶ç®—æ³•ä¸ç®€å•è¯·æ±‚çš„ç®—æ³•ç›¸åŒï¼Œä¸»è¯·æ±‚å…·æœ‰ "),n("code",[t._v("Origin")]),t._v(" headerï¼ˆå› ä¸ºå®ƒæ˜¯è·¨æºçš„ï¼‰")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PATCH")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\nHost"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\nContent"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("json\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Key"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" secret\nOrigin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æœåŠ¡å™¨ä½œå‡ºä¸»å“åº”ï¼Œéœ€è¦æ·»åŠ  "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v("ï¼Œç„¶å JavaScript å¯ä»¥è¯»å–ä¸»æœåŠ¡å™¨å“åº”äº†ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Access"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Allow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Origin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"å‡­æ®"}},[t._v("å‡­æ®")]),t._v(" "),n("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨æºè¯·æ±‚ä¸ä¼šå¸¦æ¥ä»»ä½•å‡­æ®ï¼ˆcookies æˆ–è€… HTTP è®¤è¯ï¼ˆHTTP authenticationï¼‰ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("è¿™å¯¹äº HTTP è¯·æ±‚æ¥è¯´å¹¶ä¸å¸¸è§ã€‚é€šå¸¸ï¼Œå¯¹ "),n("code",[t._v("http://site.com")]),t._v(" çš„è¯·æ±‚é™„å¸¦æœ‰è¯¥åŸŸçš„æ‰€æœ‰ cookieã€‚ä½†æ˜¯ç”± JavaScript æ–¹æ³•å‘å‡ºçš„è·¨æºè¯·æ±‚æ˜¯ä¸ªä¾‹å¤–,å¦‚ "),n("code",[t._v("fetch('http://another.com')")]),t._v(" ä¸ä¼šå‘é€ä»»ä½• cookieï¼Œå³ä½¿é‚£äº› (!) å±äº "),n("code",[t._v("another.com")]),t._v(" åŸŸçš„ cookieã€‚")]),t._v(" "),n("p",[t._v("è¿™æ˜¯å› ä¸ºå…·æœ‰å‡­æ®çš„è¯·æ±‚æ¯”æ²¡æœ‰å‡­æ®çš„è¯·æ±‚è¦å¼ºå¤§å¾—å¤šã€‚å¦‚æœè¢«å…è®¸ï¼Œå®ƒä¼šä½¿ç”¨å®ƒä»¬çš„å‡­æ®æˆäºˆ JavaScript ä»£è¡¨ç”¨æˆ·è¡Œä¸ºå’Œè®¿é—®æ•æ„Ÿä¿¡æ¯çš„å…¨éƒ¨æƒåŠ›ã€‚å®ƒå¿…é¡»æ˜¾å¼åœ°å¸¦æœ‰å…è®¸è¯·æ±‚çš„å‡­æ®å’Œé™„åŠ  headerã€‚è¦åœ¨ "),n("code",[t._v("fetch")]),t._v(" ä¸­å‘é€å‡­æ®ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ  "),n("code",[t._v('credentials: "include"')]),t._v(" é€‰é¡¹ï¼Œç°åœ¨ï¼Œ"),n("code",[t._v("fetch")]),t._v(" å°†æŠŠæºè‡ª "),n("code",[t._v("another.com")]),t._v(" çš„ cookie å’Œæˆ‘ä»¬çš„è¯·æ±‚å‘é€åˆ°è¯¥ç½‘ç«™ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://another.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  credentials"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"include"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å¦‚æœæœåŠ¡å™¨åŒæ„æ¥å— "),n("strong",[t._v("å¸¦æœ‰å‡­æ®")]),t._v(" çš„è¯·æ±‚ï¼Œåˆ™é™¤äº† "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å¤–ï¼ŒæœåŠ¡å™¨è¿˜åº”è¯¥åœ¨å“åº”ä¸­æ·»åŠ  header "),n("code",[t._v("Access-Control-Allow-Credentials: true")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-http extra-class"},[n("pre",{pre:!0,attrs:{class:"language-http"}},[n("code",[t._v("200 OK\n"),n("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Origin:")]),t._v(" https://javascript.info\n"),n("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Credentials:")]),t._v(" true\n")])])]),n("p",[t._v("âš ï¸ å¯¹äºå…·æœ‰å‡­æ®çš„è¯·æ±‚ï¼Œç¦æ­¢ "),n("code",[t._v("Access-Control-Allow-Origin")]),t._v(" ä½¿ç”¨æ˜Ÿå· "),n("code",[t._v("*")]),t._v("ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œå®ƒå¿…é¡»æœ‰ä¸€ä¸ªç¡®åˆ‡çš„æºã€‚è¿™æ˜¯å¦ä¸€é¡¹å®‰å…¨æªæ–½ï¼Œä»¥ç¡®ä¿æœåŠ¡å™¨çœŸçš„çŸ¥é“å®ƒä¿¡ä»»çš„å‘å‡ºæ­¤è¯·æ±‚çš„æ˜¯è°ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);