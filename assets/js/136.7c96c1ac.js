(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1266:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"mongoose"}},[t._v("Mongoose")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼šğŸ¦ "),n("a",{attrs:{href:"https://www.youtube.com/playlist?list=PLhGp6N0DI_1QJMb63oecYZ3lLjrF4PnIs",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB and Mongoose"),n("OutboundLink")],1),t._v(" | freeCodeCamp")]),t._v(" "),n("p",[t._v("MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å¯¹è±¡æ•°æ®åº“ï¼Œè¯•å›¾è§£å†³å†…å­˜ä¸­çš„å¯¹è±¡å’ŒæŒä¹…åŒ–çš„å­˜å‚¨ä¹‹é—´çš„è½¬æ¢å’Œæ˜ å°„é—®é¢˜ã€‚Mongoose æ˜¯åŸºäº MongoDB æ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨å’Œç®¡ç†çš„ Node.js æ¨¡å—ï¼Œå› æ­¤æ•°æ®å­˜å‚¨ååˆ†çµæ´»ä¸”æ˜“äºæ‹“å±•ï¼Œ"),n("strong",[t._v("åŒæ—¶å®ƒç»“åˆäº†å…³ç³»å‹æ•°æ®åº“ä¸­ Shema çš„æ¦‚å¿µï¼Œä½¿å¾—æ•°æ®ç»“æ„æ›´ä¸¥è°¨å’Œç®¡ç†")]),t._v("ï¼Œæ›´ä¸ºä¼˜é›…åœ°è§£å†³ MongoDB åœ¨å¯¹è±¡å»ºæ¨¡ä¸Šçš„ä¸€ç³»åˆ—é—®é¢˜ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æ ¸å¿ƒæ¦‚å¿µ"}},[t._v("æ ¸å¿ƒæ¦‚å¿µ")]),t._v(" "),n("p",[n("img",{attrs:{src:a(761),alt:"Mongoose"}})]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("Schema æ¨¡å¼")]),t._v("ï¼šç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„å­—æ®µè®¾ç½®ï¼Œ"),n("strong",[t._v("æè¿°äº†ä¸€ç±»æ•°æ®è§„èŒƒ")]),t._v("ï¼ŒåŒ…æ‹¬è¿™ç±»æ•°æ®å¯èƒ½åŒ…å«çš„å­—æ®µï¼Œå¹¶è§„å®šæ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹ç­‰ï¼Œå®ƒä»¬æ˜¯å¦å¯ä»¥ä¸ºç©ºï¼Œä»¥åŠå…è®¸å­˜å‚¨çš„æœ€é•¿å’Œæœ€çŸ­å€¼ç­‰ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("Model æ¨¡å‹")]),t._v("ï¼šä» Schema äº§ç”Ÿçš„"),n("strong",[t._v("æ„é€ å™¨")]),t._v("ï¼Œå¯ä»¥äº§ç”Ÿ Document æ–‡æ¡£ï¼Œé€šè¿‡æŸ¥æ‰¾ã€åˆ›å»ºã€åˆ é™¤ Document æ¥æ“ä½œæ–‡æ¡£ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("Document æ–‡æ¡£")]),t._v("ï¼šæœ¬è´¨ä¸Šæ˜¯ Model çš„"),n("strong",[t._v("å®ä¾‹")]),t._v("ï¼Œæ¯ä¸€æ¡æ•°æ®ï¼ˆå¯¹è±¡ï¼‰å°±æ˜¯ä»¥ä¸€ä¸ª Document å®ä¾‹æ¥å­˜å‚¨ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"å®‰è£…"}},[t._v("å®‰è£…")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.mongodb.org.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB ä¸­æ–‡ç½‘"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://mongoosejs.com/docs/guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mongoose Document"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://mongoosejs.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mongoose.js ä¸­æ–‡ç½‘"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("ğŸ’¡ mongoose æ˜¯ä¸€ä¸ª nodejs æ¨¡å—ï¼Œç›¸å½“äºååŠ© node ä¸ MongoDB æ²Ÿé€šçš„ä¸­é—´è€…ï¼Œæ•°æ®ä¾ç„¶å­˜å‚¨åœ¨ MongoDB Server ä¸Šï¼Œå› æ­¤éœ€è¦åœ¨ç³»ç»Ÿä¸­å…ˆå®‰è£… MongoDB æˆ–ä½¿ç”¨ docker å®¹å™¨çš„æ–¹å¼ç›´æ¥å¯åŠ¨ã€‚\nğŸ’¡ ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨çº¿äº‘æ•°æ®åº“ "),n("a",{attrs:{href:"https://www.mongodb.com/cloud/atlas",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB Atlas"),n("OutboundLink")],1),t._v("ï¼ˆæœ‰"),n("a",{attrs:{href:"https://www.mongodb.com/pricing",target:"_blank",rel:"noopener noreferrer"}},[t._v("å…è´¹é¢åº¦"),n("OutboundLink")],1),t._v("ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("åœ¨é¡¹ç›®ä¸­å®‰è£… mongoose æ¨¡å—")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" mongoose\n")])])]),n("h2",{attrs:{id:"åŸºæœ¬ç”¨æ³•"}},[t._v("åŸºæœ¬ç”¨æ³•")]),t._v(" "),n("ol",[n("li",[t._v("å¯¼å…¥ mongoose æ¨¡å—")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("è¿æ¥æ•°æ®åº“")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("# è¿æ¥åˆ°æœ¬åœ° MongoDB çš„ nodegist æ•°æ®åº“\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" mongoose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://localhost/nodegist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useNewUrlParser"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ è¿æ¥æ•°æ®åº“æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¿”å›ä¸€ä¸ªçŠ¶æ€å¾…å®š pending çš„è¿æ¥ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬æ—¶äº‹ä»¶ "),n("code",[t._v("open")]),t._v(" æˆ– "),n("code",[t._v("error")]),t._v(" æ¥è·å–è¿æ¥æˆåŠŸæé†’å’Œå¤±è´¥è­¦å‘Šã€‚åªæœ‰è¿æ¥æˆåŠŸåæ‰å¯ä»¥è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œ=="),n("strong",[t._v("å› æ­¤æ•°æ®åº“çš„æ“ä½œéƒ½åœ¨å›è°ƒå‡½æ•°ä¸­")]),t._v("==ã€‚")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("var db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function() {\n  // we're connected!\n});\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("å®šä¹‰ schemaï¼Œå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ model çš„é…ç½®å¯¹è±¡ï¼Œè®¾ç½®äº† MongoDB çš„é›†åˆ collection å­˜å‚¨çš„æ–‡æ¡£ document åº”è¯¥å…·æœ‰çš„å­—æ®µåŠå…¶å­—æ®µå€¼çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ "),n("code",[t._v("required")]),t._v("ã€"),n("code",[t._v("unique")]),t._v("ã€"),n("code",[t._v("default")]),t._v(" é™åˆ¶å­—æ®µæˆ–è®¾ç½®é»˜è®¤å€¼ã€‚")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" GistSchema "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("mongoose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Schema")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…æ·»å­—æ®µ")]),t._v("\n  type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ•°ç»„ï¼Œå…ƒç´ æ˜¯å­—ç¬¦ä¸²")]),t._v("\n  code"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  author_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­—æ®µå€¼éœ€è¦å”¯ä¸€")]),t._v("\n  created_at"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ schema æ˜¯ model çš„æ„å»ºï¼ˆé…ç½®ï¼‰æ¨¡å—ï¼Œå¯ä»¥é€šè¿‡ schema çš„ç»„åˆï¼ˆç»§æ‰¿ï¼‰æ¥æ„å»ºå‡ºå¤æ‚çš„ modelã€‚")]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("åˆ›å»º modelï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Model çš„åç§°ï¼ˆSchema åˆ›å»º Modelï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸºäºçš„ Schema")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" GistModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Gist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" GistSchema"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ model æ˜¯åŸºäº Schema å®šä¹‰çš„"),n("strong",[t._v("æ„é€ å‡½æ•°")]),t._v("ï¼Œå®ä¾‹åŒ–åå¯ä»¥å¾—åˆ°æ–‡æ¡£ï¼Œå°±æ˜¯ä¸€æ¡æ•°æ®è®°å½•ã€‚")]),t._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[t._v("ä½¿ç”¨ model å®ä¾‹åŒ–åˆ›å»º documentï¼Œç„¶åå°±å¯ä»¥å¯¹ document è¿›è¡Œæ“ä½œã€‚")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" gist "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GistModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test_gist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javascript'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'console.log(\"hello world!\");'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    author_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Ben'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    created_at"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ ä¹Ÿå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ª"),n("strong",[t._v("ç©ºçš„æ–‡æ¡£ document")]),t._v("ï¼Œè¯¥æ–‡æ¡£ç›¸å½“äºä¸€ä¸ªå¯¹è±¡ objectï¼Œç„¶åå¯ä»¥æŒ‰ç…§å¯¹è±¡æ–°å¢å±æ€§çš„æ–¹å¼ï¼Œå†æ·»åŠ  Schema ä¸­é¢„è®¾çš„å­—æ®µçš„å€¼")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v("  gist "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GistModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ngist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test_gist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ngist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javascript'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ngist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'console.log(\"hello world!\");'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ngist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Ben'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ngist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("created_at"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"å¸¸ç”¨æ“ä½œ"}},[t._v("å¸¸ç”¨æ“ä½œ")]),t._v(" "),n("p",[t._v("å‚è€ƒï¼š"),n("a",{attrs:{href:"https://mongoosejs.com/docs/api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mongoose API Docs"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"å­˜å‚¨"}},[t._v("å­˜å‚¨")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("<documentName>.save((error, doc) => {// do something})")]),t._v(" æ¯ä¸ª document ä¼šåœ¨è°ƒç”¨ä»–çš„ "),n("code",[t._v("save")]),t._v(" æ–¹æ³•åä¿å­˜åˆ°æ•°æ®åº“ã€‚å½“æ•°æ®åº“è¿”å›æ•°æ®æ—¶ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼ŒğŸ’¡ å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ "),n("code",[t._v("error")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("doc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("<modelName>.create(docArray, (err, data) => {})")]),t._v(" åˆ›å»º"),n("strong",[t._v("å¤šä¸ª documents")]),t._v(" å¹¶ä¿å­˜åˆ°æ•°æ®åº“çš„å¿«æ·æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªä¼ é€’çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆå¯¹è±¡ï¼‰éƒ½åŒ…å«åŸºäº schema è§„å®šçš„é”®å€¼å¯¹ã€‚")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" peopleArray "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hannah"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" favoriteFoods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"watermelon"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mango"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Igor"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("52")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" favoriteFoods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vegetable soup"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nPerson"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("peopleArray"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("People"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"æŸ¥è¯¢"}},[t._v("æŸ¥è¯¢")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("<modelName>.find(<query>, (error, doc) => {// do something})")]),t._v(" æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ¨¡å‹æ‰€å¯¹åº”çš„å®ä¾‹ï¼Œä»¥æ•°ç»„çš„å½¢å¼è¿”å›ã€‚"),n("strong",[t._v("å¦‚æœä¸ä¼ é€’æŸ¥è¯¢æ¡ä»¶ "),n("code",[t._v("<query>")]),t._v("ï¼Œè¿”å›æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®")]),t._v("ï¼›å¦‚æœå¸Œæœ›è·å–ç‰¹å®šçš„æ•°æ®ï¼Œå¯ä»¥ä¼ é€’ "),n("code",[t._v("<query>")]),t._v(" ä½œä¸ºï¼ˆå¯é€‰ï¼‰ç¬¬ä¸€ä¸ªå‚æ•°")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// è·å–æ‰€æœ‰ name ä»¥ "fluff" å¼€å¤´çš„æ–‡æ¡£æ•°æ®')]),t._v("\nKitten"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^fluff")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[n("p",[n("code",[t._v("<modelName>.findOne(<query>, (error, doc) => {// do something})")]),t._v(" æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„æ¨¡å‹æ‰€å¯¹åº”çš„å®ä¾‹çš„ç¬¬ä¸€ä¸ªã€‚")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("<modelName>.findById(id, (error, doc) => {// do something})")]),t._v(" "),n("strong",[t._v("MongoDB ä¼šä¸ºæ¯ä¸ªæ–‡æ¡£åˆ›å»ºä¸€ä¸ªå­—æ®µ "),n("code",[t._v("_id")]),t._v("ï¼Œå¯ä»¥é€šè¿‡è¯¥å€¼æŸ¥è¯¢æ–‡æ¡£")]),t._v("ã€‚")])])]),t._v(" "),n("p",[t._v("ğŸ’¡ ç”±äºä¸æ•°æ®åº“çš„äº¤äº’æ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥ä½¿ç”¨"),n("strong",[t._v("é“¾å¼")]),t._v("è°ƒç”¨çš„æ–¹å¼æ¥å®ç°å¤æ‚çš„æŸ¥è¯¢ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ä½¿ç”¨"),n("a",{attrs:{href:"https://mongoosejs.com/docs/api/query.html#query_Query-sort",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³• "),n("code",[t._v(".sort()")]),n("OutboundLink")],1),t._v(" å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼Œå¦‚è®¾ç½®ä¸º "),n("code",[t._v("{age: 'asc'}")]),t._v(" æ–‡æ¡£åŸºäºå­—æ®µ "),n("code",[t._v("age")]),t._v(" å‡åº ascending æ’åˆ—ï¼›å¦‚æœéœ€è¦é™åºå¯ä»¥å°†å­—æ®µå¯¹åº”çš„å€¼è®¾ç½®ä¸º "),n("code",[t._v("desc")])]),t._v(" "),n("li",[t._v("ä½¿ç”¨"),n("a",{attrs:{href:"https://mongoosejs.com/docs/api/query.html#query_Query-limit",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³• "),n("code",[t._v(".limit(n)")]),n("OutboundLink")],1),t._v(" é™åˆ¶è¿”å›çš„æ–‡æ¡£æ•°é‡æœ€å¤šä¸º "),n("code",[t._v("n")])]),t._v(" "),n("li",[t._v("ä½¿ç”¨"),n("a",{attrs:{href:"https://mongoosejs.com/docs/api/query.html#query_Query-select",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³• "),n("code",[t._v(".select()")]),n("OutboundLink")],1),t._v(" è®¾ç½®æå–è¿”å›æ–‡æ¡£çš„æŒ‡å®šå­—æ®µï¼Œå¯ä»¥ä¼ å…¥ "),n("code",[t._v("+fieldName")]),t._v(" æˆ– "),n("code",[t._v("-fieldName")]),t._v(" å‚æ•°ä»¥è¡¨ç¤ºè¿”å›çš„æ•°æ®ä¸­åŒ…å«æˆ–ä¸åŒ…å«ç›¸åº”çš„å­—æ®µï¼ˆé»˜è®¤è¿”å› "),n("code",[t._v("_id")]),t._v(" å­—æ®µï¼‰")]),t._v(" "),n("li",[t._v("ä½¿ç”¨"),n("a",{attrs:{href:"https://mongoosejs.com/docs/api/query.html#query_Query-exec",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–¹æ³• "),n("code",[t._v(".exec()")]),n("OutboundLink")],1),t._v(" è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå®ƒä¼šæ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•ï¼Œå¹¶åœ¨æ•°æ®åº“è¿”å›å“åº”æ—¶æ‰§è¡Œå…¶ä¸­é¢„è®¾çš„å‡½æ•°")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("favoriteFoods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$all"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Salad'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'asc'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("limit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"æ›´æ–°"}},[t._v("æ›´æ–°")]),t._v(" "),n("p",[n("strong",[t._v("æ—§æ–¹æ³•")]),t._v("ï¼šé€šè¿‡ 3 æ­¥å®ç°æ–‡æ¡£æ›´æ–°ï¼Œä»æ•°æ®åº“è·å–éœ€è¦æ–‡æ¡£ï¼Œç¼–è¾‘ä¿®æ”¹æ–‡æ¡£ï¼Œå°†ä¿®æ”¹åçš„æ–‡æ¡£ä¿å­˜å›æ•°æ®åº“ã€‚ğŸ‘ ä½†è¯¥æ–¹æ³•ä¼šå½¢æˆæ·±åº¦åµŒå¥—ã€‚")]),t._v(" "),n("ol",[n("li",[t._v("ä½¿ç”¨ "),n("code",[t._v(".find")]),t._v(" åŠç±»ä¼¼æ–¹æ³•è·å–æ–‡æ¡£")]),t._v(" "),n("li",[t._v("åœ¨å›è°ƒå‡½æ•°ä¸­ä¿®æ”¹æ–‡æ¡£")]),t._v(" "),n("li",[t._v("è°ƒç”¨ "),n("code",[t._v(".save()")]),t._v(" å°†ä¿®æ”¹åçš„æ–‡æ¡£ä¿å­˜å›æ•°æ®åº“ä¸­ï¼Œç”±äºæ–‡æ¡£å·²å­˜åœ¨ "),n("code",[t._v("_id")]),t._v(" å­—æ®µï¼Œå› æ­¤ä¼šè¦†ç›–æ‰æ•°æ®åº“åŸæœ‰ç›¸åº”æ–‡æ¡£ã€‚")])]),t._v(" "),n("p",[n("strong",[t._v("æ–°æ–¹æ³•")]),t._v("ï¼šä½¿ç”¨ mongoose æä¾›çš„å†…ç½®æ–¹æ³• "),n("code",[t._v(".findOneAndUpdate()")]),t._v(" æ–¹æ³•æ›´æ–¹ä¾¿åœ°å®ç°æ–‡æ¡£çš„æ›´æ–°ã€‚")]),t._v(" "),n("p",[t._v("æ–¹æ³• "),n("code",[t._v("<modelName>.findOneAndUpdate(<query>, <update_properties>, <options>, <callback>)")]),t._v(" å¯ä»¥å®ç°ä¸€æ­¥æ›´æ–°æ–‡æ¡£ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("é€šè¿‡ "),n("code",[t._v("<query>")]),t._v(" æŸ¥è¯¢æ–‡æ¡£")]),t._v(" "),n("li",[t._v("åœ¨ "),n("code",[t._v("<update_properties>")]),t._v(" è®¾ç½®éœ€è¦æ›´æ–°çš„å­—æ®µ")]),t._v(" "),n("li",[t._v("ï¼ˆå¯é€‰ï¼‰"),n("code",[t._v("<options>")]),t._v(" å¯ä»¥è®¾ç½®æ›´æ–°è¡Œä¸ºï¼Œå¦‚è®¾ç½® "),n("code",[t._v("{new: true}")]),t._v(" è¿”å›æ›´æ–°åçš„æ–‡æ¡£")]),t._v(" "),n("li",[n("code",[t._v("<callback>")]),t._v(" å›è°ƒå‡½æ•°ä¼šåœ¨æ•°æ®åº“è¿”å›å“åº”åæ‰§è¡Œ")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOneAndUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Ben'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ä¿®æ”¹åçš„å€¼")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("ğŸ’¡ ä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³• "),n("code",[t._v("findByIdAndUpdate()")]),t._v(" åŸºäºçš„ "),n("code",[t._v("_id")]),t._v(" å­—æ®µæ›´æ–°æ–‡æ¡£ã€‚")]),t._v(" "),n("h3",{attrs:{id:"åˆ é™¤"}},[t._v("åˆ é™¤")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("<modelName>.findOneAndRemove(<query>, (error, doc) => {// do something})")]),t._v(" åˆ é™¤åŒ¹é…çš„ä¸€ä¸ªæ–‡æ¡£ï¼Œå¹¶ä¸”è¢«ç§»é™¤çš„æ–‡æ¡£ä¼šä½œä¸ºæ•°æ®åº“å“åº”çš„ "),n("code",[t._v("data")]),t._v(" å‚æ•°è¿”å›ã€‚")])]),t._v(" "),n("p",[t._v("ğŸ’¡ ä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³• "),n("code",[t._v(".findByIdAndRemove()")]),t._v(" åŸºäº ID åˆ é™¤æ–‡æ¡£ã€‚")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("<modelName>.remove(<query>, (error, JSONStatus) => {// do something})")]),t._v(" åˆ é™¤åŒ¹é…çš„æ‰€æœ‰æ–‡æ¡£ï¼Œè¿”å›ä¸€ä¸ª JSON status çŠ¶æ€ç ã€‚å¦‚æœåªæƒ³åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡æ¡£ï¼Œå¯ä»¥æ·»åŠ é…ç½®é¡¹ "),n("code",[t._v("{single: true}")]),t._v(" ä½œä¸ºï¼ˆå¯é€‰ï¼‰ç¬¬äºŒä¸ªå‚æ•°ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports},761:function(t,s,a){t.exports=a.p+"assets/img/20201003212725676_17716.51dedb3a.png"}}]);